{"version":3,"sources":["utils/types.ts","components/AppHeader/AppHeader.tsx","utils/constants.ts","utils/helpers.ts","utils/api.ts","services/actions/Modal.ts","services/actions/User.ts","services/actions/Ingredients.ts","services/reducers/Ingredients.ts","services/actions/Constructor.ts","services/reducers/Constructor.ts","services/actions/IngredientDetails.ts","services/reducers/IngredientDetails.ts","services/actions/Order.ts","services/reducers/Order.ts","services/reducers/Modal.ts","services/reducers/User.ts","services/actions/WebSocket.ts","services/reducers/OrderList.ts","services/reducers/Root.ts","services/middleware/socket.ts","components/Modal/ModalOverlay/ModalOverlay.tsx","components/Modal/Modal.tsx","utils/getIngredientsGroups.ts","components/BurgerIngredients/IngredientItem/IngredientItem.tsx","components/BurgerIngredients/IngredientsBlock/IngredientsBlock.tsx","components/BurgerIngredients/IngredientsTabs/IngredientsTabs.tsx","components/BurgerIngredients/BurgerIngredients.tsx","components/BurgerConstructor/ConstructotIngredient/ConstructotIngredient.tsx","components/ProtectedRoute/ProtectedRoute.tsx","components/BurgerConstructor/BurgerConstructor.tsx","pages/ConstructorPage/ConstructorPage.tsx","components/AdditionalLink/AdditionalLink.tsx","hooks/useForm.ts","pages/SinglePageWrapper.tsx","pages/LoginPage/LoginPage.tsx","pages/RegistrationPage/RegistrationPage.tsx","pages/ResetPasswordPage/ResetPasswordPage.tsx","pages/ProfilePage/Profile/Profile.tsx","components/OrderListItem/OrderListItem.tsx","components/Feed/Feed.tsx","components/OrderListItem/OrderItem/OrderItem.tsx","pages/ProfilePage/Orders/Orders.tsx","pages/ProfilePage/Logout/Logout.tsx","pages/ProfilePage/ProfilePage.tsx","components/IngredientDetails/IngredientDetails.tsx","components/BurgerConstructor/OrderDetails/icon/done.svg","components/BurgerConstructor/OrderDetails/OrderDetails.tsx","components/Modal/ErrorModal/ErrorModal.tsx","pages/FeedPage/FeedPage.tsx","components/App/App.tsx","index.jsx","components/OrderListItem/OrderListItem.module.css","pages/ProfilePage/ProfilePage.module.css","components/Feed/Feed.module.css","components/OrderListItem/OrderItem/OrderItem.module.css","components/AppHeader/AppHeader.module.css","components/IngredientDetails/IngredientDetails.module.css","components/Modal/Modal.module.css","components/BurgerConstructor/BurgerConstructor.module.css","components/BurgerIngredients/BurgerIngredients.module.css","components/BurgerIngredients/IngredientItem/IngredientItem.module.css","components/AdditionalLink/AdditionalLink.module.css","components/BurgerConstructor/OrderDetails/OrderDetails.module.css","components/Modal/ModalOverlay/ModalOverlay.module.css","pages/ConstructorPage/ConstructorPage.module.css","components/BurgerIngredients/IngredientsBlock/IngredientsBlock.module.css","components/BurgerIngredients/IngredientsTabs/IngredientsTabs.module.css","components/BurgerConstructor/ConstructotIngredient/ConstructorIngredient.module.css","pages/SinglePageWrapper.module.css","pages/ProfilePage/Orders/Ordres.module.css","components/Modal/ErrorModal/ErrorModal.module.css"],"names":["EnumOrderStatusName","EnumIconType","EnumModalType","EnumIngredientType","EnumResetPassportStepType","getIcon","type","isActive","CONSTRUCTOR","ORDER_QUEUE","LK","NavItem","to","text","useLocation","pathname","className","classNames","styles","navLink","exact","activeClassName","AppHeader","wrapper","nav","leftBlock","centralBlock","rightBlock","BASIC_URL","getUrl","uri","WSS_ALL_ORDERS_URL","WSS_USER_ORDERS_URL","API_INGREDIENTS_URL","API_ORDERS_URL","API_AUTH_URL","API_PASSWORD_RESET_URL","API_LOGIN_URL","API_LOGOUT_URL","API_REGISTER_URL","API_TOKEN_URL","API_USER_URL","API_PASSWORD_RESET_CONFIRMATION_URL","setCookie","name","value","options","path","expires","Date","toUTCString","updatedCookie","encodeURIComponent","optionKey","optionValue","document","cookie","getCookie","matches","match","RegExp","replace","decodeURIComponent","undefined","deleteCookie","calculateOrderCost","ingredients","reduce","sum","ingredient","price","diffDates","checkedData","getTime","dateParse","createdAt","dayString","createdDate","daysDiff","Math","ceil","toLocaleTimeString","hour","minute","getOrderIngredients","orderIngredients","result","ingredientItem","_id","getIngredientWithOrderHash","orderId","floor","now","checkResponse","response","ok","json","then","err","Promise","reject","catch","message","request","url","fetch","saveTokens","refreshToken","accessToken","fetchWithRefresh","res","method","headers","body","JSON","stringify","token","authorization","APPEND_MODAL_TYPE","APPEND_ERROR_MODAL_TYPE","REMOVE_MODAL_TYPE","GET_USER_REQUEST","GET_USER_SUCCESS","GET_USER_FAILED","LOGOUT_USER","loginUser","email","password","dispatch","resp","login","success","data","user","logoutUser","getUserData","patchUserData","setUserApiData","registrationUser","userRegister","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","getIngredientsData","items","InitialIngredientsState","ingredientsRequest","ingredientsFailed","ADD_INGREDIENT","REMOVE_INGREDIENT","MOVE_INGREDIENT","InitialConstructorState","bun","totalPrice","ADD_INGREDIENT_DETAILS","REMOVE_INGREDIENT_DETAILS","InitialIngredientDetailsState","SENT_ORDER_REQUEST","SENT_ORDER_SUCCESS","SENT_ORDER_FAILED","sendOrderRequest","orderList","Object","assign","sendOrder","number","order","modalType","ORDER","InitialOrderState","orderRequest","orderFailed","orderData","InitialModalState","status","InitialUserState","userRequest","userFailed","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_GET_MESSAGE","WS_CLOSE_CONNECTION","initialState","ordersRequest","ordersFailed","orderListReducer","state","action","payload","rootReducer","combineReducers","constructor","BUN","totalPriceWithoutBun","orderIndex","length","filter","newIndex","OrderListWithoutMovedItem","item","newIngredientsOrderList","slice","map","index","ingredientDetails","modal","ERROR","newState","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","store","socket","next","WebSocket","close","onopen","event","onerror","onmessage","dataObject","parse","orders","onclose","console","log","send","createStore","useAppDispatch","useDispatch","useAppSelector","useSelector","ModalOverlay","onClose","children","onClick","modalRoot","getElementById","Modal","title","history","useHistory","useEffect","handleEscape","e","key","addEventListener","removeEventListener","ReactDOM","createPortal","stopPropagation","header","goBack","button","id","getOrderIngredientsIDs","forEach","push","IngredientItem","location","ingredientId","count","orderIngredientList","getCount","useDrag","collect","monitor","isDrag","isDragging","dragRef","ref","background","size","src","image","alt","priceBlock","IngredientsBlock","ingredientsBlock","IngredientsTabs","current","changeCurrentZone","active","SAUCE","MAIN","BurgerIngredients","useState","currentZone","setCurrentZone","bunRef","useRef","sauceRef","mainRef","ingredientsByTypeList","previousValue","currentValue","main","sauce","getIngredientsGroups","zone","scrollIntoView","onScroll","currentPosition","currentTarget","scrollTop","offsetTop","bufZone","mainZone","BurgerIngredientsContainer","ConstructorIngredient","useDrop","accept","hover","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","oldIndex","moveCard","drop","drag","thumbnail","handleClose","onDeleteIngredient","ProtectedRoute","rest","isAuth","render","from","BurgerConstructor","redirectToAuth","setRedirectToAuth","hasBun","hasIngredients","canOrder","onDropHandler","dropTarget","isLocked","selectedBlock","sort","a","b","disabled","htmlType","ConstructorPage","content","DndProvider","backend","HTML5Backend","AdditionalLink","label","lintText","classnames","linkLabel","link","useForm","inputValues","values","setValues","handleChange","target","SinglePageWrapper","LoginPage","locationState","enterHandler","preventDefault","onSubmit","onChange","autoComplete","LoginPageContainer","RegistrationPage","placeholder","RegistrationPageContainer","getStepContent","step","EMAIL","PASSWORD","PasswordConformation","isEmailConfirm","passwordResetConfirmation","error","errorText","EmailConformation","passwordReset","ResetPasswordPage","ResetPasswordPageContainer","ProfileInput","section","icon","Profile","isModify","setIsModify","OrderListItem","useRouteMatch","ingredientList","params","orderIngredient","i","param","paramImg","image_mobile","lastParamImg","paramAdditionalValue","reverse","OrderTable","doneOrders","pendingOrders","numbers","numbers_block","numbers_blue","result_text","ingredientsID","includes","OrderList","orderItemData","Feed","container","orderTable","OrderItem","orderItem","isModal","orderIngredientsSet","Set","ingredientID","iconImg","OrderItemContainer","selectedOrderId","useParams","selectedOrderData","find","Orders","OrdersContainer","isSinglePage","stateAccessToken","split","getClearAccessToken","Logout","onLogout","useCallback","logoutHandler","ProfileNavLink","activeLabel","labelWrapper","ProfilePage","navHint","ProfilePageContainer","IngredientDetailsContent","isLoading","getProperty","propertyName","loaderContainer","loader","image_large","propertyList","propertyItem","IngredientDetails","setIsLoading","IngredientDetailsContainer","OrderDetails","orderNumber","doneIcon","ErrorModal","FeedPage","getModal","App","handleModalClose","init","StrictMode","module","exports"],"mappings":"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","file":"static/js/main.b61380fb.chunk.js","sourcesContent":["import { NavLinkProps } from 'react-router-dom';\r\nimport { APPEND_ERROR_MODAL_TYPE } from '../services/actions/Modal';\r\n\r\nexport type IngredientType = {\r\n    readonly _id: string;\r\n    readonly name: string;\r\n    readonly type: EnumIngredientType;\r\n    readonly proteins: number;\r\n    readonly fat: number;\r\n    readonly carbohydrates: number;\r\n    readonly calories: number;\r\n    readonly price: number;\r\n    readonly image: string;\r\n    readonly image_mobile: string;\r\n    readonly image_large: string;\r\n    readonly __v: number;\r\n};\r\n\r\nexport enum EnumOrderStatusName {\r\n    'created' = 'Создан',\r\n    'pending' = 'Готовится',\r\n    'done' = 'Готов'\r\n}\r\n\r\nexport type OrderType = {\r\n    readonly _id: string;\r\n    readonly createdAt: string;\r\n    readonly updatedAt: string;\r\n    readonly status: 'created' | 'pending' | 'done';\r\n    readonly name: string;\r\n    readonly number: number;\r\n    readonly ingredients: string[];\r\n};\r\n\r\nexport interface OrderedIngredient extends IngredientType {\r\n    orderIndex: number;\r\n    orderId: number;\r\n    index: number;\r\n}\r\n\r\nexport enum EnumIconType {\r\n    CONSTRUCTOR = 'constructor',\r\n    ORDER_QUEUE = 'orderQueue',\r\n    LK = 'lk'\r\n}\r\n\r\nexport enum EnumModalType {\r\n    ERROR = 'error',\r\n    ORDER = 'order'\r\n}\r\n\r\nexport enum EnumIngredientType {\r\n    BUN = 'bun',\r\n    SAUCE = 'sauce',\r\n    MAIN = 'main'\r\n}\r\n\r\nexport enum EnumResetPassportStepType {\r\n    EMAIL = 'email',\r\n    PASSWORD = 'password'\r\n}\r\n\r\nexport type LocationProps = {\r\n    state: {\r\n        from: Location;\r\n        isEmailConfirm: boolean;\r\n    };\r\n};\r\n\r\nexport type NavItemProps = Pick<NavLinkProps, 'to'> & { text: string };\r\n\r\ntype UserDataProps = {\r\n    password: string;\r\n    token: string;\r\n};\r\n\r\nexport type TUserInfoData = {\r\n    email: string,\r\n    name: string\r\n}\r\n\r\nexport type UserAuthProps = {\r\n    refreshToken: string;\r\n    accessToken: string;\r\n    user?: UserDataProps;\r\n};\r\n\r\nexport interface IError {\r\n    readonly type: typeof APPEND_ERROR_MODAL_TYPE;\r\n    message: String;\r\n}\r\n\r\nexport interface IIngredientList {\r\n    [index: string]: IngredientType;\r\n}\r\n","import React, { FC } from 'react';\r\nimport classNames from 'classnames';\r\nimport { BurgerIcon, ListIcon, Logo, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { NavLink, useLocation } from 'react-router-dom';\r\n\r\nimport styles from './AppHeader.module.css';\r\nimport { EnumIconType, NavItemProps } from '../../utils/types';\r\n\r\nconst getIcon = (type: EnumIconType, isActive: boolean): JSX.Element => {\r\n    switch (type) {\r\n        case EnumIconType.CONSTRUCTOR:\r\n            return <BurgerIcon type={isActive ? 'primary' : 'secondary'} />;\r\n        case EnumIconType.ORDER_QUEUE:\r\n            return <ListIcon type={isActive ? 'primary' : 'secondary'} />;\r\n        case EnumIconType.LK:\r\n            return <ProfileIcon type={isActive ? 'primary' : 'secondary'} />;\r\n    }\r\n};\r\n\r\nconst NavItem: FC<NavItemProps & { type: EnumIconType }> = ({ to, text, type }) => {\r\n    const { pathname } = useLocation();\r\n    const isActive = to === pathname;\r\n\r\n    return (\r\n        <NavLink\r\n            className={classNames(styles.navLink, 'm-2 text text_type_main-default')}\r\n            to={to}\r\n            exact\r\n            activeClassName={styles.isActive}\r\n        >\r\n            {getIcon(type, isActive)} <span className={classNames(styles.text, 'ml-2')}>{text}</span>\r\n        </NavLink>\r\n    );\r\n};\r\n\r\nexport const AppHeader: FC = () => {\r\n    return (\r\n        <header className={classNames(styles.wrapper, 'p-5')}>\r\n            <nav className={styles.nav}>\r\n                <section className={styles.leftBlock}>\r\n                    <NavItem to=\"/\" text=\"Конструктор\" type={EnumIconType.CONSTRUCTOR} />\r\n                    <NavItem to=\"/feed\" text=\"Лента заказов\" type={EnumIconType.ORDER_QUEUE} />\r\n                </section>\r\n                <section className={styles.centralBlock}>\r\n                    <Logo />\r\n                </section>\r\n                <section className={styles.rightBlock}>\r\n                    <NavItem to=\"/profile/orders\" text=\"Личный кабинет\" type={EnumIconType.LK} />\r\n                </section>\r\n            </nav>\r\n        </header>\r\n    );\r\n};\r\n","const BASIC_URL = 'norma.nomoreparties.space';\r\n\r\nconst getUrl = (type: 'HTTP' | 'WS', uri: string) => {\r\n    switch (type) {\r\n        case 'HTTP':\r\n            return `https://${BASIC_URL}/api/${uri}`;\r\n        case 'WS':\r\n            return `wss://${BASIC_URL}/${uri}`;\r\n    }\r\n};\r\n\r\nexport const WSS_ALL_ORDERS_URL = getUrl('WS', 'orders/all');\r\nexport const WSS_USER_ORDERS_URL = getUrl('WS', `orders?token=`);\r\n\r\nexport const API_INGREDIENTS_URL = getUrl('HTTP', 'ingredients');\r\nexport const API_ORDERS_URL = getUrl('HTTP', 'orders');\r\nexport const API_AUTH_URL = getUrl('HTTP', 'auth');\r\nexport const API_PASSWORD_RESET_URL = getUrl('HTTP', 'password-reset');\r\n\r\nexport const API_LOGIN_URL = API_AUTH_URL + '/login';           // - эндпоинт для авторизации.\r\nexport const API_LOGOUT_URL = API_AUTH_URL + '/logout';         // - эндпоинт для выхода из системы.\r\nexport const API_REGISTER_URL = API_AUTH_URL + '/register';     // - эндпоинт для регистрации пользователя.\r\nexport const API_TOKEN_URL = API_AUTH_URL + '/token';           // - эндпоинт обновления токена.\r\n\r\nexport const API_USER_URL = API_AUTH_URL + '/user';\r\n\r\nexport const API_PASSWORD_RESET_CONFIRMATION_URL = API_PASSWORD_RESET_URL + '/reset';\r\n","import {IIngredientList, IngredientType, OrderedIngredient} from './types';\r\n\r\nexport const setCookie = (name: string, value: string, options: any = {}) => {\r\n    options = { path: '/', ...options };\r\n\r\n    if (options.expires instanceof Date) {\r\n        options.expires = options.expires.toUTCString();\r\n    }\r\n\r\n    let updatedCookie = encodeURIComponent(name) + '=' + encodeURIComponent(value);\r\n\r\n    for (let optionKey in options) {\r\n        updatedCookie += '; ' + optionKey;\r\n        let optionValue = options[optionKey];\r\n        if (optionValue !== true) {\r\n            updatedCookie += '=' + optionValue;\r\n        }\r\n    }\r\n\r\n    document.cookie = updatedCookie;\r\n};\r\n\r\nexport const getCookie = (name: string) => {\r\n    const matches = document.cookie.match(\r\n        /* eslint-disable */\r\n        new RegExp('(?:^|; )' + name.replace(/([.\\\\+\\-*:\\/?!|^${}()\\[\\]])/g, '\\\\$1') + '=([^;]*)')\r\n    );\r\n    return matches ? decodeURIComponent(matches[1]) : undefined;\r\n};\r\n\r\nexport const getClearAccessToken = () => {\r\n    return getCookie('accessToken')?.split('Bearer ')[1];\r\n};\r\n\r\nexport const deleteCookie = (name: string) => {\r\n    setCookie(name, '', {\r\n        'max-age': -1\r\n    });\r\n};\r\n\r\nexport const calculateOrderCost = (ingredients: IngredientType[]) => {\r\n    return ingredients.reduce((sum, ingredient) => {\r\n        return sum + ingredient.price;\r\n    }, 0);\r\n};\r\n\r\nexport const diffDates = (checkedData: Date) => {\r\n    const now = new Date();\r\n    const result = now.getTime() - checkedData.getTime();\r\n    return  result / (1000 * 3600 * 24);\r\n};\r\n\r\nexport const dateParse = (createdAt: string): string => {\r\n    const createdDate = new Date(createdAt);\r\n    const daysDiff = diffDates(createdDate);\r\n    let dayString;\r\n\r\n    if (daysDiff < 1) {\r\n        dayString = `Сегодня`;\r\n    } else if (daysDiff < 2) {\r\n        dayString = `Вчера`;\r\n    } else {\r\n        dayString = `${Math.ceil(daysDiff)} дня назад`;\r\n    }\r\n\r\n    return `${dayString} ${createdDate.toLocaleTimeString('ru-Ru', {\r\n        hour: 'numeric',\r\n        minute: 'numeric'\r\n    })}`;\r\n};\r\n\r\nexport const getOrderIngredients = (orderIngredients: IngredientType[]): IIngredientList => {\r\n    return orderIngredients.reduce((result, ingredientItem) => {\r\n        return { ...result, [ingredientItem._id]: ingredientItem };\r\n    }, {});\r\n};\r\n\r\nexport const getIngredientWithOrderHash = (ingredient: OrderedIngredient) => ({\r\n    ...ingredient,\r\n    orderId: ingredient.orderId ? ingredient.orderId : Math.floor(Date.now() / 100)\r\n});","import {\r\n    API_INGREDIENTS_URL,\r\n    API_LOGIN_URL,\r\n    API_LOGOUT_URL,\r\n    API_ORDERS_URL,\r\n    API_PASSWORD_RESET_CONFIRMATION_URL,\r\n    API_PASSWORD_RESET_URL,\r\n    API_REGISTER_URL,\r\n    API_TOKEN_URL,\r\n    API_USER_URL\r\n} from './constants';\r\nimport { getCookie, setCookie } from './helpers';\r\n\r\nconst checkResponse = (response: Response) => {\r\n    return response.ok\r\n        ? response.json()\r\n        : response\r\n              .json()\r\n              .then((err: Error) => Promise.reject(err))\r\n              .catch(() => Promise.reject({ message: 'Ошибка сервера' }));\r\n};\r\n\r\nfunction request(url: string, options?: RequestInit) {\r\n    return fetch(url, options).then(checkResponse);\r\n}\r\n\r\nconst saveTokens = (refreshToken: string, accessToken: string) => {\r\n    setCookie('accessToken', accessToken);\r\n    setCookie('refreshToken', refreshToken);\r\n};\r\n\r\nexport const refreshTokenRequest = () => {\r\n    return request(API_TOKEN_URL, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8'\r\n        },\r\n        body: JSON.stringify({\r\n            token: getCookie('refreshToken')\r\n        })\r\n    });\r\n};\r\n\r\nexport const fetchWithRefresh = async (url: string, options: any) => {\r\n    try {\r\n        const res = await fetch(url, options);\r\n        return await checkResponse(res);\r\n    } catch (err: any) {\r\n        if (err.message === 'jwt expired') {\r\n            const { refreshToken, accessToken } = await refreshTokenRequest();\r\n            saveTokens(refreshToken, accessToken);\r\n            options.headers.authorization = accessToken;\r\n\r\n            const res = await fetch(url, options);\r\n            return await checkResponse(res);\r\n        } else {\r\n            return Promise.reject(err);\r\n        }\r\n    }\r\n};\r\n\r\nexport const sendOrder = (orderList: string[]) => {\r\n    const accessToken = getCookie('accessToken');\r\n    let headers = { 'Content-Type': 'application/json' };\r\n\r\n    if (accessToken) {\r\n        headers = Object.assign(headers, { authorization: accessToken });\r\n    }\r\n\r\n    let options = {\r\n        method: 'POST',\r\n        body: JSON.stringify({ ingredients: [...orderList] }),\r\n        headers: headers\r\n    };\r\n    return request(API_ORDERS_URL, options);\r\n};\r\n\r\nexport const getIngredients = () => {\r\n    return request(API_INGREDIENTS_URL);\r\n};\r\n\r\nexport const login = (email: string, password: string) => {\r\n    return request(API_LOGIN_URL, {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n            email: email,\r\n            password: password\r\n        }),\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    }).then(resp => {\r\n        saveTokens(resp.refreshToken, resp.accessToken);\r\n        return resp;\r\n    });\r\n};\r\n\r\nexport const logout = () => {\r\n    return request(API_LOGOUT_URL, {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n            token: getCookie('refreshToken')\r\n        }),\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    });\r\n};\r\n\r\nexport const userRegister = (email: string, password: string, name: string) => {\r\n    return fetchWithRefresh(API_REGISTER_URL, {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n            email: email,\r\n            password: password,\r\n            name: name\r\n        }),\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    }).then(resp => {\r\n        saveTokens(resp.refreshToken, resp.accessToken);\r\n        return resp;\r\n    });\r\n};\r\n\r\nexport const passwordReset = (email: string) => {\r\n    return request(API_PASSWORD_RESET_URL, {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n            email: email\r\n        }),\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    });\r\n};\r\n\r\nexport const passwordResetConfirmation = (password: string, token: string) => {\r\n    return request(API_PASSWORD_RESET_CONFIRMATION_URL, {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n            password: password,\r\n            token: token\r\n        }),\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    });\r\n};\r\n\r\nexport const getUserApiData = () => {\r\n    return fetchWithRefresh(API_USER_URL, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            authorization: getCookie('accessToken')\r\n        }\r\n    });\r\n};\r\n\r\nexport const setUserApiData = (email: string, password: string, name: string) => {\r\n    return fetchWithRefresh(API_USER_URL, {\r\n        method: 'PATCH',\r\n        body: JSON.stringify({\r\n            email: email,\r\n            password: password,\r\n            name: name\r\n        }),\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            authorization: getCookie('accessToken')\r\n        }\r\n    });\r\n};\r\n","import { EnumModalType } from '../../utils/types';\r\n\r\nexport const APPEND_MODAL_TYPE: 'APPEND_MODAL_TYPE' = 'APPEND_MODAL_TYPE';\r\nexport const APPEND_ERROR_MODAL_TYPE: 'APPEND_ERROR_MODAL_TYPE' = 'APPEND_ERROR_MODAL_TYPE';\r\nexport const REMOVE_MODAL_TYPE: 'REMOVE_MODAL_TYPE' = 'REMOVE_MODAL_TYPE';\r\n\r\nexport interface IAppendModalType {\r\n    readonly type: typeof APPEND_MODAL_TYPE;\r\n    modalType: EnumModalType;\r\n}\r\n\r\ninterface IAppendErrorModalType {\r\n    readonly type: typeof APPEND_ERROR_MODAL_TYPE;\r\n    status?: string | null;\r\n    message: string | null;\r\n}\r\n\r\ninterface IRemoveModalTypeE {\r\n    readonly type: typeof REMOVE_MODAL_TYPE;\r\n}\r\n\r\nexport type TModalActions = IAppendModalType | IRemoveModalTypeE | IAppendErrorModalType;","import { getUserApiData, login, logout, setUserApiData, userRegister } from '../../utils/api';\r\nimport { APPEND_ERROR_MODAL_TYPE } from './Modal';\r\nimport { IError, TUserInfoData } from '../../utils/types';\r\nimport { Dispatch } from 'react';\r\n\r\nexport const GET_USER_REQUEST: 'GET_USER_REQUEST' = 'GET_USER_REQUEST';\r\nexport const GET_USER_SUCCESS: 'GET_USER_SUCCESS' = 'GET_USER_SUCCESS';\r\nexport const GET_USER_FAILED: 'GET_USER_FAILED' = 'GET_USER_FAILED';\r\n\r\nexport const LOGOUT_USER: 'LOGOUT_USER' = 'LOGOUT_USER';\r\n\r\ninterface IGetUserRequest {\r\n    readonly type: typeof GET_USER_REQUEST;\r\n}\r\n\r\ninterface IGetUserSuccess {\r\n    readonly type: typeof GET_USER_SUCCESS;\r\n    data: TUserInfoData;\r\n    accessToken?: string;\r\n}\r\n\r\ninterface IGetUserFailed {\r\n    readonly type: typeof GET_USER_FAILED;\r\n}\r\n\r\ninterface ILogoutUser {\r\n    readonly type: typeof LOGOUT_USER;\r\n}\r\n\r\nexport type TUserActions = IGetUserRequest | IGetUserSuccess | IGetUserFailed | ILogoutUser;\r\n\r\nexport const loginUser = (email: string, password: string) => {\r\n    return function (dispatch: Dispatch<IGetUserRequest | IGetUserSuccess | IGetUserFailed | IError>) {\r\n        dispatch({\r\n            type: GET_USER_REQUEST\r\n        });\r\n        login(email, password)\r\n            .then(res => {\r\n                if (res && res.success) {\r\n                    dispatch({\r\n                        type: GET_USER_SUCCESS,\r\n                        data: res.user,\r\n                        accessToken: res.accessToken\r\n                    });\r\n                } else {\r\n                    dispatch({\r\n                        type: GET_USER_FAILED\r\n                    });\r\n                }\r\n            })\r\n            .catch(err => {\r\n                dispatch({\r\n                    type: APPEND_ERROR_MODAL_TYPE,\r\n                    message: err.message\r\n                });\r\n            });\r\n    };\r\n};\r\n\r\nexport const logoutUser = () => {\r\n    return function (dispatch: Dispatch<ILogoutUser | IError>) {\r\n        logout()\r\n            .then(res => {\r\n                if (res && res.success) {\r\n                    dispatch({\r\n                        type: LOGOUT_USER\r\n                    });\r\n                }\r\n            })\r\n            .catch(err => {\r\n                dispatch({\r\n                    type: APPEND_ERROR_MODAL_TYPE,\r\n                    message: err.message\r\n                });\r\n            });\r\n    };\r\n};\r\n\r\nexport const getUserData = () => {\r\n    return function (dispatch: Dispatch<IGetUserSuccess | IGetUserFailed | ILogoutUser>) {\r\n        getUserApiData()\r\n            .then(res => {\r\n                if (res && res.success) {\r\n                    dispatch({\r\n                        type: GET_USER_SUCCESS,\r\n                        data: res.user\r\n                    });\r\n                } else {\r\n                    dispatch({\r\n                        type: GET_USER_FAILED\r\n                    });\r\n                }\r\n            })\r\n            .catch(err => {\r\n                if (err.message === 'You should be authorised') {\r\n                    dispatch({\r\n                        type: LOGOUT_USER\r\n                    });\r\n                }\r\n            });\r\n    };\r\n};\r\n\r\nexport const patchUserData = (email: string, password: string, name: string) => {\r\n    return function (dispatch: Dispatch<IGetUserSuccess | IGetUserFailed | ILogoutUser>) {\r\n        setUserApiData(email, password, name)\r\n            .then(res => {\r\n                if (res && res.success) {\r\n                    dispatch({\r\n                        type: GET_USER_SUCCESS,\r\n                        data: res.user\r\n                    });\r\n                } else {\r\n                    dispatch({\r\n                        type: GET_USER_FAILED\r\n                    });\r\n                }\r\n            })\r\n            .catch(err => {\r\n                if (err.message === 'You should be authorised') {\r\n                    dispatch({\r\n                        type: LOGOUT_USER\r\n                    });\r\n                }\r\n            });\r\n    };\r\n};\r\n\r\nexport const registrationUser = (email: string, password: string, name: string) => {\r\n    return function (dispatch: Dispatch<IGetUserSuccess | IGetUserFailed | IError>) {\r\n        userRegister(email, password, name)\r\n            .then(res => {\r\n                if (res && res.success) {\r\n                    dispatch({\r\n                        type: GET_USER_SUCCESS,\r\n                        data: res.user,\r\n                        accessToken: res.accessToken\r\n                    });\r\n                } else {\r\n                    dispatch({\r\n                        type: GET_USER_FAILED\r\n                    });\r\n                }\r\n            })\r\n            .catch(err => {\r\n                dispatch({\r\n                    type: APPEND_ERROR_MODAL_TYPE,\r\n                    message: err.message\r\n                });\r\n            });\r\n    };\r\n};\r\n","import { getIngredients } from '../../utils/api';\r\nimport { APPEND_ERROR_MODAL_TYPE } from './Modal';\r\nimport { IError, IngredientType } from '../../utils/types';\r\nimport { Dispatch } from 'react';\r\n\r\nexport const GET_INGREDIENTS_REQUEST: 'GET_INGREDIENTS_REQUEST' = 'GET_INGREDIENTS_REQUEST';\r\nexport const GET_INGREDIENTS_SUCCESS: 'GET_INGREDIENTS_SUCCESS' = 'GET_INGREDIENTS_SUCCESS';\r\nexport const GET_INGREDIENTS_FAILED: 'GET_INGREDIENTS_FAILED' = 'GET_INGREDIENTS_FAILED';\r\n\r\ninterface IGetIngredientsRequest {\r\n    readonly type: typeof GET_INGREDIENTS_REQUEST;\r\n}\r\n\r\ninterface IGetIngredientsSuccess {\r\n    readonly type: typeof GET_INGREDIENTS_SUCCESS;\r\n    items: IngredientType[];\r\n}\r\n\r\ninterface IGetIngredientsFailed {\r\n    readonly type: typeof GET_INGREDIENTS_FAILED;\r\n}\r\n\r\nexport type TIngredientsActions = IGetIngredientsRequest | IGetIngredientsSuccess | IGetIngredientsFailed;\r\n\r\nexport const getIngredientsData = () => {\r\n    return function (dispatch: Dispatch<TIngredientsActions | IError>) {\r\n        dispatch({\r\n            type: GET_INGREDIENTS_REQUEST\r\n        });\r\n        getIngredients()\r\n            .then(res => {\r\n                if (res && res.success) {\r\n                    dispatch({\r\n                        type: GET_INGREDIENTS_SUCCESS,\r\n                        items: res.data\r\n                    });\r\n                } else {\r\n                    dispatch({\r\n                        type: GET_INGREDIENTS_FAILED\r\n                    });\r\n                }\r\n            })\r\n            .catch(err => {\r\n                dispatch({\r\n                    type: APPEND_ERROR_MODAL_TYPE,\r\n                    message: err.message\r\n                });\r\n            });\r\n    };\r\n};\r\n","import {\r\n    GET_INGREDIENTS_REQUEST,\r\n    GET_INGREDIENTS_SUCCESS,\r\n    GET_INGREDIENTS_FAILED,\r\n    TIngredientsActions\r\n} from '../actions/Ingredients';\r\nimport { IngredientType } from '../../utils/types';\r\n\r\nexport type TIngredientsState = {\r\n    ingredientsRequest: boolean;\r\n    ingredientsFailed: boolean;\r\n    ingredients: IngredientType[];\r\n};\r\n\r\nexport const InitialIngredientsState: TIngredientsState = {\r\n    ingredientsRequest: false,\r\n    ingredientsFailed: false,\r\n    ingredients: []\r\n};\r\n\r\nexport default function ingredientsReducer(\r\n    state: TIngredientsState = InitialIngredientsState,\r\n    action: TIngredientsActions\r\n) {\r\n    switch (action.type) {\r\n        case GET_INGREDIENTS_REQUEST: {\r\n            return {\r\n                ...state,\r\n                ingredientsRequest: true,\r\n                ingredientsFailed: false\r\n            };\r\n        }\r\n        case GET_INGREDIENTS_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                ingredients: action.items,\r\n                ingredientsRequest: false\r\n            };\r\n        }\r\n        case GET_INGREDIENTS_FAILED: {\r\n            return {\r\n                ...state,\r\n                ingredientsFailed: true,\r\n                ingredientsRequest: false\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n","import { OrderedIngredient } from '../../utils/types';\r\n\r\nexport const ADD_INGREDIENT: 'ADD_INGREDIENT' = 'ADD_INGREDIENT';\r\nexport const REMOVE_INGREDIENT: 'REMOVE_INGREDIENT' = 'REMOVE_INGREDIENT';\r\nexport const MOVE_INGREDIENT: 'MOVE_INGREDIENT' = 'MOVE_INGREDIENT';\r\n\r\ninterface IAddIngredient {\r\n    readonly type: typeof ADD_INGREDIENT;\r\n    ingredient: OrderedIngredient;\r\n}\r\n\r\ninterface IRemoveIngredient {\r\n    readonly type: typeof REMOVE_INGREDIENT;\r\n    ingredient: OrderedIngredient;\r\n}\r\n\r\ninterface IMoveIngredient {\r\n    readonly type: typeof MOVE_INGREDIENT;\r\n    ingredient: OrderedIngredient;\r\n    newIndex: number;\r\n}\r\n\r\nexport type TIngredientActions = IAddIngredient | IRemoveIngredient | IMoveIngredient;","import { ADD_INGREDIENT, MOVE_INGREDIENT, REMOVE_INGREDIENT, TIngredientActions } from '../actions/Constructor';\r\nimport { EnumIngredientType, OrderedIngredient } from '../../utils/types';\r\nimport {getIngredientWithOrderHash} from \"../../utils/helpers\";\r\n\r\ntype TConstructorState = {\r\n    bun: OrderedIngredient | null;\r\n    ingredients: OrderedIngredient[];\r\n    totalPrice: number;\r\n};\r\n\r\nexport const InitialConstructorState: TConstructorState = {\r\n    bun: null,\r\n    ingredients: [],\r\n    totalPrice: 0\r\n};\r\n\r\nexport default function constructorReducer(\r\n    state: TConstructorState = InitialConstructorState,\r\n    action: TIngredientActions\r\n) {\r\n    switch (action.type) {\r\n        case ADD_INGREDIENT:\r\n            if (action.ingredient.type === EnumIngredientType.BUN) {\r\n                const totalPriceWithoutBun = state.bun ? state.totalPrice - state.bun.price * 2 : state.totalPrice;\r\n\r\n                return {\r\n                    ...state,\r\n                    bun: action.ingredient,\r\n                    totalPrice: totalPriceWithoutBun + action.ingredient.price * 2\r\n                };\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                ingredients: [\r\n                    ...state.ingredients,\r\n                    { ...getIngredientWithOrderHash(action.ingredient), orderIndex: state.ingredients.length }\r\n                ],\r\n                totalPrice: state.totalPrice + action.ingredient.price\r\n            };\r\n        case REMOVE_INGREDIENT:\r\n            if (!state.ingredients.length) {\r\n                return state;\r\n            }\r\n\r\n            return {\r\n                ...state,\r\n                ingredients: [\r\n                    ...state.ingredients.filter(ingredient => ingredient.orderId !== action.ingredient.orderId)\r\n                ],\r\n                totalPrice: state.totalPrice - action.ingredient.price\r\n            };\r\n        case MOVE_INGREDIENT:\r\n            if (state.ingredients[action.newIndex].orderId === action.ingredient?.orderId) {\r\n                return state;\r\n            }\r\n\r\n            const OrderListWithoutMovedItem = [...state.ingredients].filter(\r\n                item => item.orderId !== action.ingredient?.orderId\r\n            );\r\n\r\n            const newIngredientsOrderList = [\r\n                ...OrderListWithoutMovedItem.slice(0, action.newIndex),\r\n                getIngredientWithOrderHash(action.ingredient),\r\n                ...OrderListWithoutMovedItem.slice(action.newIndex, state.ingredients.length + 1)\r\n            ];\r\n\r\n            return {\r\n                ...state,\r\n                ingredients: newIngredientsOrderList.map((item, index) => ({ ...item, orderIndex: index }))\r\n            };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","import { IngredientType } from '../../utils/types';\r\n\r\nexport const ADD_INGREDIENT_DETAILS: 'ADD_INGREDIENT_DETAILS' = 'ADD_INGREDIENT_DETAILS';\r\nexport const REMOVE_INGREDIENT_DETAILS: 'REMOVE_INGREDIENT_DETAILS' = 'REMOVE_INGREDIENT_DETAILS';\r\n\r\ninterface IAddIngredientDetails {\r\n    readonly type: typeof ADD_INGREDIENT_DETAILS;\r\n    ingredient: IngredientType;\r\n}\r\n\r\ninterface IRemoveIngredientDetails {\r\n    readonly type: typeof REMOVE_INGREDIENT_DETAILS;\r\n}\r\n\r\nexport type TIngredientDetailsActions = IAddIngredientDetails | IRemoveIngredientDetails;","import {\r\n    ADD_INGREDIENT_DETAILS,\r\n    REMOVE_INGREDIENT_DETAILS,\r\n    TIngredientDetailsActions\r\n} from '../actions/IngredientDetails';\r\nimport { IngredientType } from '../../utils/types';\r\n\r\ntype TIngredientDetailsState = null | IngredientType;\r\n\r\nexport const InitialIngredientDetailsState: TIngredientDetailsState = null;\r\n\r\nexport default function ingredientDetailsReducer(\r\n    state = InitialIngredientDetailsState,\r\n    action: TIngredientDetailsActions\r\n) {\r\n    switch (action.type) {\r\n        case ADD_INGREDIENT_DETAILS:\r\n            return { ...action.ingredient };\r\n        case REMOVE_INGREDIENT_DETAILS:\r\n            return null;\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","import { sendOrder } from '../../utils/api';\r\nimport { APPEND_ERROR_MODAL_TYPE, APPEND_MODAL_TYPE, IAppendModalType } from './Modal';\r\nimport { EnumModalType, IError } from '../../utils/types';\r\nimport { Dispatch } from 'react';\r\n\r\nexport const SENT_ORDER_REQUEST: 'SENT_ORDER_REQUEST' = 'SENT_ORDER_REQUEST';\r\nexport const SENT_ORDER_SUCCESS: 'SENT_ORDER_SUCCESS' = 'SENT_ORDER_SUCCESS';\r\nexport const SENT_ORDER_FAILED: 'SENT_ORDER_FAILED' = 'SENT_ORDER_FAILED';\r\n\r\ninterface ISendOrderRequest {\r\n    readonly type: typeof SENT_ORDER_REQUEST;\r\n}\r\n\r\ninterface ISendOrderSuccess {\r\n    readonly type: typeof SENT_ORDER_SUCCESS;\r\n    name: string;\r\n    number: number;\r\n}\r\n\r\ninterface ISendOrderFailed {\r\n    readonly type: typeof SENT_ORDER_FAILED;\r\n}\r\n\r\nexport type TOrderActions = ISendOrderRequest | ISendOrderSuccess | ISendOrderFailed;\r\n\r\nexport const sendOrderRequest = (orderList: string[]) => {\r\n    return function (dispatch: Dispatch<TOrderActions | IAppendModalType | IError>) {\r\n        dispatch({\r\n            type: SENT_ORDER_REQUEST\r\n        });\r\n        sendOrder(orderList)\r\n            .then(res => {\r\n                if (res && res.success) {\r\n                    dispatch({\r\n                        type: SENT_ORDER_SUCCESS,\r\n                        name: res.name,\r\n                        number: res.order.number\r\n                    });\r\n                    dispatch({ type: APPEND_MODAL_TYPE, modalType: EnumModalType.ORDER });\r\n                } else {\r\n                    dispatch({\r\n                        type: SENT_ORDER_FAILED\r\n                    });\r\n                }\r\n            })\r\n            .catch(err => {\r\n                dispatch({\r\n                    type: APPEND_ERROR_MODAL_TYPE,\r\n                    message: err.message\r\n                });\r\n            });\r\n    };\r\n};\r\n","import { SENT_ORDER_FAILED, SENT_ORDER_REQUEST, SENT_ORDER_SUCCESS, TOrderActions } from '../actions/Order';\r\n\r\ntype TOrderState = {\r\n    orderRequest: boolean;\r\n    orderFailed: boolean;\r\n    orderData: {\r\n        name: string | null;\r\n        number: number | null;\r\n    };\r\n};\r\n\r\nexport const InitialOrderState: TOrderState = {\r\n    orderRequest: false,\r\n    orderFailed: false,\r\n    orderData: {\r\n        name: null,\r\n        number: null\r\n    }\r\n};\r\n\r\nexport default function orderReducer(state: TOrderState = InitialOrderState, action: TOrderActions) {\r\n    switch (action.type) {\r\n        case SENT_ORDER_REQUEST: {\r\n            return {\r\n                ...state,\r\n                orderRequest: true,\r\n                orderFailed: false,\r\n                orderData: { name: null, number: null }\r\n            };\r\n        }\r\n        case SENT_ORDER_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                orderRequest: false,\r\n                orderData: { name: action.name, number: action.number }\r\n            };\r\n        }\r\n        case SENT_ORDER_FAILED: {\r\n            return {\r\n                ...state,\r\n                orderFailed: true,\r\n                orderRequest: false,\r\n                orderData: { name: null, number: null }\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n","import { APPEND_ERROR_MODAL_TYPE, APPEND_MODAL_TYPE, REMOVE_MODAL_TYPE, TModalActions } from '../actions/Modal';\r\nimport { EnumModalType } from '../../utils/types';\r\n\r\ntype TModalState = {\r\n    modalType: EnumModalType | null;\r\n    status?: string | null;\r\n    message: string | null;\r\n};\r\n\r\nexport const InitialModalState: TModalState = {\r\n    modalType: null,\r\n    status: null,\r\n    message: null\r\n};\r\n\r\nexport default function modalReducer(state: TModalState = InitialModalState, action: TModalActions) {\r\n    switch (action.type) {\r\n        case APPEND_MODAL_TYPE: {\r\n            return {\r\n                ...state,\r\n                modalType: action.modalType\r\n            };\r\n        }\r\n        case APPEND_ERROR_MODAL_TYPE: {\r\n            return {\r\n                ...state,\r\n                modalType: EnumModalType.ERROR,\r\n                status: action?.status ? action.status : state.status,\r\n                message: action?.message ? action.message : state.message\r\n            };\r\n        }\r\n        case REMOVE_MODAL_TYPE: {\r\n            return {\r\n                ...state,\r\n                modalType: null,\r\n                status: null\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n","import { deleteCookie } from '../../utils/helpers';\r\nimport { GET_USER_FAILED, GET_USER_REQUEST, GET_USER_SUCCESS, LOGOUT_USER, TUserActions } from '../actions/User';\r\n\r\ntype TUserState = {\r\n    data: any;\r\n    accessToken: string | null;\r\n    userRequest: boolean;\r\n    userFailed: boolean;\r\n};\r\n\r\nexport const InitialUserState: TUserState = {\r\n    data: null,\r\n    accessToken: null,\r\n    userRequest: false,\r\n    userFailed: false\r\n};\r\n\r\nexport default function userReducer(state: TUserState = InitialUserState, action: TUserActions) {\r\n    switch (action.type) {\r\n        case GET_USER_REQUEST: {\r\n            return {\r\n                ...state,\r\n                userRequest: true,\r\n                userFailed: false\r\n            };\r\n        }\r\n        case GET_USER_SUCCESS: {\r\n            const newState = {\r\n                ...state,\r\n                data: action.data,\r\n                userRequest: false,\r\n                accessToken: state.accessToken\r\n            };\r\n\r\n            if (action.accessToken) {\r\n                newState.accessToken = action.accessToken;\r\n            }\r\n\r\n            return newState;\r\n        }\r\n        case GET_USER_FAILED: {\r\n            return {\r\n                ...state,\r\n                userFailed: true,\r\n                userRequest: false\r\n            };\r\n        }\r\n        case LOGOUT_USER: {\r\n            deleteCookie('refreshToken');\r\n            deleteCookie('accessToken');\r\n            return { ...state, data: null, accessToken: null };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n","export const WS_CONNECTION_START: \"WS_CONNECTION_START\" = \"WS_CONNECTION_START\";\r\nexport const WS_CONNECTION_SUCCESS: \"WS_CONNECTION_SUCCESS\" = \"WS_CONNECTION_SUCCESS\";\r\nexport const WS_CONNECTION_ERROR: \"WS_CONNECTION_ERROR\" = \"WS_CONNECTION_ERROR\";\r\nexport const WS_GET_MESSAGE: \"WS_GET_MESSAGE\" = \"WS_GET_MESSAGE\";\r\nexport const WS_SEND_MESSAGE: \"WS_SEND_MESSAGE\" = \"WS_SEND_MESSAGE\";\r\nexport const WS_CLOSE_CONNECTION: \"WS_CLOSE_CONNECTION\" = \"WS_CLOSE_CONNECTION\";\r\n\r\n//todo: типизировать payload когда будет понятно\r\n\r\ninterface IWSConnectionStart {\r\n    readonly type: typeof WS_CONNECTION_START;\r\n    payload?: any;\r\n}\r\ninterface IWSConnectionSuccess {\r\n    readonly type: typeof WS_CONNECTION_SUCCESS;\r\n    payload?: any;\r\n}\r\ninterface IWSConnectionError {\r\n    readonly type: typeof WS_CONNECTION_ERROR;\r\n    payload?: any;\r\n}\r\ninterface IWSGetMessage {\r\n    readonly type: typeof WS_GET_MESSAGE;\r\n    payload?: any;\r\n}\r\ninterface IWSSendMessage {\r\n    readonly type: typeof WS_SEND_MESSAGE;\r\n    payload?: any;\r\n}\r\ninterface IWSCloseConnection {\r\n    readonly type: typeof WS_CLOSE_CONNECTION;\r\n    payload?: any;\r\n}\r\n\r\nexport type TWSActions =\r\n    | IWSConnectionStart\r\n    | IWSConnectionSuccess\r\n    | IWSConnectionError\r\n    | IWSGetMessage\r\n    | IWSSendMessage\r\n    | IWSCloseConnection;","import {\r\n    TWSActions,\r\n    WS_CONNECTION_ERROR,\r\n    WS_CONNECTION_START,\r\n    WS_CONNECTION_SUCCESS,\r\n    WS_GET_MESSAGE\r\n} from '../actions/WebSocket';\r\nimport { OrderType } from '../../utils/types';\r\n\r\ntype TOrderListState = {\r\n    ordersRequest: boolean;\r\n    ordersFailed: boolean;\r\n    data: OrderType[];\r\n};\r\n\r\nexport const initialState: TOrderListState = {\r\n    ordersRequest: false,\r\n    ordersFailed: false,\r\n    data: []\r\n};\r\n\r\nconst orderListReducer = (state: TOrderListState = initialState, action: TWSActions) => {\r\n    switch (action.type) {\r\n        case WS_CONNECTION_START: {\r\n            return {\r\n                ...state,\r\n                ordersRequest: true\r\n            };\r\n        }\r\n        case WS_CONNECTION_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                ordersRequest: false,\r\n                ordersFailed: false,\r\n            };\r\n        }\r\n        case WS_CONNECTION_ERROR: {\r\n            return {\r\n                ...state,\r\n                ordersFailed: true,\r\n                ordersRequest: false\r\n            };\r\n        }\r\n        case WS_GET_MESSAGE: {\r\n            return {\r\n                ...state,\r\n                ordersFailed: false,\r\n                data: action.payload as OrderType[]\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n\r\nexport default orderListReducer;","import { applyMiddleware, combineReducers, compose, createStore } from 'redux';\r\n\r\nimport ingredients, { InitialIngredientsState } from './Ingredients';\r\nimport constructor, { InitialConstructorState } from './Constructor';\r\nimport ingredientDetails, { InitialIngredientDetailsState } from './IngredientDetails';\r\nimport order, { InitialOrderState } from './Order';\r\nimport modal, { InitialModalState } from './Modal';\r\nimport user, { InitialUserState } from './User';\r\nimport orderList from './OrderList';\r\nimport thunk from 'redux-thunk';\r\nimport { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\r\nimport { socketMiddleware } from '../middleware/socket';\r\n\r\nexport const rootReducer = combineReducers({\r\n    ingredients,\r\n    constructor,\r\n    ingredientDetails,\r\n    order,\r\n    modal,\r\n    user,\r\n    orderList\r\n});\r\n\r\ndeclare global {\r\n    interface Window {\r\n        __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n    }\r\n}\r\n\r\nexport const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(thunk), applyMiddleware(socketMiddleware()));\r\n\r\ntype TInitialState = {\r\n    ingredients?: typeof InitialIngredientsState;\r\n    constructor: typeof InitialConstructorState;\r\n    ingredientDetails: typeof InitialIngredientDetailsState;\r\n    order: typeof InitialOrderState;\r\n    modal: typeof InitialModalState;\r\n    user: typeof InitialUserState;\r\n};\r\n\r\nconst initialState: TInitialState = {\r\n    ingredients: InitialIngredientsState,\r\n    constructor: InitialConstructorState,\r\n    ingredientDetails: InitialIngredientDetailsState,\r\n    order: InitialOrderState,\r\n    modal: InitialModalState,\r\n    user: InitialUserState\r\n};\r\n\r\nexport const store = createStore(rootReducer, initialState, enhancer);\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;\r\n\r\nexport const useAppDispatch: () => AppDispatch = useDispatch;\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;","import type { Middleware, MiddlewareAPI } from 'redux';\r\nimport {\r\n    TWSActions,\r\n    WS_CLOSE_CONNECTION,\r\n    WS_CONNECTION_ERROR,\r\n    WS_CONNECTION_START,\r\n    WS_CONNECTION_SUCCESS,\r\n    WS_GET_MESSAGE,\r\n    WS_SEND_MESSAGE\r\n} from '../actions/WebSocket';\r\nimport { AppDispatch, RootState } from '../reducers/Root';\r\n\r\nexport const socketMiddleware = (): Middleware => {\r\n    return ((store: MiddlewareAPI<AppDispatch, RootState>) => {\r\n        let socket: WebSocket | null = null;\r\n\r\n        return next => (action: TWSActions) => {\r\n            const { dispatch } = store;\r\n            const { type, payload } = action;\r\n\r\n            if (type === WS_CONNECTION_START) {\r\n                socket = new WebSocket(payload.url);\r\n            }\r\n\r\n            if (type === WS_CLOSE_CONNECTION) {\r\n                socket?.close();\r\n            }\r\n\r\n            if (socket) {\r\n                socket.onopen = event => {\r\n                    dispatch({ type: WS_CONNECTION_SUCCESS, payload: event });\r\n                };\r\n\r\n                socket.onerror = event => {\r\n                    dispatch({ type: WS_CONNECTION_ERROR, payload: event });\r\n                };\r\n\r\n                socket.onmessage = event => {\r\n                    const { data } = event;\r\n                    const dataObject = JSON.parse(data);\r\n                    dispatch({ type: WS_GET_MESSAGE, payload: dataObject?.orders });\r\n                };\r\n\r\n                socket.onclose = event => {\r\n                    console.log('WS closed');\r\n                };\r\n\r\n                if (type === WS_SEND_MESSAGE) {\r\n                    socket.send(JSON.stringify(payload));\r\n                }\r\n            }\r\n\r\n            next(action);\r\n        };\r\n    }) as Middleware;\r\n};","import React, { FC, MouseEventHandler } from 'react';\r\n\r\nimport styles from './ModalOverlay.module.css';\r\n\r\nconst ModalOverlay: FC<{ onClose: MouseEventHandler<HTMLDivElement> }> = ({ onClose, children }) => {\r\n    return (\r\n        <div className={styles.wrapper} onClick={onClose}>\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ModalOverlay;\r\n","import ReactDOM from 'react-dom';\r\nimport { FC, MouseEvent, useEffect } from 'react';\r\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nimport styles from './Modal.module.css';\r\nimport ModalOverlay from './ModalOverlay/ModalOverlay';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst modalRoot: any = document.getElementById('modal');\r\n\r\ntype ModalProps = {\r\n    title?: string;\r\n    onClose?: any;\r\n};\r\n\r\nconst Modal: FC<ModalProps> = ({ title, onClose, children }) => {\r\n    const history = useHistory();\r\n    const defaultCloseHandler = () => {\r\n        history.goBack();\r\n    };\r\n\r\n    useEffect(() => {\r\n        const handleEscape = (e: KeyboardEvent) => {\r\n            if (e.key === 'Escape') {\r\n                onClose(e);\r\n            }\r\n        };\r\n\r\n        window.addEventListener('keydown', handleEscape);\r\n        return () => window.removeEventListener('keydown', handleEscape);\r\n    }, [onClose]);\r\n\r\n    const stopPropagation = (e: MouseEvent<HTMLDivElement>) => {\r\n        e.stopPropagation();\r\n    };\r\n\r\n    return ReactDOM.createPortal(\r\n        <ModalOverlay onClose={onClose}>\r\n            <div className={`pt-10 pl-10 pr-10 ${styles.wrapper}`} onClick={stopPropagation}>\r\n                <div className={styles.header}>\r\n                    <h3 className={`text text_type_main-large ${styles.title}`}>{title}</h3>\r\n                    <button onClick={onClose ?? defaultCloseHandler} className={`pt-5 ${styles.button}`} id=\"close_modal\">\r\n                        <CloseIcon type=\"primary\" />\r\n                    </button>\r\n                </div>\r\n                {children}\r\n            </div>\r\n        </ModalOverlay>,\r\n        modalRoot\r\n    );\r\n};\r\n\r\nexport default Modal;\r\n","import { IngredientType } from './types';\r\n\r\nexport const getIngredientsGroups = (ingredients: IngredientType[]) => {\r\n    return ingredients.reduce(\r\n        (previousValue, currentValue) => {\r\n            return { ...previousValue, [currentValue.type]: [...previousValue[currentValue.type], currentValue] };\r\n        },\r\n        { bun: [], main: [], sauce: [] }\r\n    );\r\n};\r\n\r\nexport const getOrderIngredientsIDs = (orderIngredients: IngredientType[]): string[] => {\r\n    const result:string[] = [];\r\n    orderIngredients.forEach(item => {\r\n        if (item.type === 'bun') {\r\n            result.push(item._id);\r\n        }\r\n        result.push(item._id);\r\n    });\r\n\r\n    return result;\r\n};\r\n","import React, { FC } from 'react';\r\nimport classNames from 'classnames';\r\nimport { useDrag } from 'react-dnd';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport { Counter, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nimport styles from './IngredientItem.module.css';\r\nimport { IngredientType, LocationProps } from '../../../utils/types';\r\nimport { getOrderIngredientsIDs } from '../../../utils/getIngredientsGroups';\r\nimport { ADD_INGREDIENT_DETAILS } from '../../../services/actions/IngredientDetails';\r\nimport { useAppDispatch, useAppSelector } from '../../../services/reducers/Root';\r\n\r\nconst IngredientItem: FC<{ ingredient: IngredientType }> = ({ ingredient }) => {\r\n    const location = useLocation() as unknown as LocationProps;\r\n    const dispatch = useAppDispatch();\r\n    const ingredientId = ingredient._id;\r\n\r\n    const { ingredients, bun } = useAppSelector(state => state.constructor);\r\n    const showIngredientDetails = () => {\r\n        dispatch({ type: ADD_INGREDIENT_DETAILS, ingredient: ingredient });\r\n    };\r\n    const getCount = (ingredient: IngredientType, orderIngredientList: IngredientType[] = []) => {\r\n        if (ingredient.type === 'bun') {\r\n            return ingredient._id === bun?._id ? 2 : null;\r\n        }\r\n        return orderIngredientList.length\r\n            ? getOrderIngredientsIDs(orderIngredientList).filter(id => id === ingredient._id).length\r\n            : 0;\r\n    };\r\n    const count = getCount(ingredient, ingredients);\r\n    const [, dragRef] = useDrag({\r\n        type: 'ingredient',\r\n        item: ingredient,\r\n        collect: monitor => ({\r\n            isDrag: monitor.isDragging()\r\n        })\r\n    });\r\n\r\n    return (\r\n        <Link\r\n            ref={dragRef}\r\n            key={ingredientId}\r\n            to={{\r\n                pathname: `/ingredients/${ingredientId}`,\r\n                state: { background: location }\r\n            }}\r\n            onClick={() => showIngredientDetails()}\r\n            className={classNames(styles.wrapper, 'mb-4')}\r\n        >\r\n            {!!count && <Counter count={count} size=\"default\" />}\r\n            <img className={'ml-4 mr-4 mb-1'} src={ingredient.image} alt={`Компонент: ${ingredient.name}`} />\r\n            <div className={classNames(styles.priceBlock, 'pt-1 pb-1')}>\r\n                <span className=\"text text_type_digits-default mr-2\">{ingredient.price}</span>\r\n                <CurrencyIcon type=\"primary\" />\r\n            </div>\r\n            <span className=\"text text_type_main-default pt-1\">{ingredient.name}</span>\r\n        </Link>\r\n    );\r\n};\r\n\r\nexport default IngredientItem;\r\n","import React, { FC } from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport styles from './IngredientsBlock.module.css';\r\nimport IngredientItem from '../IngredientItem/IngredientItem';\r\nimport { IngredientType } from '../../../utils/types';\r\n\r\ntype IngredientsBlockProps = {\r\n    title: string;\r\n    ingredients: IngredientType[];\r\n};\r\n\r\nconst IngredientsBlock: FC<IngredientsBlockProps> = ({ title, ingredients }) => {\r\n    return (\r\n        <>\r\n            <p className=\"text text_type_main-medium\">{title}</p>\r\n            <div className={classNames(styles.ingredientsBlock, 'pt-6 pr-2 pb-7 pl-2')}>\r\n                {ingredients.map(ingredient => (\r\n                    <IngredientItem key={ingredient._id} ingredient={ingredient} />\r\n                ))}\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default IngredientsBlock;\r\n","import React, { FC } from 'react';\r\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './IngredientsTabs.module.css';\r\nimport { EnumIngredientType } from '../../../utils/types';\r\n\r\ntype IngredientsTabsProps = {\r\n    current: EnumIngredientType;\r\n    changeCurrentZone: any;\r\n};\r\n\r\nexport const IngredientsTabs: FC<IngredientsTabsProps> = ({ current, changeCurrentZone }) => {\r\n    return (\r\n        <div className={styles.wrapper}>\r\n            <Tab value={EnumIngredientType.BUN} active={current === EnumIngredientType.BUN} onClick={changeCurrentZone}>\r\n                Булки\r\n            </Tab>\r\n            <Tab\r\n                value={EnumIngredientType.SAUCE}\r\n                active={current === EnumIngredientType.SAUCE}\r\n                onClick={changeCurrentZone}\r\n            >\r\n                Соусы\r\n            </Tab>\r\n            <Tab\r\n                value={EnumIngredientType.MAIN}\r\n                active={current === EnumIngredientType.MAIN}\r\n                onClick={changeCurrentZone}\r\n            >\r\n                Начинки\r\n            </Tab>\r\n        </div>\r\n    );\r\n};\r\n","import React, { FC, useRef, useState, UIEvent } from 'react';\r\n\r\nimport styles from './BurgerIngredients.module.css';\r\nimport IngredientsBlock from './IngredientsBlock/IngredientsBlock';\r\nimport { IngredientsTabs } from './IngredientsTabs';\r\nimport { getIngredientsGroups } from '../../utils/getIngredientsGroups';\r\nimport { EnumIngredientType, IngredientType } from '../../utils/types';\r\nimport { useAppSelector } from '../../services/reducers/Root';\r\n\r\nconst BurgerIngredients: FC<{ ingredients: IngredientType[] }> = ({ ingredients }) => {\r\n    const [currentZone, setCurrentZone] = useState<EnumIngredientType>(EnumIngredientType.BUN);\r\n    const bunRef = useRef<HTMLInputElement>(null);\r\n    const sauceRef = useRef<HTMLInputElement>(null);\r\n    const mainRef = useRef<HTMLInputElement>(null);\r\n\r\n    const ingredientsByTypeList = getIngredientsGroups(ingredients);\r\n\r\n    const handleScroll = (e: UIEvent<HTMLDivElement>) => {\r\n        e.stopPropagation();\r\n        const currentPosition = e.currentTarget.scrollTop + e.currentTarget.offsetTop;\r\n        const bufZone =\r\n            sauceRef.current && bunRef.current\r\n                ? (sauceRef.current.offsetTop - bunRef.current.offsetTop) / 2 + bunRef.current.offsetTop\r\n                : 0;\r\n        const mainZone =\r\n            mainRef.current && sauceRef.current\r\n                ? (mainRef.current.offsetTop - sauceRef.current.offsetTop) / 2 + sauceRef.current.offsetTop\r\n                : 0;\r\n\r\n        if (currentPosition <= bufZone) {\r\n            setCurrentZone(EnumIngredientType.BUN);\r\n        } else if (currentPosition >= mainZone) {\r\n            setCurrentZone(EnumIngredientType.MAIN);\r\n        } else {\r\n            setCurrentZone(EnumIngredientType.SAUCE);\r\n        }\r\n    };\r\n\r\n    const changeCurrentZone = (zone: EnumIngredientType) => {\r\n        switch (zone) {\r\n            case EnumIngredientType.BUN:\r\n                bunRef.current?.scrollIntoView();\r\n                return;\r\n            case EnumIngredientType.MAIN:\r\n                mainRef.current?.scrollIntoView();\r\n                return;\r\n            case EnumIngredientType.SAUCE:\r\n                sauceRef.current?.scrollIntoView();\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={styles.wrapper}>\r\n            <div className={'pt-10 pb-5'}>\r\n                <p className=\"text text_type_main-large\">Соберите бургер</p>\r\n            </div>\r\n            <div className={'pb-10'}>\r\n                <IngredientsTabs current={currentZone} changeCurrentZone={changeCurrentZone} />\r\n            </div>\r\n            <div className={styles.ingredientsBlock} onScroll={handleScroll}>\r\n                <>\r\n                    <div ref={bunRef}>\r\n                        <IngredientsBlock title={'Булки'} ingredients={ingredientsByTypeList.bun} />\r\n                    </div>\r\n                    <div ref={sauceRef}>\r\n                        <IngredientsBlock title={'Соусы'} ingredients={ingredientsByTypeList.sauce} />\r\n                    </div>\r\n                    <div ref={mainRef}>\r\n                        <IngredientsBlock title={'Начинки'} ingredients={ingredientsByTypeList.main} />\r\n                    </div>\r\n                </>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst BurgerIngredientsContainer = () => {\r\n    const { ingredients, ingredientsRequest } = useAppSelector(state => state.ingredients);\r\n\r\n    if (ingredientsRequest && !ingredients.length) {\r\n        return null;\r\n    }\r\n\r\n    return <BurgerIngredients ingredients={ingredients} />;\r\n};\r\n\r\nexport default BurgerIngredientsContainer;\r\n","import React, { FC, useRef } from 'react';\r\nimport classNames from 'classnames';\r\nimport { useDrag, useDrop } from 'react-dnd';\r\nimport { ConstructorElement, DragIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nimport styles from './ConstructorIngredient.module.css';\r\nimport { MOVE_INGREDIENT, REMOVE_INGREDIENT } from '../../../services/actions/Constructor';\r\nimport { OrderedIngredient } from '../../../utils/types';\r\nimport { useAppDispatch } from '../../../services/reducers/Root';\r\n\r\nexport const ConstructorIngredient: FC<{ ingredient: OrderedIngredient }> = ({ ingredient }) => {\r\n    const dispatch = useAppDispatch();\r\n    const ref = useRef(null);\r\n    const onDeleteIngredient = (ingredient: OrderedIngredient) => {\r\n        dispatch({\r\n            type: REMOVE_INGREDIENT,\r\n            ingredient: ingredient\r\n        });\r\n    };\r\n\r\n    const moveCard = (ingredient: OrderedIngredient, oldIndex: number, newIndex: number) => {\r\n        dispatch({\r\n            type: MOVE_INGREDIENT,\r\n            ingredient,\r\n            oldIndex,\r\n            newIndex\r\n        });\r\n    };\r\n\r\n    const [, drop] = useDrop({\r\n        accept: 'movedIngredient',\r\n        hover(item: OrderedIngredient, monitor) {\r\n            if (!ref.current) {\r\n                return;\r\n            }\r\n            const dragIndex = item.orderIndex;\r\n            const hoverIndex = ingredient.orderIndex;\r\n\r\n            // Determine rectangle on screen\r\n            // @ts-ignore\r\n            const hoverBoundingRect = ref.current?.getBoundingClientRect();\r\n            // Get vertical middle\r\n            const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n            // Determine mouse position\r\n            const clientOffset = monitor.getClientOffset();\r\n            // Get pixels to the top\r\n            // @ts-ignore\r\n            const hoverClientY = clientOffset.y - hoverBoundingRect.top;\r\n            if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n                return;\r\n            }\r\n            // Dragging upwards\r\n            if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n                return;\r\n            }\r\n            // Time to actually perform the action\r\n            moveCard(item, dragIndex, hoverIndex);\r\n            // Note: we're mutating the monitor item here!\r\n            // Generally it's better to avoid mutations,\r\n            // but it's good here for the sake of performance\r\n            // to avoid expensive index searches.\r\n            item.index = hoverIndex;\r\n        }\r\n    });\r\n\r\n    const [, drag] = useDrag({\r\n        type: 'movedIngredient',\r\n        item: () => {\r\n            return ingredient;\r\n        },\r\n        collect: monitor => ({\r\n            isDrag: monitor.isDragging()\r\n        })\r\n    });\r\n\r\n    drag(drop(ref));\r\n\r\n    return (\r\n        <div ref={ref} className={classNames(styles.ingredient, 'mr-2')}>\r\n            <div>\r\n                <DragIcon type=\"primary\" />\r\n            </div>\r\n            <ConstructorElement\r\n                text={ingredient.name}\r\n                price={ingredient.price}\r\n                thumbnail={ingredient.image}\r\n                handleClose={() => onDeleteIngredient(ingredient)}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n","import React, { FC } from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport { RouteProps } from 'react-router';\r\nimport { useAppSelector } from '../../services/reducers/Root';\r\n\r\nconst ProtectedRoute: FC<RouteProps & { children?: React.ReactNode }> = ({ children, ...rest }) => {\r\n    const user = useAppSelector(state => state.user);\r\n    const isAuth = !!user.data;\r\n\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={({ location }) =>\r\n                isAuth ? (\r\n                    children\r\n                ) : (\r\n                    <Redirect\r\n                        to={{\r\n                            pathname: '/login',\r\n                            state: { from: location }\r\n                        }}\r\n                    />\r\n                )\r\n            }\r\n        />\r\n    );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React, { useState } from 'react';\r\nimport { useDrop } from 'react-dnd';\r\nimport classNames from 'classnames';\r\nimport { Button, ConstructorElement, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nimport styles from './BurgerConstructor.module.css';\r\nimport { ADD_INGREDIENT } from '../../services/actions/Constructor';\r\nimport { sendOrderRequest } from '../../services/actions/Order';\r\nimport { getOrderIngredientsIDs } from '../../utils/getIngredientsGroups';\r\nimport { ConstructorIngredient } from './ConstructotIngredient/ConstructotIngredient';\r\nimport { APPEND_ERROR_MODAL_TYPE } from '../../services/actions/Modal';\r\nimport ProtectedRoute from '../ProtectedRoute/ProtectedRoute';\r\nimport { OrderedIngredient } from '../../utils/types';\r\nimport { useAppDispatch, useAppSelector } from '../../services/reducers/Root';\r\n\r\nconst BurgerConstructor = () => {\r\n    const user = useAppSelector(state => state.user);\r\n    const { bun, ingredients, totalPrice } = useAppSelector(state => state.constructor);\r\n    const dispatch = useAppDispatch();\r\n    const [redirectToAuth, setRedirectToAuth] = useState(false);\r\n    const isAuth = !!user.data;\r\n    const hasBun = !!bun;\r\n    const hasIngredients = !!ingredients.length;\r\n    const canOrder = hasBun && hasIngredients;\r\n\r\n    const onSendOrderRequest = () => {\r\n        if (!isAuth) {\r\n            dispatch({\r\n                type: APPEND_ERROR_MODAL_TYPE,\r\n                message: 'Оформить заказ может только авторизированный пользователь'\r\n            });\r\n            setRedirectToAuth(true);\r\n        } else {\r\n            // @ts-ignore\r\n            canOrder && dispatch(sendOrderRequest(getOrderIngredientsIDs([bun, ...ingredients])));\r\n        }\r\n    };\r\n\r\n    const onDropHandler = (ingredient: OrderedIngredient) => {\r\n        dispatch({ type: ADD_INGREDIENT, ingredient: ingredient });\r\n    };\r\n\r\n    const [, dropTarget] = useDrop({\r\n        accept: 'ingredient',\r\n        drop(ingredient: OrderedIngredient) {\r\n            onDropHandler(ingredient);\r\n        }\r\n    });\r\n\r\n    if (redirectToAuth) {\r\n        return <ProtectedRoute />;\r\n    }\r\n\r\n    return (\r\n        <section className={styles.wrapper} data-ft-id={'constructor'} ref={dropTarget}>\r\n            <section className={classNames(styles.ingredientsBlock, 'pt-25')}>\r\n                {!canOrder && (\r\n                    <p className=\"text text_type_main-small mb-10 mt-5 \">\r\n                        {`Пожалуйста, перенесите сюда \r\n                            ${!hasIngredients ? 'ингредиенты' : ''}\r\n                            ${!hasIngredients ? (!hasBun ? ' и' : '') : ''}\r\n                            ${!hasBun ? ' булку' : ''} для создания заказа`}\r\n                    </p>\r\n                )}\r\n                {!!totalPrice && (\r\n                    <>\r\n                        <div className={'mr-4'}>\r\n                            {hasBun && (\r\n                                <ConstructorElement\r\n                                    type={'top'}\r\n                                    isLocked={true}\r\n                                    text={`${bun.name} (верх)`}\r\n                                    price={bun.price}\r\n                                    thumbnail={bun.image}\r\n                                />\r\n                            )}\r\n                        </div>\r\n                        <div className={styles.selectedBlock}>\r\n                            {!!ingredients.length &&\r\n                                ingredients\r\n                                    .sort((a: OrderedIngredient, b: OrderedIngredient) => a?.orderIndex - b?.orderIndex)\r\n                                    .map((ingredient: OrderedIngredient, index: number) => (\r\n                                        <ConstructorIngredient key={index} ingredient={ingredient} />\r\n                                    ))}\r\n                        </div>\r\n                        <div className={'mr-4'}>\r\n                            {hasBun && (\r\n                                <ConstructorElement\r\n                                    type={'bottom'}\r\n                                    isLocked={true}\r\n                                    text={`${bun.name} (низ)`}\r\n                                    price={bun.price}\r\n                                    thumbnail={bun.image}\r\n                                />\r\n                            )}\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </section>\r\n            <section className={classNames(styles.priceBlock, 'mt-10 mr-4 mb-10')}>\r\n                <div className={'mr-10'}>\r\n                    <span className=\"text text_type_digits-medium mr-2\">{totalPrice}</span>\r\n                    <CurrencyIcon type=\"primary\" />\r\n                </div>\r\n                <Button\r\n                    onClick={onSendOrderRequest}\r\n                    type={'primary'}\r\n                    disabled={!canOrder}\r\n                    size=\"large\"\r\n                    htmlType=\"button\"\r\n                >\r\n                    Оформить заказ\r\n                </Button>\r\n            </section>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default BurgerConstructor;\r\n","import React, { FC } from 'react';\r\nimport { DndProvider } from 'react-dnd';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\n\r\nimport styles from './ConstructorPage.module.css';\r\n\r\nimport BurgerIngredients from '../../components/BurgerIngredients/BurgerIngredients';\r\nimport BurgerConstructor from '../../components/BurgerConstructor/BurgerConstructor';\r\n\r\nconst ConstructorPage: FC = () => {\r\n    return (\r\n        <main className={styles.content}>\r\n            <DndProvider backend={HTML5Backend}>\r\n                <>\r\n                    <BurgerIngredients />\r\n                    <BurgerConstructor />\r\n                </>\r\n            </DndProvider>\r\n        </main>\r\n    );\r\n};\r\n\r\nexport default ConstructorPage;\r\n","import React, { FC } from 'react';\r\nimport classnames from 'classnames';\r\nimport { Link, LinkProps } from 'react-router-dom';\r\n\r\nimport styles from './AdditionalLink.module.css';\r\n\r\ntype AdditionalLinkProps = {\r\n    className: string;\r\n    label: string;\r\n    lintText: string;\r\n};\r\n\r\nconst AdditionalLink: FC<AdditionalLinkProps & Pick<LinkProps, 'to' | 'replace'>> = ({\r\n    className,\r\n    label,\r\n    lintText,\r\n    to,\r\n    replace\r\n}) => {\r\n    return (\r\n        <section className={className}>\r\n            <span className={classnames(styles.linkLabel, 'text text_type_main-default mr-2')}>{label}</span>{' '}\r\n            <Link className={classnames(styles.link, 'text  text_type_main-default')} to={to} replace={replace}>\r\n                {lintText}\r\n            </Link>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default AdditionalLink;\r\n","import {ChangeEvent, useState} from 'react';\r\n\r\nexport function useForm(inputValues: any) {\r\n    const [values, setValues] = useState(inputValues);\r\n\r\n    const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        const { value, name } = e.target;\r\n        setValues({ ...values, [name]: value });\r\n    };\r\n    return { values, handleChange, setValues };\r\n}","import React, { FC } from 'react';\r\nimport styles from './SinglePageWrapper.module.css';\r\n\r\nconst SinglePageWrapper: FC = ({ children }) => <div className={styles.wrapper}>{children}</div>;\r\n\r\nexport default SinglePageWrapper;\r\n","import React, { FC } from 'react';\r\nimport { Redirect, useLocation } from 'react-router-dom';\r\nimport { Button, EmailInput, PasswordInput } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nimport AdditionalLink from '../../components/AdditionalLink/AdditionalLink';\r\nimport { loginUser } from '../../services/actions/User';\r\nimport { useForm } from '../../hooks/useForm';\r\nimport { LocationProps } from '../../utils/types';\r\nimport SinglePageWrapper from '../SinglePageWrapper';\r\nimport { useAppDispatch, useAppSelector } from '../../services/reducers/Root';\r\n\r\ninterface LoginFormData {\r\n    password: { value: string };\r\n    email: { value: string };\r\n}\r\n\r\nconst LoginPage: FC<{ isAuth: boolean }> = ({ isAuth }) => {\r\n    const dispatch = useAppDispatch();\r\n    const location = useLocation() as unknown as LocationProps;\r\n    const locationState = location.state;\r\n\r\n    const { values, handleChange, setValues } = useForm({\r\n        email: '',\r\n        password: ''\r\n    });\r\n\r\n    const enterHandler = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setValues({\r\n            ...values\r\n        });\r\n\r\n        const { password, email } = e.target as typeof e.target & LoginFormData;\r\n        // @ts-ignore\r\n        await dispatch(loginUser(email.value, password.value));\r\n    };\r\n\r\n    if (isAuth) {\r\n        return <Redirect to={locationState?.from || '/'} />;\r\n    } else {\r\n        return (\r\n            <SinglePageWrapper>\r\n                <p className=\"text text_type_main-medium\">Вход</p>\r\n                <form onSubmit={enterHandler}>\r\n                    <section className=\"mt-6\">\r\n                        <EmailInput onChange={handleChange} value={values.email} name={'email'} autoComplete=\"on\" />\r\n                    </section>\r\n                    <section className=\"mt-6\">\r\n                        <PasswordInput\r\n                            onChange={handleChange}\r\n                            value={values.password}\r\n                            name={'password'}\r\n                            autoComplete=\"on\"\r\n                        />\r\n                    </section>\r\n                    <section className=\"mt-6\">\r\n                        <Button type=\"primary\" size=\"large\" htmlType=\"submit\">\r\n                            Войти\r\n                        </Button>\r\n                    </section>\r\n                    <AdditionalLink\r\n                        className={'mt-20'}\r\n                        label=\"Вы — новый пользователь?\"\r\n                        to=\"/register\"\r\n                        lintText=\"Зарегистрироваться\"\r\n                        replace\r\n                    />\r\n                    <AdditionalLink\r\n                        className={'mt-4'}\r\n                        label=\"Забыли пароль?\"\r\n                        to=\"/forgot-password\"\r\n                        lintText=\"Восстановить пароль\"\r\n                        replace\r\n                    />\r\n                </form>\r\n            </SinglePageWrapper>\r\n        );\r\n    }\r\n};\r\n\r\nconst LoginPageContainer = () => {\r\n    const user = useAppSelector(state => state.user);\r\n    return user ? <LoginPage isAuth={!!user.data} /> : null;\r\n};\r\n\r\nexport default LoginPageContainer;\r\n","import React, { FC } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { Button, EmailInput, Input, PasswordInput } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nimport { useForm } from '../../hooks/useForm';\r\nimport { registrationUser } from '../../services/actions/User';\r\nimport SinglePageWrapper from '../SinglePageWrapper';\r\nimport AdditionalLink from '../../components/AdditionalLink/AdditionalLink';\r\nimport { useAppDispatch, useAppSelector } from '../../services/reducers/Root';\r\n\r\ninterface RegistrationFormData {\r\n    email: { value: string };\r\n    password: { value: string };\r\n    name: { value: string };\r\n}\r\n\r\nconst RegistrationPage: FC<{ isAuth: boolean }> = ({ isAuth }) => {\r\n    const dispatch = useAppDispatch();\r\n    const { values, handleChange } = useForm({\r\n        name: '',\r\n        email: '',\r\n        password: ''\r\n    });\r\n\r\n    const registrationHandler = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        const { email, password, name } = e.target as typeof e.target & RegistrationFormData;\r\n        // @ts-ignore\r\n        dispatch(registrationUser(email.value, password.value, name.value));\r\n    };\r\n\r\n    if (isAuth) {\r\n        return (\r\n            <Redirect\r\n                to={{\r\n                    pathname: '/'\r\n                }}\r\n            />\r\n        );\r\n    } else {\r\n        return (\r\n            <SinglePageWrapper>\r\n                <p className=\"text text_type_main-medium\">Регистрация</p>\r\n                <form onSubmit={registrationHandler}>\r\n                    <div className=\"mt-6\">\r\n                        <Input\r\n                            type={'text'}\r\n                            placeholder={'Имя'}\r\n                            onChange={handleChange}\r\n                            value={values.name}\r\n                            name={'name'}\r\n                            size={'default'}\r\n                            autoComplete=\"on\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"mt-6\">\r\n                        <EmailInput onChange={handleChange} value={values.email} name={'email'} autoComplete=\"on\" />\r\n                    </div>\r\n                    <div className=\"mt-6\">\r\n                        <PasswordInput\r\n                            onChange={handleChange}\r\n                            value={values.password}\r\n                            name={'password'}\r\n                            autoComplete=\"off\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"mt-6\">\r\n                        <Button type=\"primary\" size=\"large\" htmlType=\"submit\">\r\n                            Зарегистрироваться\r\n                        </Button>\r\n                    </div>\r\n                </form>\r\n                <AdditionalLink\r\n                    className={'mt-20'}\r\n                    label=\"Уже зарегистрированы?\"\r\n                    to=\"/login\"\r\n                    lintText=\"Войти\"\r\n                    replace\r\n                />\r\n            </SinglePageWrapper>\r\n        );\r\n    }\r\n};\r\n\r\nconst RegistrationPageContainer = () => {\r\n    const user = useAppSelector(state => state.user);\r\n    return user ? <RegistrationPage isAuth={!!user.data} /> : null;\r\n};\r\n\r\nexport default RegistrationPageContainer;\r\n","import React, { FC, FormEvent } from 'react';\r\nimport { Button, EmailInput, Input, PasswordInput } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nimport SinglePageWrapper from '../SinglePageWrapper';\r\nimport AdditionalLink from '../../components/AdditionalLink/AdditionalLink';\r\nimport { passwordReset, passwordResetConfirmation } from '../../utils/api';\r\nimport { Redirect, useHistory, useLocation } from 'react-router-dom';\r\nimport { useForm } from '../../hooks/useForm';\r\nimport { EnumResetPassportStepType, LocationProps } from '../../utils/types';\r\nimport { useAppSelector } from '../../services/reducers/Root';\r\n\r\ninterface EmailConformationFormData {\r\n    email: { value: string };\r\n}\r\n\r\ninterface PasswordConformationFormData {\r\n    password: { value: string };\r\n    token: { value: string };\r\n}\r\n\r\nconst getStepContent = (step: EnumResetPassportStepType) => {\r\n    switch (step) {\r\n        case EnumResetPassportStepType.EMAIL:\r\n            return <EmailConformation />;\r\n        case EnumResetPassportStepType.PASSWORD:\r\n            return <PasswordConformation />;\r\n        default:\r\n            return <EmailConformation />;\r\n    }\r\n};\r\n\r\nconst PasswordConformation = () => {\r\n    const history = useHistory();\r\n    const location = useLocation() as unknown as LocationProps;\r\n    const isEmailConfirm = !!location.state?.isEmailConfirm;\r\n\r\n    const { values, handleChange } = useForm({\r\n        token: '',\r\n        password: ''\r\n    });\r\n\r\n    const passwordConformationHandler = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        const { password, token } = e.target as typeof e.target & PasswordConformationFormData;\r\n        passwordResetConfirmation(password.value, token.value).then(() => history.replace({ pathname: '/' }));\r\n    };\r\n\r\n    if (isEmailConfirm) {\r\n        return (\r\n            <form onSubmit={passwordConformationHandler}>\r\n                <div className=\"mt-6\">\r\n                    <PasswordInput\r\n                        onChange={handleChange}\r\n                        value={values.password}\r\n                        name={'password'}\r\n                        autoComplete={'off'}\r\n                    />\r\n                </div>\r\n                <div className=\"mt-6\">\r\n                    <Input\r\n                        type={'text'}\r\n                        placeholder={'Введите код из письма'}\r\n                        onChange={handleChange}\r\n                        value={values.token}\r\n                        name={'token'}\r\n                        error={false}\r\n                        errorText={'Ошибка'}\r\n                        size={'default'}\r\n                        autoComplete={'off'}\r\n                    />\r\n                </div>\r\n                <div className=\"mt-6\">\r\n                    <Button type=\"primary\" size=\"large\" htmlType=\"submit\">\r\n                        Сохранить\r\n                    </Button>\r\n                </div>\r\n            </form>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Redirect\r\n            to={{\r\n                pathname: '/forgot-password'\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nconst EmailConformation = () => {\r\n    const history = useHistory();\r\n    const { values, handleChange } = useForm({\r\n        email: ''\r\n    });\r\n\r\n    const emailConformationHandler = (e: FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault();\r\n        const { email } = e.target as typeof e.target & EmailConformationFormData;\r\n        passwordReset(email.value).then(() =>\r\n            history.replace({ pathname: '/reset-password' }, { isEmailConfirm: true })\r\n        );\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={emailConformationHandler}>\r\n            <section className=\"mt-6\">\r\n                <EmailInput onChange={handleChange} value={values.email} name={'email'} />\r\n            </section>\r\n            <section className=\"mt-6\">\r\n                <Button type=\"primary\" size=\"large\" htmlType=\"submit\">\r\n                    Восстановить\r\n                </Button>\r\n            </section>\r\n        </form>\r\n    );\r\n};\r\n\r\nconst ResetPasswordPage: FC<{ step: EnumResetPassportStepType; isAuth: boolean }> = ({ step, isAuth }) => {\r\n    if (isAuth) {\r\n        return (\r\n            <Redirect\r\n                to={{\r\n                    pathname: '/'\r\n                }}\r\n            />\r\n        );\r\n    } else {\r\n        return (\r\n            <SinglePageWrapper>\r\n                <p className=\"text text_type_main-medium\">Восстановление пароля</p>\r\n                {getStepContent(step)}\r\n                <AdditionalLink className={'mt-20'} label=\"Вспомнили пароль?\" to=\"/login\" lintText=\"Войти\" replace />\r\n            </SinglePageWrapper>\r\n        );\r\n    }\r\n};\r\n\r\nconst ResetPasswordPageContainer: FC<{ step: EnumResetPassportStepType }> = ({ step }) => {\r\n    const user = useAppSelector(state => state.user);\r\n    return user ? <ResetPasswordPage isAuth={!!user.data} step={step} /> : null;\r\n};\r\n\r\nexport default ResetPasswordPageContainer;\r\n","import React, { ChangeEvent, FC, useEffect, useState } from 'react';\r\nimport classNames from 'classnames';\r\nimport styles from '../ProfilePage.module.css';\r\nimport { Button, Input } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useForm } from '../../../hooks/useForm';\r\nimport { useAppDispatch, useAppSelector } from '../../../services/reducers/Root';\r\nimport { patchUserData } from '../../../services/actions/User';\r\n\r\ntype ProfileInputProps = {\r\n    placeholder: string;\r\n    value: string;\r\n    type: 'text' | 'email' | 'password' | undefined;\r\n    onChange: (e: ChangeEvent<HTMLInputElement>) => void;\r\n    name: string;\r\n};\r\n\r\nconst ProfileInput: FC<ProfileInputProps> = ({ placeholder, onChange, value, type, name }) => {\r\n    return (\r\n        <div className={classNames(styles.section, 'mt-6')}>\r\n            <Input\r\n                type={type}\r\n                placeholder={placeholder}\r\n                onChange={onChange}\r\n                value={value ?? ''}\r\n                name={name}\r\n                size={'default'}\r\n                icon={'EditIcon'}\r\n                autoComplete={'off'}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Profile = () => {\r\n    const dispatch = useAppDispatch();\r\n    const { data, userRequest } = useAppSelector(state => state.user);\r\n    const { values, handleChange, setValues } = useForm({\r\n        email: data.email,\r\n        name: data.name,\r\n        password: ''\r\n    });\r\n    const [isModify, setIsModify] = useState(false);\r\n\r\n    const abortChangeHandler = () => {\r\n        setValues({\r\n            email: data.email,\r\n            name: data.name,\r\n            password: ''\r\n        });\r\n    };\r\n\r\n    const changeUserHandler = () => {\r\n        // @ts-ignore\r\n        dispatch(patchUserData(values.email, values.password, values.name));\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!values.password && JSON.stringify(values) === JSON.stringify({ ...data, password: '' })) {\r\n            setIsModify(false);\r\n        } else {\r\n            setIsModify(true);\r\n        }\r\n    }, [data, values]);\r\n\r\n    if (!userRequest) {\r\n        return (\r\n            <>\r\n                <form className=\"mt-25\">\r\n                    <ProfileInput\r\n                        type={'text'}\r\n                        placeholder={'Имя'}\r\n                        onChange={handleChange}\r\n                        value={values.name}\r\n                        name={'name'}\r\n                    />\r\n                    <ProfileInput\r\n                        type={'text'}\r\n                        placeholder={'Логин'}\r\n                        onChange={handleChange}\r\n                        value={values.email}\r\n                        name={'email'}\r\n                    />\r\n                    <ProfileInput\r\n                        type={'password'}\r\n                        placeholder={'Пароль'}\r\n                        onChange={handleChange}\r\n                        value={values.password}\r\n                        name={'password'}\r\n                    />\r\n                    <div className={classNames(styles.section, 'mt-10')}>\r\n                        <Button type=\"secondary\" size=\"medium\" htmlType=\"reset\" onClick={abortChangeHandler}>\r\n                            Отмена\r\n                        </Button>\r\n                        <Button\r\n                            type=\"primary\"\r\n                            size=\"medium\"\r\n                            htmlType=\"submit\"\r\n                            disabled={!isModify}\r\n                            onClick={changeUserHandler}\r\n                        >\r\n                            Сохранить\r\n                        </Button>\r\n                    </div>\r\n                </form>\r\n            </>\r\n        );\r\n    }\r\n\r\n    return null;\r\n};\r\n\r\nexport default Profile;\r\n","import React, { FC } from 'react';\r\nimport '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './OrderListItem.module.css';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useHistory, useLocation, useRouteMatch } from 'react-router-dom';\r\nimport { EnumOrderStatusName, IngredientType, LocationProps, OrderType } from '../../utils/types';\r\nimport classNames from 'classnames';\r\nimport { calculateOrderCost, dateParse, getOrderIngredients } from '../../utils/helpers';\r\n\r\nconst OrderListItem: FC<{ orderData: OrderType; orderIngredients: IngredientType[] }> = ({\r\n    orderData,\r\n    orderIngredients\r\n}) => {\r\n    const history = useHistory();\r\n    const location = useLocation() as unknown as LocationProps;\r\n    const { path } = useRouteMatch();\r\n\r\n    const ingredientList = getOrderIngredients(orderIngredients);\r\n\r\n    const OpenOrderItemHandler = () => {\r\n        history.replace(`${path}/${orderData._id}`, { background: location });\r\n    };\r\n\r\n    return (\r\n        <section className={classNames(styles.item, 'pt-6 pr-6 pb-6 pl-6 mb-4')} onClick={OpenOrderItemHandler}>\r\n            <div className={classNames(styles.top, 'mb-6')}>\r\n                <p className=\"text text_type_digits-default\">#{orderData.number}</p>\r\n                <p className=\"text text_type_main-default text_color_inactive\">{dateParse(orderData.createdAt)}</p>\r\n            </div>\r\n            <p className=\"text text_type_main-medium mb-2\">{orderData.name}</p>\r\n            <p className=\"text text_type_main-default mb-6\">{EnumOrderStatusName[orderData.status]}</p>\r\n            <div className={styles.bottom}>\r\n                <div className={styles.params}>\r\n                    {orderData.ingredients\r\n                        .map((orderIngredient, i) => (\r\n                            <>\r\n                                {i < 5 ? (\r\n                                    <div className={styles.param} key={i}>\r\n                                        <img\r\n                                            className={styles.paramImg}\r\n                                            src={ingredientList[orderIngredient].image_mobile}\r\n                                            alt={`Добавка: ${ingredientList[orderIngredient].name}`}\r\n                                        />\r\n                                    </div>\r\n                                ) : i === 5 ? (\r\n                                    <div\r\n                                        className={classNames(\r\n                                            styles.param,\r\n                                            'text text_type_main-default text_color_inactive'\r\n                                        )}\r\n                                        key={i}\r\n                                    >\r\n                                        {orderData.ingredients.length > 6 ? (\r\n                                            <>\r\n                                                <img\r\n                                                    className={classNames(styles.paramImg, styles.lastParamImg)}\r\n                                                    src={ingredientList[orderIngredient].image_mobile}\r\n                                                    alt={`Добавка: ${ingredientList[orderIngredient].name}`}\r\n                                                />\r\n                                                <span\r\n                                                    className={classNames(\r\n                                                        styles.paramAdditionalValue,\r\n                                                        'text text_type_main-default'\r\n                                                    )}\r\n                                                >\r\n                                                    +{orderData.ingredients.length - 6}\r\n                                                </span>\r\n                                            </>\r\n                                        ) : (\r\n                                            <img\r\n                                                className={styles.paramImg}\r\n                                                src={ingredientList[orderIngredient].image_mobile}\r\n                                                alt={`Добавка: ${ingredientList[orderIngredient].name}`}\r\n                                            />\r\n                                        )}\r\n                                    </div>\r\n                                ) : null}\r\n                            </>\r\n                        ))\r\n                        .reverse()}\r\n                </div>\r\n                <div className={styles.price}>\r\n                    <p className=\"text text_type_digits-default mr-2\">\r\n                        {calculateOrderCost(orderData.ingredients.map(ingredient => ingredientList[ingredient]))}\r\n                    </p>\r\n                    <CurrencyIcon type=\"primary\" />\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default OrderListItem;\r\n","import React, { FC } from 'react';\r\nimport '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './Feed.module.css';\r\nimport classNames from 'classnames';\r\nimport OrderListItem from '../OrderListItem/OrderListItem';\r\nimport { IngredientType, OrderType } from '../../utils/types';\r\nimport { diffDates } from '../../utils/helpers';\r\n\r\nconst OrderTable: FC<{ orderData: OrderType[] }> = ({ orderData }) => {\r\n    const doneOrders = orderData.filter(order => order.status === 'done');\r\n    const pendingOrders = orderData.filter(order => order.status === 'pending');\r\n\r\n    return (\r\n        <>\r\n            <div className={styles.numbers}>\r\n                <div className={styles.numbers_block}>\r\n                    <p className=\"text text_type_main-medium mb-6\">Готовы</p>\r\n                    <div className={styles.numbers_blue}>\r\n                        {doneOrders.map((order, i) => {\r\n                            return i < 10 ? (\r\n                                <p key={order._id} className=\"text text_type_digits-default mb-2\">\r\n                                    #{order.number}\r\n                                </p>\r\n                            ) : null;\r\n                        })}\r\n                    </div>\r\n                </div>\r\n                {!!pendingOrders.length && (\r\n                    <div className={styles.numbers_block}>\r\n                        <p className=\"text text_type_main-medium mb-6\">В работе</p>\r\n                        <div>\r\n                            {pendingOrders.map(order => {\r\n                                return (\r\n                                    <p key={order._id} className=\"text text_type_digits-default mb-2\">\r\n                                        #{order.number}\r\n                                    </p>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            <div className={'mt-15'}>\r\n                <p className=\"text text_type_main-medium\">Выполнено за все время:</p>\r\n                <p className={styles.result_text + ' text text_type_digits-large'}>{orderData.sort()[0]?.number}</p>\r\n            </div>\r\n            <div className={'mt-15'}>\r\n                <p className=\"text text_type_main-medium\">Выполнено за сегодня:</p>\r\n                <p className={styles.result_text + ' text text_type_digits-large'}>\r\n                    {orderData.filter(order => diffDates(new Date(order.createdAt)) < 1).length}\r\n                </p>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nconst getOrderIngredients = (ingredients: IngredientType[], ingredientsID: string[]) => {\r\n    return ingredients.filter(ingredient => ingredientsID.includes(ingredient._id));\r\n};\r\n\r\nexport const OrderList: FC<{ orderData: OrderType[]; ingredients: IngredientType[] }> = ({\r\n    orderData,\r\n    ingredients\r\n}) => {\r\n    if (!orderData.length) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {orderData.map((orderItemData, i) => (\r\n                <OrderListItem\r\n                    key={`${orderItemData._id}${i}`}\r\n                    orderData={orderItemData}\r\n                    orderIngredients={getOrderIngredients(ingredients, orderItemData.ingredients)}\r\n                />\r\n            ))}\r\n        </>\r\n    );\r\n};\r\n\r\nconst Feed: FC<{ orderData: OrderType[]; ingredients: IngredientType[] }> = ({ orderData, ingredients }) => {\r\n    return (\r\n        <div className={classNames(styles.container, 'pl-4 pr-4 mt-10')}>\r\n            <p className=\"text text_type_main-large mt-10 mb-5\">Лента заказов</p>\r\n            <div className={styles.wrapper}>\r\n                <div className={classNames(styles.orderList, 'pr-2')}>\r\n                    <OrderList orderData={orderData} ingredients={ingredients} />\r\n                </div>\r\n                <div className={styles.orderTable}>\r\n                    <OrderTable orderData={orderData} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Feed;\r\n","import { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\n\r\nimport styles from './OrderItem.module.css';\r\nimport classNames from 'classnames';\r\nimport React, { FC } from 'react';\r\nimport { useAppSelector } from '../../../services/reducers/Root';\r\nimport { EnumOrderStatusName, IIngredientList, OrderType } from '../../../utils/types';\r\nimport { calculateOrderCost, dateParse, getOrderIngredients } from '../../../utils/helpers';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nconst OrderItem: FC<{ orderItem: OrderType; ingredientList: IIngredientList; isModal: boolean }> = ({\r\n    orderItem,\r\n    ingredientList,\r\n    isModal\r\n}) => {\r\n    const orderIngredientsSet = new Set(orderItem.ingredients);\r\n\r\n    return (\r\n        <div className={classNames(styles.wrapper, 'mb-10', { 'mt-10 ': !isModal })}>\r\n            <p className=\"text text_type_digits-default mb-10\">#{orderItem.number}</p>\r\n            <p className=\"text text_type_main-medium mb-3\">{orderItem.name}</p>\r\n            <p className=\"text text_type_main-default mb-15\">{EnumOrderStatusName[orderItem.status]}</p>\r\n            <p className=\"text text_type_main-medium mb-6\">Состав:</p>\r\n            <div className={classNames(styles.ingredients, 'pr-6 mb-10')}>\r\n                {[...orderIngredientsSet].map((ingredientID, i) => {\r\n                    return (\r\n                        <div key={i} className={classNames(styles.ingredient, 'mb-4')}>\r\n                            <div className={styles.title}>\r\n                                <div className={classNames(styles.icon, 'mr-4')}>\r\n                                    <img\r\n                                        className={styles.iconImg}\r\n                                        src={ingredientList[ingredientID].image_mobile}\r\n                                        alt={`Добавка: ${ingredientList[ingredientID].name}`}\r\n                                    />\r\n                                </div>\r\n                                <p className=\"text text_type_main-default\">{ingredientList[ingredientID].name}</p>\r\n                            </div>\r\n                            <div className={styles.price}>\r\n                                <p className=\"text text_type_digits-default mr-2\">\r\n                                    {orderItem.ingredients.filter(ingredient => ingredient === ingredientID).length} x{' '}\r\n                                    {ingredientList[ingredientID].price}\r\n                                </p>{' '}\r\n                                <CurrencyIcon type=\"primary\" />\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n            <div className={styles.bottom}>\r\n                <p className=\"text text_type_main-default text_color_inactive\">{dateParse(orderItem.createdAt)}</p>\r\n                <div className={styles.price}>\r\n                    <p className=\"text text_type_digits-default mr-2\">\r\n                        {calculateOrderCost(orderItem.ingredients.map(ingredient => ingredientList[ingredient]))}\r\n                    </p>{' '}\r\n                    <CurrencyIcon type=\"primary\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst OrderItemContainer: FC<{ isModal?: boolean }> = ({ isModal }) => {\r\n    const { orderData, ingredients } = useAppSelector(state => ({\r\n        orderData: state.orderList.data,\r\n        ingredients: state.ingredients.ingredients\r\n    }));\r\n\r\n    const urlParams = useParams<{ id: string }>();\r\n    const selectedOrderId = urlParams.id;\r\n\r\n    if (!orderData.length || !ingredients.length) {\r\n        return null;\r\n    }\r\n\r\n    const ingredientList = getOrderIngredients(ingredients);\r\n    const selectedOrderData = orderData.find(order => order._id === selectedOrderId) as OrderType;\r\n\r\n    return <OrderItem orderItem={selectedOrderData} ingredientList={ingredientList} isModal={!!isModal} />;\r\n};\r\n\r\nexport default OrderItemContainer;\r\n","import React, { FC, useEffect } from 'react';\r\nimport { OrderList } from '../../../components/Feed';\r\nimport styles from './Ordres.module.css';\r\nimport classNames from 'classnames';\r\nimport { useAppDispatch, useAppSelector } from '../../../services/reducers/Root';\r\nimport { WS_CLOSE_CONNECTION, WS_CONNECTION_START } from '../../../services/actions/WebSocket';\r\nimport { IngredientType, OrderType } from '../../../utils/types';\r\nimport { WSS_USER_ORDERS_URL } from '../../../utils/constants';\r\nimport OrderItem from '../../../components/OrderListItem/OrderItem/OrderItem';\r\nimport {getClearAccessToken} from \"../../../utils/helpers\";\r\n\r\nconst Orders: FC<{ orderData: OrderType[]; ingredients: IngredientType[] }> = ({ orderData, ingredients }) => {\r\n    return (\r\n        <section className={classNames(styles.orderList, 'mt-15')}>\r\n            <OrderList orderData={orderData} ingredients={ingredients} />\r\n        </section>\r\n    );\r\n};\r\n\r\nconst OrdersContainer: FC<{ isSinglePage?: boolean }> = ({ isSinglePage }) => {\r\n    const dispatch = useAppDispatch();\r\n    const { orderData, ingredients, stateAccessToken } = useAppSelector(state => ({\r\n        orderData: state.orderList.data?.reverse(),\r\n        ingredients: state.ingredients.ingredients,\r\n        stateAccessToken: state.user?.accessToken?.split('Bearer ')[1]\r\n    }));\r\n\r\n    let accessToken: string|undefined = '';\r\n\r\n    accessToken = getClearAccessToken();\r\n\r\n    if (!accessToken) {\r\n        accessToken = stateAccessToken\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        dispatch({\r\n            type: WS_CONNECTION_START,\r\n            payload: { url: `${WSS_USER_ORDERS_URL}${accessToken}` }\r\n        });\r\n\r\n        return () => {\r\n            dispatch({\r\n                type: WS_CLOSE_CONNECTION\r\n            });\r\n        };\r\n    }, [accessToken, dispatch]);\r\n\r\n    if (!!orderData?.length && !!ingredients?.length) {\r\n        return isSinglePage ? <OrderItem /> : <Orders orderData={orderData} ingredients={ingredients} />;\r\n    }\r\n\r\n    return null;\r\n};\r\n\r\nexport default OrdersContainer;\r\n","import React, { FC, useCallback } from 'react';\r\nimport { Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { logoutUser } from '../../../services/actions/User';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useAppDispatch } from '../../../services/reducers/Root';\r\n\r\nconst Logout: FC = () => {\r\n    const dispatch = useAppDispatch();\r\n    const history = useHistory();\r\n\r\n    const onLogout = useCallback(() => {\r\n        history.replace({ pathname: '/' });\r\n    }, [history]);\r\n\r\n    const logoutHandler = async (e: React.SyntheticEvent<Element, Event>) => {\r\n        e.preventDefault();\r\n        // @ts-ignore\r\n        await dispatch(logoutUser());\r\n        await onLogout();\r\n    };\r\n\r\n    return (\r\n        <section className=\"mt-25\">\r\n            <Button type=\"primary\" size=\"large\" htmlType=\"button\" onClick={logoutHandler}>\r\n                Выйти\r\n            </Button>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default Logout;\r\n","import React, { FC } from 'react';\r\nimport { NavLink, Route, Switch } from 'react-router-dom';\r\nimport classNames from 'classnames';\r\n\r\nimport styles from './ProfilePage.module.css';\r\nimport Profile from './Profile/Profile';\r\nimport Orders from './Orders/Orders';\r\nimport Logout from './Logout/Logout';\r\nimport { NavItemProps } from '../../utils/types';\r\n\r\nconst ProfileNavLink: FC<NavItemProps> = ({ to, text }) => {\r\n    return (\r\n        <NavLink to={to} className={styles.label} activeClassName={styles.activeLabel} exact>\r\n            <div className={styles.labelWrapper}>\r\n                <p className=\"text text_type_main-medium\">{text}</p>\r\n            </div>\r\n        </NavLink>\r\n    );\r\n};\r\n\r\nconst ProfilePage: FC = ({ children }) => {\r\n    return (\r\n        <div className={styles.wrapper}>\r\n            <div className=\"mr-15 mt-25\">\r\n                <ProfileNavLink to={'/profile'} text={'Профиль'} />\r\n                <ProfileNavLink to={'/profile/orders'} text={'История заказов'} />\r\n                <ProfileNavLink to={'/profile/logout'} text={'Выход'} />\r\n                <div className={classNames(styles.navHint, 'mt-20')}>\r\n                    <p className=\"text text_type_main-default\">\r\n                        В&nbsp;этом разделе вы&nbsp;можете изменить&nbsp;свои персональные данные\r\n                    </p>\r\n                </div>\r\n            </div>\r\n            <div className={styles.content}>{children}</div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ProfilePageContainer = () => {\r\n    return (\r\n        <div className={styles.wrapper}>\r\n            <Switch>\r\n                <Route path=\"/profile/orders/:id\" exact>\r\n                    <Orders isSinglePage />\r\n                </Route>\r\n                <ProfilePage>\r\n                    <Route path=\"/profile/orders\" exact>\r\n                        <Orders />\r\n                    </Route>\r\n                    <Route path=\"/profile\" exact>\r\n                        <Profile />\r\n                    </Route>\r\n                    <Route path=\"/profile/logout\" exact>\r\n                        <Logout />\r\n                    </Route>\r\n                </ProfilePage>\r\n            </Switch>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProfilePageContainer;\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport classNames from 'classnames';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport styles from './IngredientDetails.module.css';\r\nimport { IngredientType } from '../../utils/types';\r\nimport { useAppSelector } from '../../services/reducers/Root';\r\n\r\ntype IngredientDetailsProps = {\r\n    ingredient: IngredientType;\r\n};\r\n\r\nconst IngredientDetailsContent: FC<IngredientDetailsProps & { isLoading: boolean }> = ({ ingredient, isLoading }) => {\r\n    const getProperty = (propertyName: string) => {\r\n        return isLoading ? '...' : ingredient[propertyName as keyof IngredientType];\r\n    };\r\n\r\n    return (\r\n        <div className={styles.wrapper}>\r\n            {isLoading ? (\r\n                <div className={styles.loaderContainer}>\r\n                    <span className={styles.loader}></span>\r\n                </div>\r\n            ) : (\r\n                <img src={ingredient.image_large} alt={ingredient.name} />\r\n            )}\r\n            <p className={'text text_type_main-medium pt-3 pb-3'}>{!isLoading && ingredient.name}</p>\r\n            <div className={classNames('pt-5 pb-15', styles.propertyList)}>\r\n                <div className={styles.propertyItem}>\r\n                    <p className={'text text_type_main-default text_color_inactive mb-2'}>Калории,ккал</p>\r\n                    <p className={'text text_type_digits-default text_color_inactive'}>{getProperty('calories')}</p>\r\n                </div>\r\n                <div className={styles.propertyItem}>\r\n                    <p className={'text text_type_main-default text_color_inactive mb-2'}>Белки, г</p>\r\n                    <p className={'text text_type_digits-default text_color_inactive'}>{getProperty('proteins')}</p>\r\n                </div>\r\n                <div className={styles.propertyItem}>\r\n                    <p className={'text text_type_main-default text_color_inactive mb-2'}>Жиры, г</p>\r\n                    <p className={'text text_type_digits-default text_color_inactive'}>{getProperty('fat')}</p>\r\n                </div>\r\n                <div className={styles.propertyItem}>\r\n                    <p className={'text text_type_main-default text_color_inactive mb-2'}>Углеводы, г</p>\r\n                    <p className={'text text_type_digits-default text_color_inactive'}>\r\n                        {getProperty('carbohydrates')}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst IngredientDetails: FC<IngredientDetailsProps> = ({ ingredient }) => {\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    useEffect(() => setIsLoading(ingredient === null), [ingredient]);\r\n\r\n    return <IngredientDetailsContent ingredient={ingredient} isLoading={isLoading} />;\r\n};\r\n\r\nconst IngredientDetailsContainer = () => {\r\n    const { ingredientId }: { ingredientId: string } = useParams();\r\n    const { ingredientDetails, ingredientList } = useAppSelector(state => ({\r\n        ingredientDetails: state.ingredientDetails,\r\n        ingredientList: state.ingredients\r\n    }));\r\n\r\n    const getIngredient = () => {\r\n        if (ingredientDetails) {\r\n            return ingredientDetails;\r\n        }\r\n\r\n        return ingredientList.ingredients.filter((item: IngredientType) => item._id === ingredientId)[0];\r\n    };\r\n\r\n    return <IngredientDetails ingredient={getIngredient()} />;\r\n};\r\n\r\nexport default IngredientDetailsContainer;\r\n","export default __webpack_public_path__ + \"static/media/done.3ba9e5cd.svg\";","import React, { FC } from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport styles from './OrderDetails.module.css';\r\nimport doneIcon from './icon/done.svg';\r\nimport Modal from '../../Modal/Modal';\r\nimport { REMOVE_MODAL_TYPE } from '../../../services/actions/Modal';\r\nimport { useAppDispatch, useAppSelector } from '../../../services/reducers/Root';\r\n\r\nconst OrderDetails: FC = () => {\r\n    const dispatch = useAppDispatch();\r\n    const { orderRequest, orderData } = useAppSelector(state => state.order);\r\n\r\n    const closeModal = () => {\r\n        dispatch({ type: REMOVE_MODAL_TYPE });\r\n    };\r\n\r\n    return (\r\n        <Modal onClose={closeModal}>\r\n            <div className={styles.wrapper}>\r\n                <span className={classNames('text text_type_digits-large mt-3 mb-3', styles.orderNumber)}>\r\n                    {!orderRequest ? orderData.number : 'Loading...'}\r\n                </span>\r\n                <p className={'text text_type_main-medium mb-15'}>идентификатор заказа</p>\r\n                <img src={doneIcon} alt=\"Принято\" />\r\n                <p className={'text text_type_main-default pt-15 pb-2'}>Ваш заказ начали готовить</p>\r\n                <p className={'text text_type_main-default text_color_inactive pb-30'}>\r\n                    Дождитесь готовности на орбитальной станции\r\n                </p>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default OrderDetails\r\n","import React, { FC } from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport Modal from '../Modal';\r\nimport styles from './ErrorModal.module.css';\r\nimport { REMOVE_MODAL_TYPE } from '../../../services/actions/Modal';\r\nimport { useAppDispatch, useAppSelector } from '../../../services/reducers/Root';\r\n\r\nconst ErrorModal: FC = () => {\r\n    const dispatch = useAppDispatch();\r\n    const { status, message } = useAppSelector(state => state.modal);\r\n\r\n    const closeModal = () => {\r\n        dispatch({ type: REMOVE_MODAL_TYPE });\r\n    };\r\n\r\n    return (\r\n        <Modal onClose={closeModal} title={'Ошибка'}>\r\n            <div className={classNames(styles.wrapper, 'pb-10')}>\r\n                {status && <span className={classNames('text text_type_main-medium mt-3 mb-3')}>Статус:{status}</span>}\r\n                {message && (\r\n                    <span className={classNames('text text_type_main-medium mt-3 mb-3')}>Сообщение:{message}</span>\r\n                )}\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default ErrorModal;\r\n","import React, { FC, useEffect } from 'react';\r\n\r\nimport Feed from '../../components/Feed/Feed';\r\nimport { WS_CLOSE_CONNECTION, WS_CONNECTION_START } from '../../services/actions/WebSocket';\r\nimport { useAppDispatch, useAppSelector } from '../../services/reducers/Root';\r\nimport { WSS_ALL_ORDERS_URL } from '../../utils/constants';\r\nimport OrderItem from '../../components/OrderListItem/OrderItem/OrderItem';\r\n\r\nconst FeedPage: FC<{ isSinglePage?: boolean }> = ({ isSinglePage }) => {\r\n    const dispatch = useAppDispatch();\r\n    const { orderData, ingredients } = useAppSelector(state => ({\r\n        orderData: state.orderList.data,\r\n        ingredients: state.ingredients.ingredients\r\n    }));\r\n\r\n    useEffect(() => {\r\n        dispatch({\r\n            type: WS_CONNECTION_START,\r\n            payload: { url: WSS_ALL_ORDERS_URL }\r\n        });\r\n\r\n        return () => {\r\n            dispatch({\r\n                type: WS_CLOSE_CONNECTION\r\n            });\r\n        };\r\n    }, [dispatch]);\r\n\r\n    if (!!orderData.length && !!ingredients.length) {\r\n        return isSinglePage ? <OrderItem /> : <Feed orderData={orderData} ingredients={ingredients} />;\r\n    }\r\n\r\n    return null;\r\n};\r\n\r\nexport default FeedPage;","import React, { useCallback, useEffect } from 'react';\r\nimport { Route, Switch, useHistory, useLocation } from 'react-router-dom';\r\n\r\nimport { AppHeader } from '../AppHeader';\r\nimport { getUserData } from '../../services/actions/User';\r\nimport { getIngredientsData } from '../../services/actions/Ingredients';\r\nimport { EnumModalType, EnumResetPassportStepType } from '../../utils/types';\r\nimport { useAppDispatch, useAppSelector } from '../../services/reducers/Root';\r\n\r\nimport Modal from '../Modal/Modal';\r\nimport ConstructorPage from '../../pages/ConstructorPage/ConstructorPage';\r\nimport LoginPage from '../../pages/LoginPage/LoginPage';\r\nimport RegistrationPage from '../../pages/RegistrationPage/RegistrationPage';\r\nimport ResetPasswordPage from '../../pages/ResetPasswordPage/ResetPasswordPage';\r\nimport ProfilePage from '../../pages/ProfilePage/ProfilePage';\r\nimport ProtectedRoute from '../ProtectedRoute/ProtectedRoute';\r\nimport IngredientDetails from '../IngredientDetails/IngredientDetails';\r\nimport OrderDetails from '../BurgerConstructor/OrderDetails/OrderDetails';\r\nimport ErrorModal from '../Modal/ErrorModal/ErrorModal';\r\nimport FeedPage from '../../pages/FeedPage/FeedPage';\r\nimport OrderItem from '../OrderListItem/OrderItem/OrderItem';\r\n\r\nconst getModal = (modalType: EnumModalType) => {\r\n    switch (modalType) {\r\n        case EnumModalType.ORDER:\r\n            return <OrderDetails />;\r\n        case EnumModalType.ERROR:\r\n            return <ErrorModal />;\r\n        default:\r\n            return null;\r\n    }\r\n};\r\n\r\nfunction App() {\r\n    const dispatch = useAppDispatch();\r\n    const location = useLocation<Location>();\r\n    const history = useHistory();\r\n\r\n    const { modalType, ingredientList } = useAppSelector(state => ({\r\n        modalType: state.modal.modalType,\r\n        ingredientList: state.ingredients\r\n    }));\r\n\r\n    // @ts-ignore\r\n    const background = location.state && location.state.background;\r\n    const handleModalClose = () => {\r\n        history.goBack();\r\n    };\r\n\r\n    const init = useCallback(async () => {\r\n        // @ts-ignore\r\n        await dispatch(getUserData());\r\n    }, [dispatch]);\r\n\r\n    useEffect(() => {\r\n        init();\r\n    }, [init]);\r\n\r\n    useEffect(() => {\r\n        // @ts-ignore\r\n        dispatch(getIngredientsData());\r\n    }, [dispatch]);\r\n\r\n    if (ingredientList.ingredientsRequest) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <AppHeader />\r\n            <Switch location={background || location}>\r\n                <Route path=\"/login\" exact>\r\n                    <LoginPage />\r\n                </Route>\r\n                <Route path=\"/register\" exact>\r\n                    <RegistrationPage />\r\n                </Route>\r\n                <Route path=\"/forgot-password\" exact>\r\n                    <ResetPasswordPage step={EnumResetPassportStepType.EMAIL} />\r\n                </Route>\r\n                <Route path=\"/reset-password\" exact>\r\n                    <ResetPasswordPage step={EnumResetPassportStepType.PASSWORD} />\r\n                </Route>\r\n                <ProtectedRoute path=\"/profile\">\r\n                    <ProfilePage />\r\n                </ProtectedRoute>\r\n                <Route path=\"/feed\" exact>\r\n                    <FeedPage />\r\n                </Route>\r\n                <Route path=\"/feed/:id\" exact>\r\n                    <FeedPage isSinglePage />\r\n                </Route>\r\n                <Route path=\"/ingredients/:ingredientId\" exact>\r\n                    <IngredientDetails />\r\n                </Route>\r\n                <Route path=\"/\" exact>\r\n                    <ConstructorPage />\r\n                </Route>\r\n                {/*<Route>*/}\r\n                {/*    <NotFound404 />*/}\r\n                {/*</Route>*/}\r\n            </Switch>\r\n\r\n            {background?.pathname === '/' && (\r\n                <Route\r\n                    path=\"/ingredients/:ingredientId\"\r\n                    children={\r\n                        <Modal title={'Детали ингредиента'} onClose={handleModalClose}>\r\n                            <IngredientDetails />\r\n                        </Modal>\r\n                    }\r\n                />\r\n            )}\r\n\r\n            {['/feed', '/profile/orders'].includes(background?.pathname) && (\r\n                <Route\r\n                    path={`${background.pathname}/:id`}\r\n                    children={\r\n                        <Modal title={''} onClose={handleModalClose}>\r\n                            <OrderItem isModal />\r\n                        </Modal>\r\n                    }\r\n                />\r\n            )}\r\n\r\n            {modalType && getModal(modalType)}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\n\r\nimport './index.css';\r\nimport App from './components/App/App';\r\nimport { store } from './services/reducers/Root';\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <Provider store={store}>\r\n            <Router>\r\n                <App />\r\n            </Router>\r\n        </Provider>\r\n    </React.StrictMode>,\r\n    document.getElementById('root')\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"OrderListItem_page__3SQOz\",\"wrapper\":\"OrderListItem_wrapper__2Ngkv\",\"item\":\"OrderListItem_item__2_QOZ\",\"top\":\"OrderListItem_top__2mSR2\",\"bottom\":\"OrderListItem_bottom__3bHA6\",\"params\":\"OrderListItem_params__1Kz4h\",\"param\":\"OrderListItem_param__lzMkD\",\"lastParamImg\":\"OrderListItem_lastParamImg__1wJGs\",\"paramImg\":\"OrderListItem_paramImg__1D7Ug\",\"paramAdditionalValue\":\"OrderListItem_paramAdditionalValue__1hpyA\",\"price\":\"OrderListItem_price__1gTb3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ProfilePage_wrapper__16Ffy\",\"section\":\"ProfilePage_section__2XEYf\",\"labelWrapper\":\"ProfilePage_labelWrapper__3fue_\",\"label\":\"ProfilePage_label__2Dcad\",\"activeLabel\":\"ProfilePage_activeLabel__3Hx0U\",\"navHint\":\"ProfilePage_navHint__hNVJF\",\"content\":\"ProfilePage_content__2SRVC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Feed_container__2jna5\",\"wrapper\":\"Feed_wrapper__1KywM\",\"orderList\":\"Feed_orderList__1s3Mf\",\"orderTable\":\"Feed_orderTable__3D3kV\",\"numbers\":\"Feed_numbers__1TmtE\",\"numbers_block\":\"Feed_numbers_block__3In3g\",\"numbers_blue\":\"Feed_numbers_blue__-q92t\",\"result_text\":\"Feed_result_text__1Mh4j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"OrderItem_wrapper__2s20C\",\"ingredients\":\"OrderItem_ingredients__38HhJ\",\"ingredient\":\"OrderItem_ingredient__3IWIU\",\"title\":\"OrderItem_title__2j85W\",\"icon\":\"OrderItem_icon__BRZy7\",\"iconImg\":\"OrderItem_iconImg__2BXur\",\"bottom\":\"OrderItem_bottom__2G_R-\",\"price\":\"OrderItem_price__2ZmCK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"AppHeader_wrapper__nI6-E\",\"nav\":\"AppHeader_nav__1QIre\",\"leftBlock\":\"AppHeader_leftBlock__3GkhU\",\"centralBlock\":\"AppHeader_centralBlock__yv_5L\",\"rightBlock\":\"AppHeader_rightBlock__1Vxhl\",\"navLink\":\"AppHeader_navLink__1n2Kf\",\"isActive\":\"AppHeader_isActive__1wLBO\",\"text\":\"AppHeader_text__2lyGT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"IngredientDetails_wrapper__2uRcy\",\"propertyList\":\"IngredientDetails_propertyList__2IdN9\",\"propertyItem\":\"IngredientDetails_propertyItem__1cd9O\",\"loaderContainer\":\"IngredientDetails_loaderContainer__15oyI\",\"loader\":\"IngredientDetails_loader__3sYjd\",\"mulShdSpin\":\"IngredientDetails_mulShdSpin__3Ki-f\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Modal_wrapper__28bi7\",\"button\":\"Modal_button__3wE3W\",\"title\":\"Modal_title__1SDXM\",\"header\":\"Modal_header__1wG3O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"BurgerConstructor_wrapper__2TLps\",\"ingredientsBlock\":\"BurgerConstructor_ingredientsBlock__h5Hcr\",\"selectedBlock\":\"BurgerConstructor_selectedBlock__1SW6U\",\"priceBlock\":\"BurgerConstructor_priceBlock__3BkFb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"BurgerIngredients_wrapper__1oWgY\",\"ingredientsBlock\":\"BurgerIngredients_ingredientsBlock__CrgPr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"IngredientItem_wrapper__2IfnP\",\"priceBlock\":\"IngredientItem_priceBlock__32x_X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"AdditionalLink_link__G-hlR\",\"linkLabel\":\"AdditionalLink_linkLabel__360VC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"OrderDetails_wrapper__12uSS\",\"orderNumber\":\"OrderDetails_orderNumber__1VxLS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ModalOverlay_wrapper__2kUDG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"ConstructorPage_content__1Ddut\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredientsBlock\":\"IngredientsBlock_ingredientsBlock__2W_BW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"IngredientsTabs_wrapper__1ClY4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient\":\"ConstructorIngredient_ingredient__TFQAr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"SinglePageWrapper_wrapper__1Yv4v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orderList\":\"Ordres_orderList__sc-M3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ErrorModal_wrapper__32UQf\"};"],"sourceRoot":""}