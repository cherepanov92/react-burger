(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{110:function(e,t,n){},195:function(e,t,n){"use strict";n.r(t);var r,a,c,s,i,o=n(1),l=n.n(o),d=n(36),u=n.n(d),j=n(44),p=n(12),m=(n(110),n(15)),b=n(26),O=n(11),x=n(5),h=n.n(x),_=n(4),f=n(30),g=n.n(f);!function(e){e.created="\u0421\u043e\u0437\u0434\u0430\u043d",e.pending="\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f",e.done="\u0413\u043e\u0442\u043e\u0432"}(r||(r={})),function(e){e.CONSTRUCTOR="constructor",e.ORDER_QUEUE="orderQueue",e.LK="lk"}(a||(a={})),function(e){e.ERROR="error",e.ORDER="order"}(c||(c={})),function(e){e.BUN="bun",e.SAUCE="sauce",e.MAIN="main"}(s||(s={})),function(e){e.EMAIL="email",e.PASSWORD="password"}(i||(i={}));var v=n(0),y=function(e,t){switch(e){case a.CONSTRUCTOR:return Object(v.jsx)(_.BurgerIcon,{type:t?"primary":"secondary"});case a.ORDER_QUEUE:return Object(v.jsx)(_.ListIcon,{type:t?"primary":"secondary"});case a.LK:return Object(v.jsx)(_.ProfileIcon,{type:t?"primary":"secondary"})}},N=function(e){var t=e.to,n=e.text,r=e.type,a=t===Object(O.h)().pathname;return Object(v.jsxs)(p.c,{className:h()(g.a.navLink,"m-2 text text_type_main-default"),to:t,exact:!0,activeClassName:g.a.isActive,children:[y(r,a)," ",Object(v.jsx)("span",{className:h()(g.a.text,"ml-2"),children:n})]})},I=function(){return Object(v.jsx)("header",{className:h()(g.a.wrapper,"p-5"),children:Object(v.jsxs)("nav",{className:g.a.nav,children:[Object(v.jsxs)("section",{className:g.a.leftBlock,children:[Object(v.jsx)(N,{to:"/",text:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",type:a.CONSTRUCTOR}),Object(v.jsx)(N,{to:"/feed",text:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",type:a.ORDER_QUEUE})]}),Object(v.jsx)("section",{className:g.a.centralBlock,children:Object(v.jsx)(_.Logo,{})}),Object(v.jsx)("section",{className:g.a.rightBlock,children:Object(v.jsx)(N,{to:"/profile/orders",text:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",type:a.LK})})]})})},T=n(13),w="norma.nomoreparties.space",E=function(e,t){switch(e){case"HTTP":return"https://".concat(w,"/api/").concat(t);case"WS":return"wss://".concat(w,"/").concat(t)}},k=E("WS","orders/all"),C=E("WS","orders?token="),S=E("HTTP","ingredients"),R=E("HTTP","orders"),D=E("HTTP","auth"),L=E("HTTP","password-reset"),A=D+"/login",P=D+"/logout",B=D+"/register",U=D+"/token",M=D+"/user",F=L+"/reset",G=n(19),W=n(2),H=n(204),q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(n=Object(W.a)({path:"/"},n)).expires instanceof Date&&(n.expires=n.expires.toUTCString());var r=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var a in n){r+="; "+a;var c=n[a];!0!==c&&(r+="="+c)}document.cookie=r},V=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.\\+\-*:\/?!|^${}()\[\]])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},z=function(e){q(e,"",{"max-age":-1})},J=function(e){return e.reduce((function(e,t){return t?e+t.price:e}),0)},Q=function(e){return((new Date).getTime()-e.getTime())/864e5},Y=function(e){var t,n=new Date(e),r=Q(n);return t=r<1?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":r<2?"\u0412\u0447\u0435\u0440\u0430":"".concat(Math.ceil(r)," \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434"),"".concat(t," ").concat(n.toLocaleTimeString("ru-Ru",{hour:"numeric",minute:"numeric"}))},K=function(e){return e.reduce((function(e,t){return Object(W.a)(Object(W.a)({},e),{},Object(G.a)({},t._id,t))}),{})},X=function(e){return Object(W.a)(Object(W.a)({},e),{},{orderId:e.orderId?e.orderId:Object(H.a)()})},Z=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))};function $(e,t){return fetch(e,t).then(Z)}var ee=function(e,t){q("accessToken",t),q("refreshToken",e)},te=function(){var e=Object(b.a)(Object(m.a)().mark((function e(t,n){var r,a,c,s,i;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,n);case 3:return r=e.sent,e.next=6,Z(r);case 6:case 24:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(0),"jwt expired"!==e.t0.message){e.next=27;break}return e.next=14,$(U,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:V("refreshToken")})});case 14:return a=e.sent,c=a.refreshToken,s=a.accessToken,ee(c,s),n.headers.authorization=s,e.next=21,fetch(t,n);case 21:return i=e.sent,e.next=24,Z(i);case 27:return e.abrupt("return",Promise.reject(e.t0));case 28:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),ne="APPEND_MODAL_TYPE",re="APPEND_ERROR_MODAL_TYPE",ae="REMOVE_MODAL_TYPE",ce="GET_USER_REQUEST",se="GET_USER_SUCCESS",ie="GET_USER_FAILED",oe="SET_NEED_AUTH",le="LOGOUT_USER",de=function(e,t){return function(n){n({type:ce}),function(e,t){return $(A,{method:"POST",body:JSON.stringify({email:e,password:t}),headers:{"Content-Type":"application/json"}}).then((function(e){return ee(e.refreshToken,e.accessToken),e}))}(e,t).then((function(e){e&&e.success?n({type:se,data:e.user,accessToken:e.accessToken}):n({type:ie})})).catch((function(e){n({type:re,message:e.message})}))}},ue=function(){return function(e){$(P,{method:"POST",body:JSON.stringify({token:V("refreshToken")}),headers:{"Content-Type":"application/json"}}).then((function(t){t&&t.success&&e({type:le})})).catch((function(t){e({type:re,message:t.message})}))}},je=function(){return function(e){te(M,{method:"GET",headers:{"Content-Type":"application/json",authorization:V("accessToken")}}).then((function(t){t&&t.success?e({type:se,data:t.user}):e({type:ie})})).catch((function(t){"You should be authorised"===t.message&&e({type:oe})}))}},pe=function(e,t,n){return function(r){(function(e,t,n){return te(M,{method:"PATCH",body:JSON.stringify({email:e,password:t,name:n}),headers:{"Content-Type":"application/json",authorization:V("accessToken")}})})(e,t,n).then((function(e){e&&e.success?r({type:se,data:e.user}):r({type:ie})})).catch((function(e){"You should be authorised"===e.message&&r({type:le})}))}},me=function(e,t,n){return function(r){(function(e,t,n){return te(B,{method:"POST",body:JSON.stringify({email:e,password:t,name:n}),headers:{"Content-Type":"application/json"}}).then((function(e){return ee(e.refreshToken,e.accessToken),e}))})(e,t,n).then((function(e){e&&e.success?r({type:se,data:e.user,accessToken:e.accessToken}):r({type:ie})})).catch((function(e){r({type:re,message:e.message})}))}},be="GET_INGREDIENTS_REQUEST",Oe="GET_INGREDIENTS_SUCCESS",xe="GET_INGREDIENTS_FAILED",he=function(){return function(e){e({type:be}),$(S).then((function(t){t&&t.success?e({type:Oe,items:t.data}):e({type:xe})})).catch((function(t){e({type:re,message:t.message})}))}},_e=n(35),fe={ingredientsRequest:!1,ingredientsFailed:!1,ingredients:[]};var ge="ADD_INGREDIENT",ve="REMOVE_INGREDIENT",ye="MOVE_INGREDIENT",Ne={bun:null,ingredients:[],totalPrice:0};var Ie="ADD_INGREDIENT_DETAILS",Te="REMOVE_INGREDIENT_DETAILS",we=null;var Ee="SENT_ORDER_REQUEST",ke="SENT_ORDER_SUCCESS",Ce="SENT_ORDER_FAILED",Se=function(e){return function(t){t({type:Ee}),function(e){var t=V("accessToken"),n={"Content-Type":"application/json"};t&&(n=Object.assign(n,{authorization:t}));var r={method:"POST",body:JSON.stringify({ingredients:Object(T.a)(e)}),headers:n};return $(R,r)}(e).then((function(e){e&&e.success?(t({type:ke,name:e.name,number:e.order.number}),t({type:ne,modalType:c.ORDER})):t({type:Ce})})).catch((function(e){t({type:re,message:e.message})}))}},Re={orderRequest:!1,orderFailed:!1,orderData:{name:null,number:null}};var De={modalType:null,status:null,message:null};var Le={data:null,accessToken:null,needAuth:!1,userRequest:!1,userFailed:!1};var Ae,Pe="WS_CONNECTION_START",Be="WS_CONNECTION_SUCCESS",Ue="WS_CONNECTION_ERROR",Me="WS_GET_MESSAGE",Fe="WS_CLOSE_CONNECTION",Ge={wsInit:Pe,wsSendMessage:"WS_SEND_MESSAGE",onOpen:Be,onClose:Fe,onError:Ue,onMessage:Me},We={ordersRequest:!1,ordersFailed:!1,data:[]},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pe:return Object(W.a)(Object(W.a)({},e),{},{ordersRequest:!0});case Be:return Object(W.a)(Object(W.a)({},e),{},{ordersRequest:!1,ordersFailed:!1});case Ue:return Object(W.a)(Object(W.a)({},e),{},{ordersFailed:!0,ordersRequest:!1});case Me:return Object(W.a)(Object(W.a)({},e),{},{ordersFailed:!1,data:t.payload});default:return e}},qe=n(89),Ve=Object(_e.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case be:return Object(W.a)(Object(W.a)({},e),{},{ingredientsRequest:!0,ingredientsFailed:!1});case Oe:return Object(W.a)(Object(W.a)({},e),{},{ingredients:t.items,ingredientsRequest:!1});case xe:return Object(W.a)(Object(W.a)({},e),{},{ingredientsFailed:!0,ingredientsRequest:!1});default:return e}},constructor:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case ge:if(n.ingredient.type===s.BUN){var r=t.bun?t.totalPrice-2*t.bun.price:t.totalPrice;return Object(W.a)(Object(W.a)({},t),{},{bun:n.ingredient,totalPrice:r+2*n.ingredient.price})}return Object(W.a)(Object(W.a)({},t),{},{ingredients:[].concat(Object(T.a)(t.ingredients),[Object(W.a)(Object(W.a)({},X(n.ingredient)),{},{orderIndex:t.ingredients.length})]),totalPrice:t.totalPrice+n.ingredient.price});case ve:return t.ingredients.length?Object(W.a)(Object(W.a)({},t),{},{ingredients:Object(T.a)(t.ingredients.filter((function(e){return e.orderId!==n.ingredient.orderId}))),totalPrice:t.totalPrice-n.ingredient.price}):t;case ye:if(t.ingredients[n.newIndex].orderId===(null===(e=n.ingredient)||void 0===e?void 0:e.orderId))return t;var a=Object(T.a)(t.ingredients).filter((function(e){var t;return e.orderId!==(null===(t=n.ingredient)||void 0===t?void 0:t.orderId)})),c=[].concat(Object(T.a)(a.slice(0,n.newIndex)),[X(n.ingredient)],Object(T.a)(a.slice(n.newIndex,t.ingredients.length+1)));return Object(W.a)(Object(W.a)({},t),{},{ingredients:c.map((function(e,t){return Object(W.a)(Object(W.a)({},e),{},{orderIndex:t})}))});default:return t}},ingredientDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ie:return Object(W.a)({},t.ingredient);case Te:return null;default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:return Object(W.a)(Object(W.a)({},e),{},{orderRequest:!0,orderFailed:!1,orderData:{name:null,number:null}});case ke:return Object(W.a)(Object(W.a)({},e),{},{orderRequest:!1,orderData:{name:t.name,number:t.number}});case Ce:return Object(W.a)(Object(W.a)({},e),{},{orderFailed:!0,orderRequest:!1,orderData:{name:null,number:null}});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:return Object(W.a)(Object(W.a)({},e),{},{modalType:t.modalType});case re:return Object(W.a)(Object(W.a)({},e),{},{modalType:c.ERROR,status:null!==t&&void 0!==t&&t.status?t.status:e.status,message:null!==t&&void 0!==t&&t.message?t.message:e.message});case ae:return Object(W.a)(Object(W.a)({},e),{},{modalType:null,status:null});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(W.a)(Object(W.a)({},e),{},{userRequest:!0,userFailed:!1});case se:var n=Object(W.a)(Object(W.a)({},e),{},{data:t.data,userRequest:!1,needAuth:!1,accessToken:e.accessToken});return t.accessToken&&(n.accessToken=t.accessToken),n;case ie:return Object(W.a)(Object(W.a)({},e),{},{userFailed:!0,userRequest:!1});case oe:return Object(W.a)(Object(W.a)({},e),{},{needAuth:!0});case le:return z("refreshToken"),z("accessToken"),Object(W.a)(Object(W.a)({},e),{},{data:null,accessToken:null});default:return e}},orderList:He}),ze=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_e.c)(Object(_e.a)(qe.a,(Ae=Ge,function(e){var t=null;return function(n){return function(r){var a=e.dispatch,c=e.getState,s=r.type,i=r.payload,o=Ae.wsInit,l=Ae.wsSendMessage,d=Ae.onOpen,u=Ae.onClose,j=Ae.onError,p=Ae.onMessage,m=c().user;if(s===o&&m&&(t=new WebSocket(i.url)),t&&(t.onopen=function(e){a({type:d,payload:e})},t.onerror=function(e){a({type:j,payload:e})},t.onmessage=function(e){var t=e.data,n=JSON.parse(t);a({type:p,payload:null===n||void 0===n?void 0:n.orders})},t.onclose=function(e){a({type:u,payload:e})},s===l)){var b=Object(W.a)(Object(W.a)({},i),{},{token:m.accessToken});t.send(JSON.stringify(b))}n(r)}}}))),Je={ingredients:fe,constructor:Ne,ingredientDetails:we,order:Re,modal:De,user:Le},Qe=Object(_e.d)(Ve,Je,ze),Ye=j.b,Ke=j.c,Xe=n(45),Ze=n.n(Xe),$e=n(90),et=n.n($e),tt=function(e){var t=e.onClose,n=e.children;return Object(v.jsx)("div",{className:et.a.wrapper,onClick:t,children:n})},nt=document.getElementById("modal"),rt=function(e){var t=e.title,n=e.onClose,r=e.children,a=Object(O.g)();Object(o.useEffect)((function(){var e=function(e){"Escape"===e.key&&n(e)};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[n]);return u.a.createPortal(Object(v.jsx)(tt,{onClose:n,children:Object(v.jsxs)("div",{className:"pt-10 pl-10 pr-10 ".concat(Ze.a.wrapper),onClick:function(e){e.stopPropagation()},children:[Object(v.jsxs)("div",{className:Ze.a.header,children:[Object(v.jsx)("h3",{className:"text text_type_main-large ".concat(Ze.a.title),children:t}),Object(v.jsx)("button",{onClick:null!==n&&void 0!==n?n:function(){a.goBack()},className:"pt-5 ".concat(Ze.a.button),id:"close_modal",children:Object(v.jsx)(_.CloseIcon,{type:"primary"})})]}),r]})}),nt)},at=n(201),ct=n(100),st=n(91),it=n.n(st),ot=n(8),lt=n(68),dt=n.n(lt),ut=n(92),jt=n.n(ut),pt=n(202),mt=n(69),bt=n.n(mt),Ot=function(e){var t=[];return e.forEach((function(e){"bun"===e.type&&t.push(e._id),t.push(e._id)})),t},xt=function(e){var t=e.ingredient,n=Object(O.h)(),r=Ye(),a=t._id,c=Ke((function(e){return e.constructor})),s=c.ingredients,i=c.bun,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return"bun"===e.type?e._id===(null===i||void 0===i?void 0:i._id)?2:null:t.length?Ot(t).filter((function(t){return t===e._id})).length:0}(t,s),l=Object(pt.a)({type:"ingredient",item:t,collect:function(e){return{isDrag:e.isDragging()}}}),d=Object(ot.a)(l,2)[1];return Object(v.jsxs)(p.b,{ref:d,to:{pathname:"/ingredients/".concat(a),state:{background:n}},onClick:function(){r({type:Ie,ingredient:t})},className:h()(bt.a.wrapper,"mb-4"),children:[!!o&&Object(v.jsx)(_.Counter,{count:o,size:"default"}),Object(v.jsx)("img",{className:"ml-4 mr-4 mb-1",src:t.image,alt:"\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442: ".concat(t.name)}),Object(v.jsxs)("div",{className:h()(bt.a.priceBlock,"pt-1 pb-1"),children:[Object(v.jsx)("span",{className:"text text_type_digits-default mr-2",children:t.price}),Object(v.jsx)(_.CurrencyIcon,{type:"primary"})]}),Object(v.jsx)("span",{className:"text text_type_main-default pt-1",children:t.name})]},a)},ht=function(e){var t=e.title,n=e.ingredients;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("p",{className:"text text_type_main-medium",children:t}),Object(v.jsx)("div",{className:h()(jt.a.ingredientsBlock,"pt-6 pr-2 pb-7 pl-2"),children:n.map((function(e){return Object(v.jsx)(xt,{ingredient:e},e._id)}))})]})},_t=n(94),ft=n.n(_t),gt=function(e){var t=e.current,n=e.changeCurrentZone;return Object(v.jsxs)("div",{className:ft.a.wrapper,children:[Object(v.jsx)(_.Tab,{value:s.BUN,active:t===s.BUN,onClick:n,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(v.jsx)(_.Tab,{value:s.SAUCE,active:t===s.SAUCE,onClick:n,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(v.jsx)(_.Tab,{value:s.MAIN,active:t===s.MAIN,onClick:n,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]})},vt=function(e){var t=e.ingredients,n=Object(o.useState)(s.BUN),r=Object(ot.a)(n,2),a=r[0],c=r[1],i=Object(o.useRef)(null),l=Object(o.useRef)(null),d=Object(o.useRef)(null),u=function(e){return e.reduce((function(e,t){return Object(W.a)(Object(W.a)({},e),{},Object(G.a)({},t.type,[].concat(Object(T.a)(e[t.type]),[t])))}),{bun:[],main:[],sauce:[]})}(t);return Object(v.jsxs)("div",{className:dt.a.wrapper,children:[Object(v.jsx)("div",{className:"pt-10 pb-5",children:Object(v.jsx)("p",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"})}),Object(v.jsx)("div",{className:"pb-10",children:Object(v.jsx)(gt,{current:a,changeCurrentZone:function(e){var t,n,r;switch(e){case s.BUN:return void(null===(t=i.current)||void 0===t||t.scrollIntoView());case s.MAIN:return void(null===(n=d.current)||void 0===n||n.scrollIntoView());case s.SAUCE:return void(null===(r=l.current)||void 0===r||r.scrollIntoView());default:return}}})}),Object(v.jsx)("div",{className:dt.a.ingredientsBlock,onScroll:function(e){e.stopPropagation();var t=e.currentTarget.scrollTop+e.currentTarget.offsetTop,n=l.current&&i.current?(l.current.offsetTop-i.current.offsetTop)/2+i.current.offsetTop:0,r=d.current&&l.current?(d.current.offsetTop-l.current.offsetTop)/2+l.current.offsetTop:0;c(t<=n?s.BUN:t>=r?s.MAIN:s.SAUCE)},children:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{ref:i,children:Object(v.jsx)(ht,{title:"\u0411\u0443\u043b\u043a\u0438",ingredients:u.bun})}),Object(v.jsx)("div",{ref:l,children:Object(v.jsx)(ht,{title:"\u0421\u043e\u0443\u0441\u044b",ingredients:u.sauce})}),Object(v.jsx)("div",{ref:d,children:Object(v.jsx)(ht,{title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",ingredients:u.main})})]})})]})},yt=function(){var e=Ke((function(e){return e.ingredients})),t=e.ingredients;return e.ingredientsRequest&&!t.length?null:Object(v.jsx)(vt,{ingredients:t})},Nt=n(203),It=n(46),Tt=n.n(It),wt=n(95),Et=n.n(wt),kt=function(e){var t=e.ingredient,n=Ye(),r=Object(o.useRef)(null),a=Object(Nt.a)({accept:"movedIngredient",hover:function(e,a){var c;if(r.current){var s=e.orderIndex,i=t.orderIndex,o=null===(c=r.current)||void 0===c?void 0:c.getBoundingClientRect(),l=(o.bottom-o.top)/2,d=a.getClientOffset().y-o.top;s<i&&d<l||s>i&&d>l||(!function(e,t,r){n({type:ye,ingredient:e,oldIndex:t,newIndex:r})}(e,s,i),e.index=i)}}}),c=Object(ot.a)(a,2)[1],s=Object(pt.a)({type:"movedIngredient",item:function(){return t},collect:function(e){return{isDrag:e.isDragging()}}});return(0,Object(ot.a)(s,2)[1])(c(r)),Object(v.jsxs)("div",{ref:r,className:h()(Et.a.ingredient,"mr-2"),children:[Object(v.jsx)("div",{children:Object(v.jsx)(_.DragIcon,{type:"primary"})}),Object(v.jsx)(_.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image,handleClose:function(){return function(e){n({type:ve,ingredient:e})}(t)}})]})},Ct=n(96),St=["children"],Rt=function(e){var t=e.children,n=Object(Ct.a)(e,St),r=Ke((function(e){return e.user})),a=!!r.data,c=Ye(),s=Object(o.useState)(!1),i=Object(ot.a)(s,2),l=i[0],d=i[1],u=Object(o.useCallback)(Object(b.a)(Object(m.a)().mark((function e(){return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(je());case 2:d(!0);case 3:case"end":return e.stop()}}),e)}))),[c]);return Object(o.useEffect)((function(){a||r.needAuth?d(!0):u()}),[u,a,r.needAuth]),l?Object(v.jsx)(O.b,Object(W.a)(Object(W.a)({},n),{},{render:function(e){var n=e.location;return r.needAuth?Object(v.jsx)(O.a,{to:{pathname:"/login",state:{from:n}}}):t}})):Object(v.jsx)("p",{children:"\u0437\u0410\u0433\u0440\u0443\u0437\u043a\u0430"})},Dt=function(){var e=Ke((function(e){return e.user})),t=Ke((function(e){return e.constructor})),n=t.bun,r=t.ingredients,a=t.totalPrice,c=Ye(),s=Object(o.useState)(!1),i=Object(ot.a)(s,2),l=i[0],d=i[1],u=!!e.data,j=!!n,p=!!r.length,m=j&&p,b=Object(Nt.a)({accept:"ingredient",drop:function(e){!function(e){c({type:ge,ingredient:e})}(e)}}),O=Object(ot.a)(b,2)[1];return l?Object(v.jsx)(Rt,{}):Object(v.jsxs)("section",{className:Tt.a.wrapper,"data-ft-id":"constructor",ref:O,children:[Object(v.jsxs)("section",{className:h()(Tt.a.ingredientsBlock,"pt-25"),children:[!m&&Object(v.jsx)("p",{className:"text text_type_main-small mb-10 mt-5 ",children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0435\u0440\u0435\u043d\u0435\u0441\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \n                            ".concat(p?"":"\u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b","\n                            ").concat(p||j?"":" \u0438","\n                            ").concat(j?"":" \u0431\u0443\u043b\u043a\u0443"," \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430")}),!!a&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"mr-4",children:j&&Object(v.jsx)(_.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(n.name," (\u0432\u0435\u0440\u0445)"),price:n.price,thumbnail:n.image})}),Object(v.jsx)("div",{className:Tt.a.selectedBlock,children:!!r.length&&r.sort((function(e,t){return(null===e||void 0===e?void 0:e.orderIndex)-(null===t||void 0===t?void 0:t.orderIndex)})).map((function(e){return Object(v.jsx)(kt,{ingredient:e},e.orderId)}))}),Object(v.jsx)("div",{className:"mr-4",children:j&&Object(v.jsx)(_.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(n.name," (\u043d\u0438\u0437)"),price:n.price,thumbnail:n.image})})]})]}),Object(v.jsxs)("section",{className:h()(Tt.a.priceBlock,"mt-10 mr-4 mb-10"),children:[Object(v.jsxs)("div",{className:"mr-10",children:[Object(v.jsx)("span",{className:"text text_type_digits-medium mr-2",children:a}),Object(v.jsx)(_.CurrencyIcon,{type:"primary"})]}),Object(v.jsx)(_.Button,{onClick:function(){u?m&&c(Se(Ot([n].concat(Object(T.a)(r))))):(c({type:re,message:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437 \u043c\u043e\u0436\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}),d(!0))},type:"primary",disabled:!m,size:"large",htmlType:"button",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},Lt=function(){return Object(v.jsx)("main",{className:it.a.content,children:Object(v.jsx)(at.a,{backend:ct.a,children:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(yt,{}),Object(v.jsx)(Dt,{})]})})})},At=n(72),Pt=n.n(At),Bt=function(e){var t=e.className,n=e.label,r=e.lintText,a=e.to,c=e.replace;return Object(v.jsxs)("section",{className:t,children:[Object(v.jsx)("span",{className:h()(Pt.a.linkLabel,"text text_type_main-default mr-2"),children:n})," ",Object(v.jsx)(p.b,{className:h()(Pt.a.link,"text  text_type_main-default"),to:a,replace:c,children:r})]})};function Ut(e){var t=Object(o.useState)(e),n=Object(ot.a)(t,2),r=n[0],a=n[1];return{values:r,handleChange:function(e){var t=e.target,n=t.value,c=t.name;a(Object(W.a)(Object(W.a)({},r),{},Object(G.a)({},c,n)))},setValues:a}}var Mt=n(97),Ft=n.n(Mt),Gt=function(e){var t=e.children;return Object(v.jsx)("div",{className:Ft.a.wrapper,children:t})},Wt=function(e){var t=e.isAuth,n=Ye(),r=Object(O.h)().state,a=Ut({email:"",password:""}),c=a.values,s=a.handleChange,i=a.setValues,o=function(){var e=Object(b.a)(Object(m.a)().mark((function e(t){var r,a,s;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),i(Object(W.a)({},c)),r=t.target,a=r.password,s=r.email,e.next=5,n(de(s.value,a.value));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?Object(v.jsx)(O.a,{to:(null===r||void 0===r?void 0:r.from)||"/"}):Object(v.jsxs)(Gt,{children:[Object(v.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(v.jsxs)("form",{onSubmit:o,children:[Object(v.jsx)("section",{className:"mt-6",children:Object(v.jsx)(_.EmailInput,{onChange:s,value:c.email,name:"email",autoComplete:"on"})}),Object(v.jsx)("section",{className:"mt-6",children:Object(v.jsx)(_.PasswordInput,{onChange:s,value:c.password,name:"password",autoComplete:"on"})}),Object(v.jsx)("section",{className:"mt-6",children:Object(v.jsx)(_.Button,{type:"primary",size:"large",htmlType:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(v.jsx)(Bt,{className:"mt-20",label:"\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",to:"/register",lintText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",replace:!0}),Object(v.jsx)(Bt,{className:"mt-4",label:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",to:"/forgot-password",lintText:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",replace:!0})]})]})},Ht=function(){var e=Ke((function(e){return e.user}));return e?Object(v.jsx)(Wt,{isAuth:!!e.data}):null},qt=function(e){var t=e.isAuth,n=Ye(),r=Ut({name:"",email:"",password:""}),a=r.values,c=r.handleChange;return t?Object(v.jsx)(O.a,{to:{pathname:"/"}}):Object(v.jsxs)(Gt,{children:[Object(v.jsx)("p",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target,r=t.email,a=t.password,c=t.name;n(me(r.value,a.value,c.value))},children:[Object(v.jsx)("div",{className:"mt-6",children:Object(v.jsx)(_.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:c,value:a.name,name:"name",size:"default",autoComplete:"on"})}),Object(v.jsx)("div",{className:"mt-6",children:Object(v.jsx)(_.EmailInput,{onChange:c,value:a.email,name:"email",autoComplete:"on"})}),Object(v.jsx)("div",{className:"mt-6",children:Object(v.jsx)(_.PasswordInput,{onChange:c,value:a.password,name:"password",autoComplete:"off"})}),Object(v.jsx)("div",{className:"mt-6",children:Object(v.jsx)(_.Button,{type:"primary",size:"large",htmlType:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]}),Object(v.jsx)(Bt,{className:"mt-20",label:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",to:"/login",lintText:"\u0412\u043e\u0439\u0442\u0438",replace:!0})]})},Vt=function(){var e=Ke((function(e){return e.user}));return e?Object(v.jsx)(qt,{isAuth:!!e.data}):null},zt=function(e){switch(e){case i.EMAIL:return Object(v.jsx)(Qt,{});case i.PASSWORD:return Object(v.jsx)(Jt,{});default:return Object(v.jsx)(Qt,{})}},Jt=function(){var e,t=Object(O.g)(),n=!(null===(e=Object(O.h)().state)||void 0===e||!e.isEmailConfirm),r=Ut({token:"",password:""}),a=r.values,c=r.handleChange;return n?Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=e.target,r=n.password,a=n.token;(function(e,t){return $(F,{method:"POST",body:JSON.stringify({password:e,token:t}),headers:{"Content-Type":"application/json"}})})(r.value,a.value).then((function(){return t.replace({pathname:"/"})}))},children:[Object(v.jsx)("div",{className:"mt-6",children:Object(v.jsx)(_.PasswordInput,{onChange:c,value:a.password,name:"password",autoComplete:"off"})}),Object(v.jsx)("div",{className:"mt-6",children:Object(v.jsx)(_.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:c,value:a.token,name:"token",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",autoComplete:"off"})}),Object(v.jsx)("div",{className:"mt-6",children:Object(v.jsx)(_.Button,{type:"primary",size:"large",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}):Object(v.jsx)(O.a,{to:{pathname:"/forgot-password"}})},Qt=function(){var e=Object(O.g)(),t=Ut({email:""}),n=t.values,r=t.handleChange;return Object(v.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(e){return $(L,{method:"POST",body:JSON.stringify({email:e}),headers:{"Content-Type":"application/json"}})}(t.target.email.value).then((function(){return e.replace({pathname:"/reset-password"},{isEmailConfirm:!0})}))},children:[Object(v.jsx)("section",{className:"mt-6",children:Object(v.jsx)(_.EmailInput,{onChange:r,value:n.email,name:"email"})}),Object(v.jsx)("section",{className:"mt-6",children:Object(v.jsx)(_.Button,{type:"primary",size:"large",htmlType:"submit",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})})]})},Yt=function(e){var t=e.step;return e.isAuth?Object(v.jsx)(O.a,{to:{pathname:"/"}}):Object(v.jsxs)(Gt,{children:[Object(v.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),zt(t),Object(v.jsx)(Bt,{className:"mt-20",label:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",to:"/login",lintText:"\u0412\u043e\u0439\u0442\u0438",replace:!0})]})},Kt=function(e){var t=e.step,n=Ke((function(e){return e.user}));return n?Object(v.jsx)(Yt,{isAuth:!!n.data,step:t}):null},Xt=n(24),Zt=n.n(Xt),$t=function(e){var t=e.placeholder,n=e.onChange,r=e.value,a=e.type,c=e.name;return Object(v.jsx)("div",{className:h()(Zt.a.section,"mt-6"),children:Object(v.jsx)(_.Input,{type:a,placeholder:t,onChange:n,value:null!==r&&void 0!==r?r:"",name:c,size:"default",icon:"EditIcon",autoComplete:"off"})})},en=function(e){var t=e.data,n=Ye(),r=Ut({email:t.email,name:t.name,password:""}),a=r.values,c=r.handleChange,s=r.setValues,i=Object(o.useState)(!1),l=Object(ot.a)(i,2),d=l[0],u=l[1];return Object(o.useEffect)((function(){a.password||JSON.stringify(a)!==JSON.stringify(Object(W.a)(Object(W.a)({},t),{},{password:""}))?u(!0):u(!1)}),[t,a]),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("form",{className:"mt-25",children:[Object(v.jsx)($t,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:c,value:a.name,name:"name"}),Object(v.jsx)($t,{type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:c,value:a.email,name:"email"}),Object(v.jsx)($t,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:c,value:a.password,name:"password"}),Object(v.jsxs)("div",{className:h()(Zt.a.section,"mt-10"),children:[Object(v.jsx)(_.Button,{type:"secondary",size:"medium",htmlType:"reset",onClick:function(){s({email:t.email,name:t.name,password:""})},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(v.jsx)(_.Button,{type:"primary",size:"medium",htmlType:"submit",disabled:!d,onClick:function(){n(pe(a.email,a.password,a.name))},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})},tn=function(){var e=Ke((function(e){return e.user})),t=e.data;return!e.userRequest&&t?Object(v.jsx)(en,{data:t}):Object(v.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})},nn=n(25),rn=n.n(nn),an=n(22),cn=n.n(an),sn=function(e){var t=e.orderData,n=e.orderIngredients,a=Object(O.g)(),c=Object(O.h)(),s=Object(O.j)().path,i=K(n);return Object(v.jsxs)("section",{className:h()(cn.a.item,"pt-6 pr-6 pb-6 pl-6 mb-4"),onClick:function(){a.push("".concat(s,"/").concat(t._id),{background:c})},children:[Object(v.jsxs)("div",{className:h()(cn.a.top,"mb-6"),children:[Object(v.jsxs)("p",{className:"text text_type_digits-default",children:["#",t.number]}),Object(v.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:Y(t.createdAt)})]}),Object(v.jsx)("p",{className:"text text_type_main-medium mb-2",children:t.name}),Object(v.jsx)("p",{className:"text text_type_main-default mb-6",children:r[t.status]}),Object(v.jsxs)("div",{className:cn.a.bottom,children:[Object(v.jsx)("div",{className:cn.a.params,children:t.ingredients.map((function(e,n){return i[e]&&Object(v.jsx)(l.a.Fragment,{children:n<5?Object(v.jsx)("div",{className:cn.a.param,children:Object(v.jsx)("img",{className:cn.a.paramImg,src:i[e].image_mobile,alt:"\u0414\u043e\u0431\u0430\u0432\u043a\u0430: ".concat(i[e].name)})}):5===n?Object(v.jsx)("div",{className:h()(cn.a.param,"text text_type_main-default text_color_inactive"),children:t.ingredients.length>6?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("img",{className:h()(cn.a.paramImg,cn.a.lastParamImg),src:i[e].image_mobile,alt:"\u0414\u043e\u0431\u0430\u0432\u043a\u0430: ".concat(i[e].name)}),Object(v.jsxs)("span",{className:h()(cn.a.paramAdditionalValue,"text text_type_main-default"),children:["+",t.ingredients.length-6]})]}):Object(v.jsx)("img",{className:cn.a.paramImg,src:i[e].image_mobile,alt:"\u0414\u043e\u0431\u0430\u0432\u043a\u0430: ".concat(i[e].name)})},n):null},n)})).reverse()}),Object(v.jsxs)("div",{className:cn.a.price,children:[Object(v.jsx)("p",{className:"text text_type_digits-default mr-2",children:J(t.ingredients.map((function(e){return i[e]})))}),Object(v.jsx)(_.CurrencyIcon,{type:"primary"})]})]})]})},on=function(e){var t,n=e.orderData,r=n.filter((function(e){return"done"===e.status})),a=n.filter((function(e){return"pending"===e.status}));return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:rn.a.numbers,children:[Object(v.jsxs)("div",{className:rn.a.numbers_block,children:[Object(v.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b"}),Object(v.jsx)("div",{className:rn.a.numbers_blue,children:r.map((function(e,t){return t<10?Object(v.jsxs)("p",{className:"text text_type_digits-default mb-2",children:["#",e.number]},e._id):null}))})]}),!!a.length&&Object(v.jsxs)("div",{className:rn.a.numbers_block,children:[Object(v.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"}),Object(v.jsx)("div",{children:a.map((function(e){return Object(v.jsxs)("p",{className:"text text_type_digits-default mb-2",children:["#",e.number]},e._id)}))})]})]}),Object(v.jsxs)("div",{className:"mt-15",children:[Object(v.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(v.jsx)("p",{className:rn.a.result_text+" text text_type_digits-large",children:null===(t=n.sort()[0])||void 0===t?void 0:t.number})]}),Object(v.jsxs)("div",{className:"mt-15",children:[Object(v.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(v.jsx)("p",{className:rn.a.result_text+" text text_type_digits-large",children:n.filter((function(e){return Q(new Date(e.createdAt))<1})).length})]})]})},ln=function(e,t){return e.filter((function(e){return t.includes(e._id)}))},dn=function(e){var t=e.orderData,n=e.ingredients;return t.length?Object(v.jsx)(v.Fragment,{children:t.map((function(e,t){return Object(v.jsx)(sn,{orderData:e,orderIngredients:ln(n,e.ingredients)},"".concat(e._id).concat(t))}))}):null},un=function(e){var t=e.orderData,n=e.ingredients;return Object(v.jsxs)("div",{className:h()(rn.a.container,"pl-4 pr-4 mt-10"),children:[Object(v.jsx)("p",{className:"text text_type_main-large mt-10 mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(v.jsxs)("div",{className:rn.a.wrapper,children:[Object(v.jsx)("div",{className:h()(rn.a.orderList,"pr-2"),children:Object(v.jsx)(dn,{orderData:t,ingredients:n})}),Object(v.jsx)("div",{className:rn.a.orderTable,children:Object(v.jsx)(on,{orderData:t})})]})]})},jn=n(98),pn=n.n(jn),mn=n(27),bn=n.n(mn),On=function(e){var t=e.orderItem,n=e.ingredientList,a=e.isModal,c=new Set(t.ingredients);return Object(v.jsxs)("div",{className:h()(bn.a.wrapper,"mb-10",{"mt-10 ":!a}),children:[Object(v.jsxs)("p",{className:"text text_type_digits-default mb-10",children:["#",t.number]}),Object(v.jsx)("p",{className:"text text_type_main-medium mb-3",children:t.name}),Object(v.jsx)("p",{className:"text text_type_main-default mb-15",children:r[t.status]}),Object(v.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(v.jsx)("div",{className:h()(bn.a.ingredients,"pr-6 mb-10"),children:Object(T.a)(c).map((function(e,r){return Object(v.jsxs)("div",{className:h()(bn.a.ingredient,"mb-4"),children:[Object(v.jsxs)("div",{className:bn.a.title,children:[Object(v.jsx)("div",{className:h()(bn.a.icon,"mr-4"),children:Object(v.jsx)("img",{className:bn.a.iconImg,src:n[e].image_mobile,alt:"\u0414\u043e\u0431\u0430\u0432\u043a\u0430: ".concat(n[e].name)})}),Object(v.jsx)("p",{className:"text text_type_main-default",children:n[e].name})]}),Object(v.jsxs)("div",{className:bn.a.price,children:[Object(v.jsxs)("p",{className:"text text_type_digits-default mr-2",children:[t.ingredients.filter((function(t){return t===e})).length," x"," ",n[e].price]})," ",Object(v.jsx)(_.CurrencyIcon,{type:"primary"})]})]},r)}))}),Object(v.jsxs)("div",{className:bn.a.bottom,children:[Object(v.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:Y(t.createdAt)}),Object(v.jsxs)("div",{className:bn.a.price,children:[Object(v.jsx)("p",{className:"text text_type_digits-default mr-2",children:J(t.ingredients.map((function(e){return n[e]})))})," ",Object(v.jsx)(_.CurrencyIcon,{type:"primary"})]})]})]})},xn=function(e){var t=e.isModal,n=Ke((function(e){return{orderData:e.orderList.data,ingredients:e.ingredients.ingredients}})),r=n.orderData,a=n.ingredients,c=Object(O.i)().id;if(!r.length||!a.length)return null;var s=K(a),i=r.find((function(e){return e._id===c}));return Object(v.jsx)(On,{orderItem:i,ingredientList:s,isModal:!!t})},hn=function(e){var t=e.orderData,n=e.ingredients;return Object(v.jsx)("section",{className:h()(pn.a.orderList,"mt-15"),children:Object(v.jsx)(dn,{orderData:t,ingredients:n})})},_n=function(e){var t=e.isSinglePage,n=Ye(),r=Ke((function(e){var t,n,r;return{orderData:null===(t=e.orderList.data)||void 0===t?void 0:t.reverse(),ingredients:e.ingredients.ingredients,stateAccessToken:null===(n=e.user)||void 0===n||null===(r=n.accessToken)||void 0===r?void 0:r.split("Bearer ")[1]}})),a=r.orderData,c=r.ingredients,s=r.stateAccessToken,i="";return(i=function(){var e;return null===(e=V("accessToken"))||void 0===e?void 0:e.split("Bearer ")[1]}())||(i=s),Object(o.useEffect)((function(){return n({type:Pe,payload:{url:"".concat(C).concat(i)}}),function(){n({type:Fe})}}),[i,n]),null!==a&&void 0!==a&&a.length&&null!==c&&void 0!==c&&c.length?t?Object(v.jsx)(xn,{}):Object(v.jsx)(hn,{orderData:a,ingredients:c}):null},fn=function(){var e=Ye(),t=Object(O.g)(),n=Object(o.useCallback)((function(){t.replace({pathname:"/"})}),[t]),r=function(){var t=Object(b.a)(Object(m.a)().mark((function t(r){return Object(m.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.next=3,e(ue());case 3:return t.next=5,n();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsx)("section",{className:"mt-25",children:Object(v.jsx)(_.Button,{type:"primary",size:"large",htmlType:"button",onClick:r,children:"\u0412\u044b\u0439\u0442\u0438"})})},gn=function(e){var t=e.to,n=e.text;return Object(v.jsx)(p.c,{to:t,className:Zt.a.label,activeClassName:Zt.a.activeLabel,exact:!0,children:Object(v.jsx)("div",{className:Zt.a.labelWrapper,children:Object(v.jsx)("p",{className:"text text_type_main-medium",children:n})})})},vn=function(e){var t=e.children;return Object(v.jsxs)("div",{className:Zt.a.wrapper,children:[Object(v.jsxs)("div",{className:"mr-15 mt-25",children:[Object(v.jsx)(gn,{to:"/profile",text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(v.jsx)(gn,{to:"/profile/orders",text:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(v.jsx)(gn,{to:"/profile/logout",text:"\u0412\u044b\u0445\u043e\u0434"}),Object(v.jsx)("div",{className:h()(Zt.a.navHint,"mt-20"),children:Object(v.jsx)("p",{className:"text text_type_main-default",children:"\u0412\xa0\u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b\xa0\u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c\xa0\u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})})]}),Object(v.jsx)("div",{className:Zt.a.content,children:t})]})},yn=function(){return Object(v.jsx)("div",{className:Zt.a.wrapper,children:Object(v.jsxs)(O.d,{children:[Object(v.jsx)(O.b,{path:"/profile/orders/:id",exact:!0,children:Object(v.jsx)(_n,{isSinglePage:!0})}),Object(v.jsxs)(vn,{children:[Object(v.jsx)(O.b,{path:"/profile/orders",exact:!0,children:Object(v.jsx)(_n,{})}),Object(v.jsx)(O.b,{path:"/profile",exact:!0,children:Object(v.jsx)(tn,{})}),Object(v.jsx)(O.b,{path:"/profile/logout",exact:!0,children:Object(v.jsx)(fn,{})})]})]})})},Nn=n(31),In=n.n(Nn),Tn=function(e){var t=e.ingredient,n=e.isLoading,r=function(e){return n?"...":t[e]};return Object(v.jsxs)("div",{className:In.a.wrapper,children:[n?Object(v.jsx)("div",{className:In.a.loaderContainer,children:Object(v.jsx)("span",{className:In.a.loader})}):Object(v.jsx)("img",{src:t.image_large,alt:t.name}),Object(v.jsx)("p",{className:"text text_type_main-medium pt-3 pb-3",children:!n&&t.name}),Object(v.jsxs)("div",{className:h()("pt-5 pb-15",In.a.propertyList),children:[Object(v.jsxs)("div",{className:In.a.propertyItem,children:[Object(v.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-2",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(v.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:r("calories")})]}),Object(v.jsxs)("div",{className:In.a.propertyItem,children:[Object(v.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-2",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(v.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:r("proteins")})]}),Object(v.jsxs)("div",{className:In.a.propertyItem,children:[Object(v.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-2",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(v.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:r("fat")})]}),Object(v.jsxs)("div",{className:In.a.propertyItem,children:[Object(v.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-2",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(v.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:r("carbohydrates")})]})]})]})},wn=function(e){var t=e.ingredient,n=Object(o.useState)(!0),r=Object(ot.a)(n,2),a=r[0],c=r[1];return Object(o.useEffect)((function(){return c(null===t)}),[t]),Object(v.jsx)(Tn,{ingredient:t,isLoading:a})},En=function(){var e=Object(O.i)().ingredientId,t=Ke((function(e){return{ingredientDetails:e.ingredientDetails,ingredientList:e.ingredients}})),n=t.ingredientDetails,r=t.ingredientList;return Object(v.jsx)(wn,{ingredient:n||r.ingredients.filter((function(t){return t._id===e}))[0]})},kn=n(73),Cn=n.n(kn),Sn=n.p+"static/media/done.3ba9e5cd.svg",Rn=function(){var e=Ye(),t=Ke((function(e){return e.order})),n=t.orderRequest,r=t.orderData;return Object(v.jsx)(rt,{onClose:function(){e({type:ae})},children:Object(v.jsxs)("div",{className:Cn.a.wrapper,children:[Object(v.jsx)("span",{className:h()("text text_type_digits-large mt-3 mb-3",Cn.a.orderNumber),children:n?"Loading...":r.number}),Object(v.jsx)("p",{className:"text text_type_main-medium mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(v.jsx)("img",{src:Sn,alt:"\u041f\u0440\u0438\u043d\u044f\u0442\u043e"}),Object(v.jsx)("p",{className:"text text_type_main-default pt-15 pb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(v.jsx)("p",{className:"text text_type_main-default text_color_inactive pb-30",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})})},Dn=n(99),Ln=n.n(Dn),An=function(){var e=Ye(),t=Ke((function(e){return e.modal})),n=t.status,r=t.message;return Object(v.jsx)(rt,{onClose:function(){e({type:ae})},title:"\u041e\u0448\u0438\u0431\u043a\u0430",children:Object(v.jsxs)("div",{className:h()(Ln.a.wrapper,"pb-10"),children:[n&&Object(v.jsxs)("span",{className:h()("text text_type_main-medium mt-3 mb-3"),children:["\u0421\u0442\u0430\u0442\u0443\u0441:",n]}),r&&Object(v.jsxs)("span",{className:h()("text text_type_main-medium mt-3 mb-3"),children:["\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435:",r]})]})})},Pn=function(e){var t=e.isSinglePage,n=Ye(),r=Ke((function(e){return{orderData:e.orderList.data,ingredients:e.ingredients.ingredients}})),a=r.orderData,c=r.ingredients;return Object(o.useEffect)((function(){return n({type:Pe,payload:{url:k}}),function(){n({type:Fe})}}),[n]),a.length&&c.length?t?Object(v.jsx)(xn,{}):Object(v.jsx)(un,{orderData:a,ingredients:c}):null},Bn=function(e){switch(e){case c.ORDER:return Object(v.jsx)(Rn,{});case c.ERROR:return Object(v.jsx)(An,{});default:return null}};var Un=function(){var e=Ye(),t=Object(O.h)(),n=Object(O.g)(),r=Ke((function(e){return{modalType:e.modal.modalType,ingredientList:e.ingredients}})),a=r.modalType,c=r.ingredientList,s=t.state&&t.state.background,l=function(){n.goBack()},d=Object(o.useCallback)(Object(b.a)(Object(m.a)().mark((function t(){return Object(m.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(je());case 2:case"end":return t.stop()}}),t)}))),[e]);return Object(o.useEffect)((function(){d()}),[d]),Object(o.useEffect)((function(){e(he())}),[e]),c.ingredientsRequest?null:Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(I,{}),Object(v.jsxs)(O.d,{location:s||t,children:[Object(v.jsx)(O.b,{path:"/login",exact:!0,children:Object(v.jsx)(Ht,{})}),Object(v.jsx)(O.b,{path:"/register",exact:!0,children:Object(v.jsx)(Vt,{})}),Object(v.jsx)(O.b,{path:"/forgot-password",exact:!0,children:Object(v.jsx)(Kt,{step:i.EMAIL})}),Object(v.jsx)(O.b,{path:"/reset-password",exact:!0,children:Object(v.jsx)(Kt,{step:i.PASSWORD})}),Object(v.jsx)(Rt,{path:"/profile",children:Object(v.jsx)(yn,{})}),Object(v.jsx)(O.b,{path:"/feed",exact:!0,children:Object(v.jsx)(Pn,{})}),Object(v.jsx)(O.b,{path:"/feed/:id",exact:!0,children:Object(v.jsx)(Pn,{isSinglePage:!0})}),Object(v.jsx)(O.b,{path:"/ingredients/:ingredientId",exact:!0,children:Object(v.jsx)(En,{})}),Object(v.jsx)(O.b,{path:"/",exact:!0,children:Object(v.jsx)(Lt,{})})]}),"/"===(null===s||void 0===s?void 0:s.pathname)&&Object(v.jsx)(O.b,{path:"/ingredients/:ingredientId",children:Object(v.jsx)(rt,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",onClose:l,children:Object(v.jsx)(En,{})})}),["/feed","/profile/orders"].includes(null===s||void 0===s?void 0:s.pathname)&&Object(v.jsx)(O.b,{path:"".concat(s.pathname,"/:id"),children:Object(v.jsx)(rt,{title:"",onClose:l,children:Object(v.jsx)(xn,{isModal:!0})})}),a&&Bn(a)]})};u.a.render(Object(v.jsx)(l.a.StrictMode,{children:Object(v.jsx)(j.a,{store:Qe,children:Object(v.jsx)(p.a,{children:Object(v.jsx)(Un,{})})})}),document.getElementById("root"))},22:function(e,t,n){e.exports={page:"OrderListItem_page__3SQOz",wrapper:"OrderListItem_wrapper__2Ngkv",item:"OrderListItem_item__2_QOZ",top:"OrderListItem_top__2mSR2",bottom:"OrderListItem_bottom__3bHA6",params:"OrderListItem_params__1Kz4h",param:"OrderListItem_param__lzMkD",lastParamImg:"OrderListItem_lastParamImg__1wJGs",paramImg:"OrderListItem_paramImg__1D7Ug",paramAdditionalValue:"OrderListItem_paramAdditionalValue__1hpyA",price:"OrderListItem_price__1gTb3"}},24:function(e,t,n){e.exports={wrapper:"ProfilePage_wrapper__16Ffy",section:"ProfilePage_section__2XEYf",labelWrapper:"ProfilePage_labelWrapper__3fue_",label:"ProfilePage_label__2Dcad",activeLabel:"ProfilePage_activeLabel__3Hx0U",navHint:"ProfilePage_navHint__hNVJF",content:"ProfilePage_content__2SRVC"}},25:function(e,t,n){e.exports={container:"Feed_container__2jna5",wrapper:"Feed_wrapper__1KywM",orderList:"Feed_orderList__1s3Mf",orderTable:"Feed_orderTable__3D3kV",numbers:"Feed_numbers__1TmtE",numbers_block:"Feed_numbers_block__3In3g",numbers_blue:"Feed_numbers_blue__-q92t",result_text:"Feed_result_text__1Mh4j"}},27:function(e,t,n){e.exports={wrapper:"OrderItem_wrapper__2s20C",ingredients:"OrderItem_ingredients__38HhJ",ingredient:"OrderItem_ingredient__3IWIU",title:"OrderItem_title__2j85W",icon:"OrderItem_icon__BRZy7",iconImg:"OrderItem_iconImg__2BXur",bottom:"OrderItem_bottom__2G_R-",price:"OrderItem_price__2ZmCK"}},30:function(e,t,n){e.exports={wrapper:"AppHeader_wrapper__nI6-E",nav:"AppHeader_nav__1QIre",leftBlock:"AppHeader_leftBlock__3GkhU",centralBlock:"AppHeader_centralBlock__yv_5L",rightBlock:"AppHeader_rightBlock__1Vxhl",navLink:"AppHeader_navLink__1n2Kf",isActive:"AppHeader_isActive__1wLBO",text:"AppHeader_text__2lyGT"}},31:function(e,t,n){e.exports={wrapper:"IngredientDetails_wrapper__2uRcy",propertyList:"IngredientDetails_propertyList__2IdN9",propertyItem:"IngredientDetails_propertyItem__1cd9O",loaderContainer:"IngredientDetails_loaderContainer__15oyI",loader:"IngredientDetails_loader__3sYjd",mulShdSpin:"IngredientDetails_mulShdSpin__3Ki-f"}},45:function(e,t,n){e.exports={wrapper:"Modal_wrapper__28bi7",button:"Modal_button__3wE3W",title:"Modal_title__1SDXM",header:"Modal_header__1wG3O"}},46:function(e,t,n){e.exports={wrapper:"BurgerConstructor_wrapper__2TLps",ingredientsBlock:"BurgerConstructor_ingredientsBlock__h5Hcr",selectedBlock:"BurgerConstructor_selectedBlock__1SW6U",priceBlock:"BurgerConstructor_priceBlock__3BkFb"}},68:function(e,t,n){e.exports={wrapper:"BurgerIngredients_wrapper__1oWgY",ingredientsBlock:"BurgerIngredients_ingredientsBlock__CrgPr"}},69:function(e,t,n){e.exports={wrapper:"IngredientItem_wrapper__2IfnP",priceBlock:"IngredientItem_priceBlock__32x_X"}},72:function(e,t,n){e.exports={link:"AdditionalLink_link__G-hlR",linkLabel:"AdditionalLink_linkLabel__360VC"}},73:function(e,t,n){e.exports={wrapper:"OrderDetails_wrapper__12uSS",orderNumber:"OrderDetails_orderNumber__1VxLS"}},90:function(e,t,n){e.exports={wrapper:"ModalOverlay_wrapper__2kUDG"}},91:function(e,t,n){e.exports={content:"ConstructorPage_content__1Ddut"}},92:function(e,t,n){e.exports={ingredientsBlock:"IngredientsBlock_ingredientsBlock__2W_BW"}},94:function(e,t,n){e.exports={wrapper:"IngredientsTabs_wrapper__1ClY4"}},95:function(e,t,n){e.exports={ingredient:"ConstructorIngredient_ingredient__TFQAr"}},97:function(e,t,n){e.exports={wrapper:"SinglePageWrapper_wrapper__1Yv4v"}},98:function(e,t,n){e.exports={orderList:"Ordres_orderList__sc-M3"}},99:function(e,t,n){e.exports={wrapper:"ErrorModal_wrapper__32UQf"}}},[[195,1,2]]]);
//# sourceMappingURL=main.c62a715c.chunk.js.map