(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{110:function(e,t,n){},195:function(e,t,n){"use strict";n.r(t);var r,a,c,s,i,o=n(1),l=n.n(o),d=n(36),u=n.n(d),j=n(44),p=n(12),m=(n(110),n(23)),b=n(33),O=n(11),x=n(5),h=n.n(x),_=n(4),f=n(29),g=n.n(f);!function(e){e.created="\u0421\u043e\u0437\u0434\u0430\u043d",e.pending="\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f",e.done="\u0413\u043e\u0442\u043e\u0432"}(r||(r={})),function(e){e.CONSTRUCTOR="constructor",e.ORDER_QUEUE="orderQueue",e.LK="lk"}(a||(a={})),function(e){e.ERROR="error",e.ORDER="order"}(c||(c={})),function(e){e.BUN="bun",e.SAUCE="sauce",e.MAIN="main"}(s||(s={})),function(e){e.EMAIL="email",e.PASSWORD="password"}(i||(i={}));var v=n(0),y=function(e,t){switch(e){case a.CONSTRUCTOR:return Object(v.jsx)(_.BurgerIcon,{type:t?"primary":"secondary"});case a.ORDER_QUEUE:return Object(v.jsx)(_.ListIcon,{type:t?"primary":"secondary"});case a.LK:return Object(v.jsx)(_.ProfileIcon,{type:t?"primary":"secondary"})}},N=function(e){var t=e.to,n=e.text,r=e.type,a=t===Object(O.h)().pathname;return Object(v.jsxs)(p.c,{className:h()(g.a.navLink,"m-2 text text_type_main-default"),to:t,exact:!0,activeClassName:g.a.isActive,children:[y(r,a)," ",Object(v.jsx)("span",{className:h()(g.a.text,"ml-2"),children:n})]})},I=function(){return Object(v.jsx)("header",{className:h()(g.a.wrapper,"p-5"),children:Object(v.jsxs)("nav",{className:g.a.nav,children:[Object(v.jsxs)("section",{className:g.a.leftBlock,children:[Object(v.jsx)(N,{to:"/",text:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",type:a.CONSTRUCTOR}),Object(v.jsx)(N,{to:"/feed",text:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",type:a.ORDER_QUEUE})]}),Object(v.jsx)("section",{className:g.a.centralBlock,children:Object(v.jsx)(_.Logo,{})}),Object(v.jsx)("section",{className:g.a.rightBlock,children:Object(v.jsx)(N,{to:"/profile/orders",text:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",type:a.LK})})]})})},T=n(13),w="norma.nomoreparties.space",E=function(e,t){switch(e){case"HTTP":return"https://".concat(w,"/api/").concat(t);case"WS":return"wss://".concat(w,"/").concat(t)}},k=E("WS","orders/all"),C=E("WS","orders?token="),S=E("HTTP","ingredients"),R=E("HTTP","orders"),D=E("HTTP","auth"),L=E("HTTP","password-reset"),P=D+"/login",A=D+"/logout",B=D+"/register",U=D+"/token",F=D+"/user",M=L+"/reset",G=n(18),W=n(2),q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(n=Object(W.a)({path:"/"},n)).expires instanceof Date&&(n.expires=n.expires.toUTCString());var r=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var a in n){r+="; "+a;var c=n[a];!0!==c&&(r+="="+c)}document.cookie=r},H=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.\\+\-*:\/?!|^${}()\[\]])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},V=function(e){q(e,"",{"max-age":-1})},z=function(e){return e.reduce((function(e,t){return e+t.price}),0)},J=function(e){return((new Date).getTime()-e.getTime())/864e5},Q=function(e){var t,n=new Date(e),r=J(n);return t=r<1?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":r<2?"\u0412\u0447\u0435\u0440\u0430":"".concat(Math.ceil(r)," \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434"),"".concat(t," ").concat(n.toLocaleTimeString("ru-Ru",{hour:"numeric",minute:"numeric"}))},Y=function(e){return e.reduce((function(e,t){return Object(W.a)(Object(W.a)({},e),{},Object(G.a)({},t._id,t))}),{})},K=function(e){return Object(W.a)(Object(W.a)({},e),{},{orderId:e.orderId?e.orderId:Math.floor(Date.now()/100)})},X=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)})).catch((function(){return Promise.reject({message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"})}))};function Z(e,t){return fetch(e,t).then(X)}var $=function(e,t){q("accessToken",t),q("refreshToken",e)},ee=function(){var e=Object(b.a)(Object(m.a)().mark((function e(t,n){var r,a,c,s,i;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,n);case 3:return r=e.sent,e.next=6,X(r);case 6:case 24:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(0),"jwt expired"!==e.t0.message){e.next=27;break}return e.next=14,Z(U,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:H("refreshToken")})});case 14:return a=e.sent,c=a.refreshToken,s=a.accessToken,$(c,s),n.headers.authorization=s,e.next=21,fetch(t,n);case 21:return i=e.sent,e.next=24,X(i);case 27:return e.abrupt("return",Promise.reject(e.t0));case 28:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),te="APPEND_MODAL_TYPE",ne="APPEND_ERROR_MODAL_TYPE",re="REMOVE_MODAL_TYPE",ae="GET_USER_REQUEST",ce="GET_USER_SUCCESS",se="GET_USER_FAILED",ie="LOGOUT_USER",oe=function(e,t){return function(n){n({type:ae}),function(e,t){return Z(P,{method:"POST",body:JSON.stringify({email:e,password:t}),headers:{"Content-Type":"application/json"}}).then((function(e){return $(e.refreshToken,e.accessToken),e}))}(e,t).then((function(e){e&&e.success?n({type:ce,data:e.user,accessToken:e.accessToken}):n({type:se})})).catch((function(e){n({type:ne,message:e.message})}))}},le=function(){return function(e){Z(A,{method:"POST",body:JSON.stringify({token:H("refreshToken")}),headers:{"Content-Type":"application/json"}}).then((function(t){t&&t.success&&e({type:ie})})).catch((function(t){e({type:ne,message:t.message})}))}},de=function(){return function(e){ee(F,{method:"GET",headers:{"Content-Type":"application/json",authorization:H("accessToken")}}).then((function(t){t&&t.success?e({type:ce,data:t.user}):e({type:se})})).catch((function(t){"You should be authorised"===t.message&&e({type:ie})}))}},ue=function(e,t,n){return function(r){(function(e,t,n){return ee(F,{method:"PATCH",body:JSON.stringify({email:e,password:t,name:n}),headers:{"Content-Type":"application/json",authorization:H("accessToken")}})})(e,t,n).then((function(e){e&&e.success?r({type:ce,data:e.user}):r({type:se})})).catch((function(e){"You should be authorised"===e.message&&r({type:ie})}))}},je=function(e,t,n){return function(r){(function(e,t,n){return ee(B,{method:"POST",body:JSON.stringify({email:e,password:t,name:n}),headers:{"Content-Type":"application/json"}}).then((function(e){return $(e.refreshToken,e.accessToken),e}))})(e,t,n).then((function(e){e&&e.success?r({type:ce,data:e.user,accessToken:e.accessToken}):r({type:se})})).catch((function(e){r({type:ne,message:e.message})}))}},pe="GET_INGREDIENTS_REQUEST",me="GET_INGREDIENTS_SUCCESS",be="GET_INGREDIENTS_FAILED",Oe=function(){return function(e){e({type:pe}),Z(S).then((function(t){t&&t.success?e({type:me,items:t.data}):e({type:be})})).catch((function(t){e({type:ne,message:t.message})}))}},xe=n(34),he={ingredientsRequest:!1,ingredientsFailed:!1,ingredients:[]};var _e="ADD_INGREDIENT",fe="REMOVE_INGREDIENT",ge="MOVE_INGREDIENT",ve={bun:null,ingredients:[],totalPrice:0};var ye="ADD_INGREDIENT_DETAILS",Ne="REMOVE_INGREDIENT_DETAILS",Ie=null;var Te="SENT_ORDER_REQUEST",we="SENT_ORDER_SUCCESS",Ee="SENT_ORDER_FAILED",ke=function(e){return function(t){t({type:Te}),function(e){var t=H("accessToken"),n={"Content-Type":"application/json"};t&&(n=Object.assign(n,{authorization:t}));var r={method:"POST",body:JSON.stringify({ingredients:Object(T.a)(e)}),headers:n};return Z(R,r)}(e).then((function(e){e&&e.success?(t({type:we,name:e.name,number:e.order.number}),t({type:te,modalType:c.ORDER})):t({type:Ee})})).catch((function(e){t({type:ne,message:e.message})}))}},Ce={orderRequest:!1,orderFailed:!1,orderData:{name:null,number:null}};var Se={modalType:null,status:null,message:null};var Re={data:null,accessToken:null,userRequest:!1,userFailed:!1};var De="WS_CONNECTION_START",Le="WS_CONNECTION_SUCCESS",Pe="WS_CONNECTION_ERROR",Ae="WS_GET_MESSAGE",Be="WS_CLOSE_CONNECTION",Ue={ordersRequest:!1,ordersFailed:!1,data:[]},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case De:return Object(W.a)(Object(W.a)({},e),{},{ordersRequest:!0});case Le:return Object(W.a)(Object(W.a)({},e),{},{ordersRequest:!1,ordersFailed:!1});case Pe:return Object(W.a)(Object(W.a)({},e),{},{ordersFailed:!0,ordersRequest:!1});case Ae:return Object(W.a)(Object(W.a)({},e),{},{ordersFailed:!1,data:t.payload});default:return e}},Me=n(89),Ge=Object(xe.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return Object(W.a)(Object(W.a)({},e),{},{ingredientsRequest:!0,ingredientsFailed:!1});case me:return Object(W.a)(Object(W.a)({},e),{},{ingredients:t.items,ingredientsRequest:!1});case be:return Object(W.a)(Object(W.a)({},e),{},{ingredientsFailed:!0,ingredientsRequest:!1});default:return e}},constructor:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case _e:if(n.ingredient.type===s.BUN){var r=t.bun?t.totalPrice-2*t.bun.price:t.totalPrice;return Object(W.a)(Object(W.a)({},t),{},{bun:n.ingredient,totalPrice:r+2*n.ingredient.price})}return Object(W.a)(Object(W.a)({},t),{},{ingredients:[].concat(Object(T.a)(t.ingredients),[Object(W.a)(Object(W.a)({},K(n.ingredient)),{},{orderIndex:t.ingredients.length})]),totalPrice:t.totalPrice+n.ingredient.price});case fe:return t.ingredients.length?Object(W.a)(Object(W.a)({},t),{},{ingredients:Object(T.a)(t.ingredients.filter((function(e){return e.orderId!==n.ingredient.orderId}))),totalPrice:t.totalPrice-n.ingredient.price}):t;case ge:if(t.ingredients[n.newIndex].orderId===(null===(e=n.ingredient)||void 0===e?void 0:e.orderId))return t;var a=Object(T.a)(t.ingredients).filter((function(e){var t;return e.orderId!==(null===(t=n.ingredient)||void 0===t?void 0:t.orderId)})),c=[].concat(Object(T.a)(a.slice(0,n.newIndex)),[K(n.ingredient)],Object(T.a)(a.slice(n.newIndex,t.ingredients.length+1)));return Object(W.a)(Object(W.a)({},t),{},{ingredients:c.map((function(e,t){return Object(W.a)(Object(W.a)({},e),{},{orderIndex:t})}))});default:return t}},ingredientDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ye:return Object(W.a)({},t.ingredient);case Ne:return null;default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Te:return Object(W.a)(Object(W.a)({},e),{},{orderRequest:!0,orderFailed:!1,orderData:{name:null,number:null}});case we:return Object(W.a)(Object(W.a)({},e),{},{orderRequest:!1,orderData:{name:t.name,number:t.number}});case Ee:return Object(W.a)(Object(W.a)({},e),{},{orderFailed:!0,orderRequest:!1,orderData:{name:null,number:null}});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return Object(W.a)(Object(W.a)({},e),{},{modalType:t.modalType});case ne:return Object(W.a)(Object(W.a)({},e),{},{modalType:c.ERROR,status:null!==t&&void 0!==t&&t.status?t.status:e.status,message:null!==t&&void 0!==t&&t.message?t.message:e.message});case re:return Object(W.a)(Object(W.a)({},e),{},{modalType:null,status:null});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return Object(W.a)(Object(W.a)({},e),{},{userRequest:!0,userFailed:!1});case ce:var n=Object(W.a)(Object(W.a)({},e),{},{data:t.data,userRequest:!1,accessToken:e.accessToken});return t.accessToken&&(n.accessToken=t.accessToken),n;case se:return Object(W.a)(Object(W.a)({},e),{},{userFailed:!0,userRequest:!1});case ie:return V("refreshToken"),V("accessToken"),Object(W.a)(Object(W.a)({},e),{},{data:null,accessToken:null});default:return e}},orderList:Fe}),We=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||xe.c)(Object(xe.a)(Me.a),Object(xe.a)((function(e){var t=null;return function(n){return function(r){var a,c=e.dispatch,s=r.type,i=r.payload;s===De&&(t=new WebSocket(i.url)),s===Be&&(null===(a=t)||void 0===a||a.close()),t&&(t.onopen=function(e){c({type:Le,payload:e})},t.onerror=function(e){c({type:Pe,payload:e})},t.onmessage=function(e){var t=e.data,n=JSON.parse(t);c({type:Ae,payload:null===n||void 0===n?void 0:n.orders})},t.onclose=function(e){console.log("WS closed")},"WS_SEND_MESSAGE"===s&&t.send(JSON.stringify(i))),n(r)}}}))),qe={ingredients:he,constructor:ve,ingredientDetails:Ie,order:Ce,modal:Se,user:Re},He=Object(xe.d)(Ge,qe,We),Ve=j.b,ze=j.c,Je=n(45),Qe=n.n(Je),Ye=n(90),Ke=n.n(Ye),Xe=function(e){var t=e.onClose,n=e.children;return Object(v.jsx)("div",{className:Ke.a.wrapper,onClick:t,children:n})},Ze=document.getElementById("modal"),$e=function(e){var t=e.title,n=e.onClose,r=e.children,a=Object(O.g)();Object(o.useEffect)((function(){var e=function(e){"Escape"===e.key&&n(e)};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[n]);return u.a.createPortal(Object(v.jsx)(Xe,{onClose:n,children:Object(v.jsxs)("div",{className:"pt-10 pl-10 pr-10 ".concat(Qe.a.wrapper),onClick:function(e){e.stopPropagation()},children:[Object(v.jsxs)("div",{className:Qe.a.header,children:[Object(v.jsx)("h3",{className:"text text_type_main-large ".concat(Qe.a.title),children:t}),Object(v.jsx)("button",{onClick:null!==n&&void 0!==n?n:function(){a.goBack()},className:"pt-5 ".concat(Qe.a.button),id:"close_modal",children:Object(v.jsx)(_.CloseIcon,{type:"primary"})})]}),r]})}),Ze)},et=n(200),tt=n(100),nt=n(91),rt=n.n(nt),at=n(8),ct=n(68),st=n.n(ct),it=n(92),ot=n.n(it),lt=n(201),dt=n(69),ut=n.n(dt),jt=function(e){var t=[];return e.forEach((function(e){"bun"===e.type&&t.push(e._id),t.push(e._id)})),t},pt=function(e){var t=e.ingredient,n=Object(O.h)(),r=Ve(),a=t._id,c=ze((function(e){return e.constructor})),s=c.ingredients,i=c.bun,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return"bun"===e.type?e._id===(null===i||void 0===i?void 0:i._id)?2:null:t.length?jt(t).filter((function(t){return t===e._id})).length:0}(t,s),l=Object(lt.a)({type:"ingredient",item:t,collect:function(e){return{isDrag:e.isDragging()}}}),d=Object(at.a)(l,2)[1];return Object(v.jsxs)(p.b,{ref:d,to:{pathname:"/ingredients/".concat(a),state:{background:n}},onClick:function(){r({type:ye,ingredient:t})},className:h()(ut.a.wrapper,"mb-4"),children:[!!o&&Object(v.jsx)(_.Counter,{count:o,size:"default"}),Object(v.jsx)("img",{className:"ml-4 mr-4 mb-1",src:t.image,alt:"\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442: ".concat(t.name)}),Object(v.jsxs)("div",{className:h()(ut.a.priceBlock,"pt-1 pb-1"),children:[Object(v.jsx)("span",{className:"text text_type_digits-default mr-2",children:t.price}),Object(v.jsx)(_.CurrencyIcon,{type:"primary"})]}),Object(v.jsx)("span",{className:"text text_type_main-default pt-1",children:t.name})]},a)},mt=function(e){var t=e.title,n=e.ingredients;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("p",{className:"text text_type_main-medium",children:t}),Object(v.jsx)("div",{className:h()(ot.a.ingredientsBlock,"pt-6 pr-2 pb-7 pl-2"),children:n.map((function(e){return Object(v.jsx)(pt,{ingredient:e},e._id)}))})]})},bt=n(94),Ot=n.n(bt),xt=function(e){var t=e.current,n=e.changeCurrentZone;return Object(v.jsxs)("div",{className:Ot.a.wrapper,children:[Object(v.jsx)(_.Tab,{value:s.BUN,active:t===s.BUN,onClick:n,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(v.jsx)(_.Tab,{value:s.SAUCE,active:t===s.SAUCE,onClick:n,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(v.jsx)(_.Tab,{value:s.MAIN,active:t===s.MAIN,onClick:n,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]})},ht=function(e){var t=e.ingredients,n=Object(o.useState)(s.BUN),r=Object(at.a)(n,2),a=r[0],c=r[1],i=Object(o.useRef)(null),l=Object(o.useRef)(null),d=Object(o.useRef)(null),u=function(e){return e.reduce((function(e,t){return Object(W.a)(Object(W.a)({},e),{},Object(G.a)({},t.type,[].concat(Object(T.a)(e[t.type]),[t])))}),{bun:[],main:[],sauce:[]})}(t);return Object(v.jsxs)("div",{className:st.a.wrapper,children:[Object(v.jsx)("div",{className:"pt-10 pb-5",children:Object(v.jsx)("p",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"})}),Object(v.jsx)("div",{className:"pb-10",children:Object(v.jsx)(xt,{current:a,changeCurrentZone:function(e){var t,n,r;switch(e){case s.BUN:return void(null===(t=i.current)||void 0===t||t.scrollIntoView());case s.MAIN:return void(null===(n=d.current)||void 0===n||n.scrollIntoView());case s.SAUCE:return void(null===(r=l.current)||void 0===r||r.scrollIntoView());default:return}}})}),Object(v.jsx)("div",{className:st.a.ingredientsBlock,onScroll:function(e){e.stopPropagation();var t=e.currentTarget.scrollTop+e.currentTarget.offsetTop,n=l.current&&i.current?(l.current.offsetTop-i.current.offsetTop)/2+i.current.offsetTop:0,r=d.current&&l.current?(d.current.offsetTop-l.current.offsetTop)/2+l.current.offsetTop:0;c(t<=n?s.BUN:t>=r?s.MAIN:s.SAUCE)},children:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{ref:i,children:Object(v.jsx)(mt,{title:"\u0411\u0443\u043b\u043a\u0438",ingredients:u.bun})}),Object(v.jsx)("div",{ref:l,children:Object(v.jsx)(mt,{title:"\u0421\u043e\u0443\u0441\u044b",ingredients:u.sauce})}),Object(v.jsx)("div",{ref:d,children:Object(v.jsx)(mt,{title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",ingredients:u.main})})]})})]})},_t=function(){var e=ze((function(e){return e.ingredients})),t=e.ingredients;return e.ingredientsRequest&&!t.length?null:Object(v.jsx)(ht,{ingredients:t})},ft=n(202),gt=n(46),vt=n.n(gt),yt=n(95),Nt=n.n(yt),It=function(e){var t=e.ingredient,n=Ve(),r=Object(o.useRef)(null),a=Object(ft.a)({accept:"movedIngredient",hover:function(e,a){var c;if(r.current){var s=e.orderIndex,i=t.orderIndex,o=null===(c=r.current)||void 0===c?void 0:c.getBoundingClientRect(),l=(o.bottom-o.top)/2,d=a.getClientOffset().y-o.top;s<i&&d<l||s>i&&d>l||(!function(e,t,r){n({type:ge,ingredient:e,oldIndex:t,newIndex:r})}(e,s,i),e.index=i)}}}),c=Object(at.a)(a,2)[1],s=Object(lt.a)({type:"movedIngredient",item:function(){return t},collect:function(e){return{isDrag:e.isDragging()}}});return(0,Object(at.a)(s,2)[1])(c(r)),Object(v.jsxs)("div",{ref:r,className:h()(Nt.a.ingredient,"mr-2"),children:[Object(v.jsx)("div",{children:Object(v.jsx)(_.DragIcon,{type:"primary"})}),Object(v.jsx)(_.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image,handleClose:function(){return function(e){n({type:fe,ingredient:e})}(t)}})]})},Tt=n(96),wt=["children"],Et=function(e){var t=e.children,n=Object(Tt.a)(e,wt),r=!!ze((function(e){return e.user})).data;return Object(v.jsx)(O.b,Object(W.a)(Object(W.a)({},n),{},{render:function(e){var n=e.location;return r?t:Object(v.jsx)(O.a,{to:{pathname:"/login",state:{from:n}}})}}))},kt=function(){var e=ze((function(e){return e.user})),t=ze((function(e){return e.constructor})),n=t.bun,r=t.ingredients,a=t.totalPrice,c=Ve(),s=Object(o.useState)(!1),i=Object(at.a)(s,2),l=i[0],d=i[1],u=!!e.data,j=!!n,p=!!r.length,m=j&&p,b=Object(ft.a)({accept:"ingredient",drop:function(e){!function(e){c({type:_e,ingredient:e})}(e)}}),O=Object(at.a)(b,2)[1];return l?Object(v.jsx)(Et,{}):Object(v.jsxs)("section",{className:vt.a.wrapper,"data-ft-id":"constructor",ref:O,children:[Object(v.jsxs)("section",{className:h()(vt.a.ingredientsBlock,"pt-25"),children:[!m&&Object(v.jsx)("p",{className:"text text_type_main-small mb-10 mt-5 ",children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0435\u0440\u0435\u043d\u0435\u0441\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \n                            ".concat(p?"":"\u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b","\n                            ").concat(p||j?"":" \u0438","\n                            ").concat(j?"":" \u0431\u0443\u043b\u043a\u0443"," \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430")}),!!a&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"mr-4",children:j&&Object(v.jsx)(_.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(n.name," (\u0432\u0435\u0440\u0445)"),price:n.price,thumbnail:n.image})}),Object(v.jsx)("div",{className:vt.a.selectedBlock,children:!!r.length&&r.sort((function(e,t){return(null===e||void 0===e?void 0:e.orderIndex)-(null===t||void 0===t?void 0:t.orderIndex)})).map((function(e,t){return Object(v.jsx)(It,{ingredient:e},t)}))}),Object(v.jsx)("div",{className:"mr-4",children:j&&Object(v.jsx)(_.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(n.name," (\u043d\u0438\u0437)"),price:n.price,thumbnail:n.image})})]})]}),Object(v.jsxs)("section",{className:h()(vt.a.priceBlock,"mt-10 mr-4 mb-10"),children:[Object(v.jsxs)("div",{className:"mr-10",children:[Object(v.jsx)("span",{className:"text text_type_digits-medium mr-2",children:a}),Object(v.jsx)(_.CurrencyIcon,{type:"primary"})]}),Object(v.jsx)(_.Button,{onClick:function(){u?m&&c(ke(jt([n].concat(Object(T.a)(r))))):(c({type:ne,message:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437 \u043c\u043e\u0436\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}),d(!0))},type:"primary",disabled:!m,size:"large",htmlType:"button",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},Ct=function(){return Object(v.jsx)("main",{className:rt.a.content,children:Object(v.jsx)(et.a,{backend:tt.a,children:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(_t,{}),Object(v.jsx)(kt,{})]})})})},St=n(72),Rt=n.n(St),Dt=function(e){var t=e.className,n=e.label,r=e.lintText,a=e.to,c=e.replace;return Object(v.jsxs)("section",{className:t,children:[Object(v.jsx)("span",{className:h()(Rt.a.linkLabel,"text text_type_main-default mr-2"),children:n})," ",Object(v.jsx)(p.b,{className:h()(Rt.a.link,"text  text_type_main-default"),to:a,replace:c,children:r})]})};function Lt(e){var t=Object(o.useState)(e),n=Object(at.a)(t,2),r=n[0],a=n[1];return{values:r,handleChange:function(e){var t=e.target,n=t.value,c=t.name;a(Object(W.a)(Object(W.a)({},r),{},Object(G.a)({},c,n)))},setValues:a}}var Pt=n(97),At=n.n(Pt),Bt=function(e){var t=e.children;return Object(v.jsx)("div",{className:At.a.wrapper,children:t})},Ut=function(e){var t=e.isAuth,n=Ve(),r=Object(O.h)().state,a=Lt({email:"",password:""}),c=a.values,s=a.handleChange,i=a.setValues,o=function(){var e=Object(b.a)(Object(m.a)().mark((function e(t){var r,a,s;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),i(Object(W.a)({},c)),r=t.target,a=r.password,s=r.email,e.next=5,n(oe(s.value,a.value));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?Object(v.jsx)(O.a,{to:(null===r||void 0===r?void 0:r.from)||"/"}):Object(v.jsxs)(Bt,{children:[Object(v.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(v.jsxs)("form",{onSubmit:o,children:[Object(v.jsx)("section",{className:"mt-6",children:Object(v.jsx)(_.EmailInput,{onChange:s,value:c.email,name:"email",autoComplete:"on"})}),Object(v.jsx)("section",{className:"mt-6",children:Object(v.jsx)(_.PasswordInput,{onChange:s,value:c.password,name:"password",autoComplete:"on"})}),Object(v.jsx)("section",{className:"mt-6",children:Object(v.jsx)(_.Button,{type:"primary",size:"large",htmlType:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(v.jsx)(Dt,{className:"mt-20",label:"\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",to:"/register",lintText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",replace:!0}),Object(v.jsx)(Dt,{className:"mt-4",label:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",to:"/forgot-password",lintText:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",replace:!0})]})]})},Ft=function(){var e=ze((function(e){return e.user}));return e?Object(v.jsx)(Ut,{isAuth:!!e.data}):null},Mt=function(e){var t=e.isAuth,n=Ve(),r=Lt({name:"",email:"",password:""}),a=r.values,c=r.handleChange;return t?Object(v.jsx)(O.a,{to:{pathname:"/"}}):Object(v.jsxs)(Bt,{children:[Object(v.jsx)("p",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target,r=t.email,a=t.password,c=t.name;n(je(r.value,a.value,c.value))},children:[Object(v.jsx)("div",{className:"mt-6",children:Object(v.jsx)(_.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:c,value:a.name,name:"name",size:"default",autoComplete:"on"})}),Object(v.jsx)("div",{className:"mt-6",children:Object(v.jsx)(_.EmailInput,{onChange:c,value:a.email,name:"email",autoComplete:"on"})}),Object(v.jsx)("div",{className:"mt-6",children:Object(v.jsx)(_.PasswordInput,{onChange:c,value:a.password,name:"password",autoComplete:"off"})}),Object(v.jsx)("div",{className:"mt-6",children:Object(v.jsx)(_.Button,{type:"primary",size:"large",htmlType:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]}),Object(v.jsx)(Dt,{className:"mt-20",label:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",to:"/login",lintText:"\u0412\u043e\u0439\u0442\u0438",replace:!0})]})},Gt=function(){var e=ze((function(e){return e.user}));return e?Object(v.jsx)(Mt,{isAuth:!!e.data}):null},Wt=function(e){switch(e){case i.EMAIL:return Object(v.jsx)(Ht,{});case i.PASSWORD:return Object(v.jsx)(qt,{});default:return Object(v.jsx)(Ht,{})}},qt=function(){var e,t=Object(O.g)(),n=!(null===(e=Object(O.h)().state)||void 0===e||!e.isEmailConfirm),r=Lt({token:"",password:""}),a=r.values,c=r.handleChange;return n?Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=e.target,r=n.password,a=n.token;(function(e,t){return Z(M,{method:"POST",body:JSON.stringify({password:e,token:t}),headers:{"Content-Type":"application/json"}})})(r.value,a.value).then((function(){return t.replace({pathname:"/"})}))},children:[Object(v.jsx)("div",{className:"mt-6",children:Object(v.jsx)(_.PasswordInput,{onChange:c,value:a.password,name:"password",autoComplete:"off"})}),Object(v.jsx)("div",{className:"mt-6",children:Object(v.jsx)(_.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:c,value:a.token,name:"token",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",size:"default",autoComplete:"off"})}),Object(v.jsx)("div",{className:"mt-6",children:Object(v.jsx)(_.Button,{type:"primary",size:"large",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}):Object(v.jsx)(O.a,{to:{pathname:"/forgot-password"}})},Ht=function(){var e=Object(O.g)(),t=Lt({email:""}),n=t.values,r=t.handleChange;return Object(v.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(e){return Z(L,{method:"POST",body:JSON.stringify({email:e}),headers:{"Content-Type":"application/json"}})}(t.target.email.value).then((function(){return e.replace({pathname:"/reset-password"},{isEmailConfirm:!0})}))},children:[Object(v.jsx)("section",{className:"mt-6",children:Object(v.jsx)(_.EmailInput,{onChange:r,value:n.email,name:"email"})}),Object(v.jsx)("section",{className:"mt-6",children:Object(v.jsx)(_.Button,{type:"primary",size:"large",htmlType:"submit",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})})]})},Vt=function(e){var t=e.step;return e.isAuth?Object(v.jsx)(O.a,{to:{pathname:"/"}}):Object(v.jsxs)(Bt,{children:[Object(v.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Wt(t),Object(v.jsx)(Dt,{className:"mt-20",label:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",to:"/login",lintText:"\u0412\u043e\u0439\u0442\u0438",replace:!0})]})},zt=function(e){var t=e.step,n=ze((function(e){return e.user}));return n?Object(v.jsx)(Vt,{isAuth:!!n.data,step:t}):null},Jt=n(24),Qt=n.n(Jt),Yt=function(e){var t=e.placeholder,n=e.onChange,r=e.value,a=e.type,c=e.name;return Object(v.jsx)("div",{className:h()(Qt.a.section,"mt-6"),children:Object(v.jsx)(_.Input,{type:a,placeholder:t,onChange:n,value:null!==r&&void 0!==r?r:"",name:c,size:"default",icon:"EditIcon",autoComplete:"off"})})},Kt=function(){var e=Ve(),t=ze((function(e){return e.user})),n=t.data,r=t.userRequest,a=Lt({email:n.email,name:n.name,password:""}),c=a.values,s=a.handleChange,i=a.setValues,l=Object(o.useState)(!1),d=Object(at.a)(l,2),u=d[0],j=d[1];return Object(o.useEffect)((function(){c.password||JSON.stringify(c)!==JSON.stringify(Object(W.a)(Object(W.a)({},n),{},{password:""}))?j(!0):j(!1)}),[n,c]),r?null:Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("form",{className:"mt-25",children:[Object(v.jsx)(Yt,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:s,value:c.name,name:"name"}),Object(v.jsx)(Yt,{type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:s,value:c.email,name:"email"}),Object(v.jsx)(Yt,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:s,value:c.password,name:"password"}),Object(v.jsxs)("div",{className:h()(Qt.a.section,"mt-10"),children:[Object(v.jsx)(_.Button,{type:"secondary",size:"medium",htmlType:"reset",onClick:function(){i({email:n.email,name:n.name,password:""})},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(v.jsx)(_.Button,{type:"primary",size:"medium",htmlType:"submit",disabled:!u,onClick:function(){e(ue(c.email,c.password,c.name))},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})},Xt=n(25),Zt=n.n(Xt),$t=n(21),en=n.n($t),tn=function(e){var t=e.orderData,n=e.orderIngredients,a=Object(O.g)(),c=Object(O.h)(),s=Object(O.j)().path,i=Y(n);return Object(v.jsxs)("section",{className:h()(en.a.item,"pt-6 pr-6 pb-6 pl-6 mb-4"),onClick:function(){a.replace("".concat(s,"/").concat(t._id),{background:c})},children:[Object(v.jsxs)("div",{className:h()(en.a.top,"mb-6"),children:[Object(v.jsxs)("p",{className:"text text_type_digits-default",children:["#",t.number]}),Object(v.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:Q(t.createdAt)})]}),Object(v.jsx)("p",{className:"text text_type_main-medium mb-2",children:t.name}),Object(v.jsx)("p",{className:"text text_type_main-default mb-6",children:r[t.status]}),Object(v.jsxs)("div",{className:en.a.bottom,children:[Object(v.jsx)("div",{className:en.a.params,children:t.ingredients.map((function(e,n){return Object(v.jsx)(v.Fragment,{children:n<5?Object(v.jsx)("div",{className:en.a.param,children:Object(v.jsx)("img",{className:en.a.paramImg,src:i[e].image_mobile,alt:"\u0414\u043e\u0431\u0430\u0432\u043a\u0430: ".concat(i[e].name)})},n):5===n?Object(v.jsx)("div",{className:h()(en.a.param,"text text_type_main-default text_color_inactive"),children:t.ingredients.length>6?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("img",{className:h()(en.a.paramImg,en.a.lastParamImg),src:i[e].image_mobile,alt:"\u0414\u043e\u0431\u0430\u0432\u043a\u0430: ".concat(i[e].name)}),Object(v.jsxs)("span",{className:h()(en.a.paramAdditionalValue,"text text_type_main-default"),children:["+",t.ingredients.length-6]})]}):Object(v.jsx)("img",{className:en.a.paramImg,src:i[e].image_mobile,alt:"\u0414\u043e\u0431\u0430\u0432\u043a\u0430: ".concat(i[e].name)})},n):null})})).reverse()}),Object(v.jsxs)("div",{className:en.a.price,children:[Object(v.jsx)("p",{className:"text text_type_digits-default mr-2",children:z(t.ingredients.map((function(e){return i[e]})))}),Object(v.jsx)(_.CurrencyIcon,{type:"primary"})]})]})]})},nn=function(e){var t,n=e.orderData,r=n.filter((function(e){return"done"===e.status})),a=n.filter((function(e){return"pending"===e.status}));return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:Zt.a.numbers,children:[Object(v.jsxs)("div",{className:Zt.a.numbers_block,children:[Object(v.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b"}),Object(v.jsx)("div",{className:Zt.a.numbers_blue,children:r.map((function(e,t){return t<10?Object(v.jsxs)("p",{className:"text text_type_digits-default mb-2",children:["#",e.number]},e._id):null}))})]}),!!a.length&&Object(v.jsxs)("div",{className:Zt.a.numbers_block,children:[Object(v.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"}),Object(v.jsx)("div",{children:a.map((function(e){return Object(v.jsxs)("p",{className:"text text_type_digits-default mb-2",children:["#",e.number]},e._id)}))})]})]}),Object(v.jsxs)("div",{className:"mt-15",children:[Object(v.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(v.jsx)("p",{className:Zt.a.result_text+" text text_type_digits-large",children:null===(t=n.sort()[0])||void 0===t?void 0:t.number})]}),Object(v.jsxs)("div",{className:"mt-15",children:[Object(v.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(v.jsx)("p",{className:Zt.a.result_text+" text text_type_digits-large",children:n.filter((function(e){return J(new Date(e.createdAt))<1})).length})]})]})},rn=function(e,t){return e.filter((function(e){return t.includes(e._id)}))},an=function(e){var t=e.orderData,n=e.ingredients;return t.length?Object(v.jsx)(v.Fragment,{children:t.map((function(e,t){return Object(v.jsx)(tn,{orderData:e,orderIngredients:rn(n,e.ingredients)},"".concat(e._id).concat(t))}))}):null},cn=function(e){var t=e.orderData,n=e.ingredients;return Object(v.jsxs)("div",{className:h()(Zt.a.container,"pl-4 pr-4 mt-10"),children:[Object(v.jsx)("p",{className:"text text_type_main-large mt-10 mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(v.jsxs)("div",{className:Zt.a.wrapper,children:[Object(v.jsx)("div",{className:h()(Zt.a.orderList,"pr-2"),children:Object(v.jsx)(an,{orderData:t,ingredients:n})}),Object(v.jsx)("div",{className:Zt.a.orderTable,children:Object(v.jsx)(nn,{orderData:t})})]})]})},sn=n(98),on=n.n(sn),ln=n(26),dn=n.n(ln),un=function(e){var t=e.orderItem,n=e.ingredientList,a=e.isModal,c=new Set(t.ingredients);return Object(v.jsxs)("div",{className:h()(dn.a.wrapper,"mb-10",{"mt-10 ":!a}),children:[Object(v.jsxs)("p",{className:"text text_type_digits-default mb-10",children:["#",t.number]}),Object(v.jsx)("p",{className:"text text_type_main-medium mb-3",children:t.name}),Object(v.jsx)("p",{className:"text text_type_main-default mb-15",children:r[t.status]}),Object(v.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(v.jsx)("div",{className:h()(dn.a.ingredients,"pr-6 mb-10"),children:Object(T.a)(c).map((function(e,r){return Object(v.jsxs)("div",{className:h()(dn.a.ingredient,"mb-4"),children:[Object(v.jsxs)("div",{className:dn.a.title,children:[Object(v.jsx)("div",{className:h()(dn.a.icon,"mr-4"),children:Object(v.jsx)("img",{className:dn.a.iconImg,src:n[e].image_mobile,alt:"\u0414\u043e\u0431\u0430\u0432\u043a\u0430: ".concat(n[e].name)})}),Object(v.jsx)("p",{className:"text text_type_main-default",children:n[e].name})]}),Object(v.jsxs)("div",{className:dn.a.price,children:[Object(v.jsxs)("p",{className:"text text_type_digits-default mr-2",children:[t.ingredients.filter((function(t){return t===e})).length," x"," ",n[e].price]})," ",Object(v.jsx)(_.CurrencyIcon,{type:"primary"})]})]},r)}))}),Object(v.jsxs)("div",{className:dn.a.bottom,children:[Object(v.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:Q(t.createdAt)}),Object(v.jsxs)("div",{className:dn.a.price,children:[Object(v.jsx)("p",{className:"text text_type_digits-default mr-2",children:z(t.ingredients.map((function(e){return n[e]})))})," ",Object(v.jsx)(_.CurrencyIcon,{type:"primary"})]})]})]})},jn=function(e){var t=e.isModal,n=ze((function(e){return{orderData:e.orderList.data,ingredients:e.ingredients.ingredients}})),r=n.orderData,a=n.ingredients,c=Object(O.i)().id;if(!r.length||!a.length)return null;var s=Y(a),i=r.find((function(e){return e._id===c}));return Object(v.jsx)(un,{orderItem:i,ingredientList:s,isModal:!!t})},pn=function(e){var t=e.orderData,n=e.ingredients;return Object(v.jsx)("section",{className:h()(on.a.orderList,"mt-15"),children:Object(v.jsx)(an,{orderData:t,ingredients:n})})},mn=function(e){var t=e.isSinglePage,n=Ve(),r=ze((function(e){var t,n,r;return{orderData:null===(t=e.orderList.data)||void 0===t?void 0:t.reverse(),ingredients:e.ingredients.ingredients,stateAccessToken:null===(n=e.user)||void 0===n||null===(r=n.accessToken)||void 0===r?void 0:r.split("Bearer ")[1]}})),a=r.orderData,c=r.ingredients,s=r.stateAccessToken,i="";return(i=function(){var e;return null===(e=H("accessToken"))||void 0===e?void 0:e.split("Bearer ")[1]}())||(i=s),Object(o.useEffect)((function(){return n({type:De,payload:{url:"".concat(C).concat(i)}}),function(){n({type:Be})}}),[i,n]),null!==a&&void 0!==a&&a.length&&null!==c&&void 0!==c&&c.length?t?Object(v.jsx)(jn,{}):Object(v.jsx)(pn,{orderData:a,ingredients:c}):null},bn=function(){var e=Ve(),t=Object(O.g)(),n=Object(o.useCallback)((function(){t.replace({pathname:"/"})}),[t]),r=function(){var t=Object(b.a)(Object(m.a)().mark((function t(r){return Object(m.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.next=3,e(le());case 3:return t.next=5,n();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsx)("section",{className:"mt-25",children:Object(v.jsx)(_.Button,{type:"primary",size:"large",htmlType:"button",onClick:r,children:"\u0412\u044b\u0439\u0442\u0438"})})},On=function(e){var t=e.to,n=e.text;return Object(v.jsx)(p.c,{to:t,className:Qt.a.label,activeClassName:Qt.a.activeLabel,exact:!0,children:Object(v.jsx)("div",{className:Qt.a.labelWrapper,children:Object(v.jsx)("p",{className:"text text_type_main-medium",children:n})})})},xn=function(e){var t=e.children;return Object(v.jsxs)("div",{className:Qt.a.wrapper,children:[Object(v.jsxs)("div",{className:"mr-15 mt-25",children:[Object(v.jsx)(On,{to:"/profile",text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(v.jsx)(On,{to:"/profile/orders",text:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(v.jsx)(On,{to:"/profile/logout",text:"\u0412\u044b\u0445\u043e\u0434"}),Object(v.jsx)("div",{className:h()(Qt.a.navHint,"mt-20"),children:Object(v.jsx)("p",{className:"text text_type_main-default",children:"\u0412\xa0\u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b\xa0\u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c\xa0\u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})})]}),Object(v.jsx)("div",{className:Qt.a.content,children:t})]})},hn=function(){return Object(v.jsx)("div",{className:Qt.a.wrapper,children:Object(v.jsxs)(O.d,{children:[Object(v.jsx)(O.b,{path:"/profile/orders/:id",exact:!0,children:Object(v.jsx)(mn,{isSinglePage:!0})}),Object(v.jsxs)(xn,{children:[Object(v.jsx)(O.b,{path:"/profile/orders",exact:!0,children:Object(v.jsx)(mn,{})}),Object(v.jsx)(O.b,{path:"/profile",exact:!0,children:Object(v.jsx)(Kt,{})}),Object(v.jsx)(O.b,{path:"/profile/logout",exact:!0,children:Object(v.jsx)(bn,{})})]})]})})},_n=n(30),fn=n.n(_n),gn=function(e){var t=e.ingredient,n=e.isLoading,r=function(e){return n?"...":t[e]};return Object(v.jsxs)("div",{className:fn.a.wrapper,children:[n?Object(v.jsx)("div",{className:fn.a.loaderContainer,children:Object(v.jsx)("span",{className:fn.a.loader})}):Object(v.jsx)("img",{src:t.image_large,alt:t.name}),Object(v.jsx)("p",{className:"text text_type_main-medium pt-3 pb-3",children:!n&&t.name}),Object(v.jsxs)("div",{className:h()("pt-5 pb-15",fn.a.propertyList),children:[Object(v.jsxs)("div",{className:fn.a.propertyItem,children:[Object(v.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-2",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(v.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:r("calories")})]}),Object(v.jsxs)("div",{className:fn.a.propertyItem,children:[Object(v.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-2",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(v.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:r("proteins")})]}),Object(v.jsxs)("div",{className:fn.a.propertyItem,children:[Object(v.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-2",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(v.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:r("fat")})]}),Object(v.jsxs)("div",{className:fn.a.propertyItem,children:[Object(v.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-2",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(v.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:r("carbohydrates")})]})]})]})},vn=function(e){var t=e.ingredient,n=Object(o.useState)(!0),r=Object(at.a)(n,2),a=r[0],c=r[1];return Object(o.useEffect)((function(){return c(null===t)}),[t]),Object(v.jsx)(gn,{ingredient:t,isLoading:a})},yn=function(){var e=Object(O.i)().ingredientId,t=ze((function(e){return{ingredientDetails:e.ingredientDetails,ingredientList:e.ingredients}})),n=t.ingredientDetails,r=t.ingredientList;return Object(v.jsx)(vn,{ingredient:n||r.ingredients.filter((function(t){return t._id===e}))[0]})},Nn=n(73),In=n.n(Nn),Tn=n.p+"static/media/done.3ba9e5cd.svg",wn=function(){var e=Ve(),t=ze((function(e){return e.order})),n=t.orderRequest,r=t.orderData;return Object(v.jsx)($e,{onClose:function(){e({type:re})},children:Object(v.jsxs)("div",{className:In.a.wrapper,children:[Object(v.jsx)("span",{className:h()("text text_type_digits-large mt-3 mb-3",In.a.orderNumber),children:n?"Loading...":r.number}),Object(v.jsx)("p",{className:"text text_type_main-medium mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(v.jsx)("img",{src:Tn,alt:"\u041f\u0440\u0438\u043d\u044f\u0442\u043e"}),Object(v.jsx)("p",{className:"text text_type_main-default pt-15 pb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(v.jsx)("p",{className:"text text_type_main-default text_color_inactive pb-30",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})})},En=n(99),kn=n.n(En),Cn=function(){var e=Ve(),t=ze((function(e){return e.modal})),n=t.status,r=t.message;return Object(v.jsx)($e,{onClose:function(){e({type:re})},title:"\u041e\u0448\u0438\u0431\u043a\u0430",children:Object(v.jsxs)("div",{className:h()(kn.a.wrapper,"pb-10"),children:[n&&Object(v.jsxs)("span",{className:h()("text text_type_main-medium mt-3 mb-3"),children:["\u0421\u0442\u0430\u0442\u0443\u0441:",n]}),r&&Object(v.jsxs)("span",{className:h()("text text_type_main-medium mt-3 mb-3"),children:["\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435:",r]})]})})},Sn=function(e){var t=e.isSinglePage,n=Ve(),r=ze((function(e){return{orderData:e.orderList.data,ingredients:e.ingredients.ingredients}})),a=r.orderData,c=r.ingredients;return Object(o.useEffect)((function(){return n({type:De,payload:{url:k}}),function(){n({type:Be})}}),[n]),a.length&&c.length?t?Object(v.jsx)(jn,{}):Object(v.jsx)(cn,{orderData:a,ingredients:c}):null},Rn=function(e){switch(e){case c.ORDER:return Object(v.jsx)(wn,{});case c.ERROR:return Object(v.jsx)(Cn,{});default:return null}};var Dn=function(){var e=Ve(),t=Object(O.h)(),n=Object(O.g)(),r=ze((function(e){return{modalType:e.modal.modalType,ingredientList:e.ingredients}})),a=r.modalType,c=r.ingredientList,s=t.state&&t.state.background,l=function(){n.goBack()},d=Object(o.useCallback)(Object(b.a)(Object(m.a)().mark((function t(){return Object(m.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(de());case 2:case"end":return t.stop()}}),t)}))),[e]);return Object(o.useEffect)((function(){d()}),[d]),Object(o.useEffect)((function(){e(Oe())}),[e]),c.ingredientsRequest?null:Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(I,{}),Object(v.jsxs)(O.d,{location:s||t,children:[Object(v.jsx)(O.b,{path:"/login",exact:!0,children:Object(v.jsx)(Ft,{})}),Object(v.jsx)(O.b,{path:"/register",exact:!0,children:Object(v.jsx)(Gt,{})}),Object(v.jsx)(O.b,{path:"/forgot-password",exact:!0,children:Object(v.jsx)(zt,{step:i.EMAIL})}),Object(v.jsx)(O.b,{path:"/reset-password",exact:!0,children:Object(v.jsx)(zt,{step:i.PASSWORD})}),Object(v.jsx)(Et,{path:"/profile",children:Object(v.jsx)(hn,{})}),Object(v.jsx)(O.b,{path:"/feed",exact:!0,children:Object(v.jsx)(Sn,{})}),Object(v.jsx)(O.b,{path:"/feed/:id",exact:!0,children:Object(v.jsx)(Sn,{isSinglePage:!0})}),Object(v.jsx)(O.b,{path:"/ingredients/:ingredientId",exact:!0,children:Object(v.jsx)(yn,{})}),Object(v.jsx)(O.b,{path:"/",exact:!0,children:Object(v.jsx)(Ct,{})})]}),"/"===(null===s||void 0===s?void 0:s.pathname)&&Object(v.jsx)(O.b,{path:"/ingredients/:ingredientId",children:Object(v.jsx)($e,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",onClose:l,children:Object(v.jsx)(yn,{})})}),["/feed","/profile/orders"].includes(null===s||void 0===s?void 0:s.pathname)&&Object(v.jsx)(O.b,{path:"".concat(s.pathname,"/:id"),children:Object(v.jsx)($e,{title:"",onClose:l,children:Object(v.jsx)(jn,{isModal:!0})})}),a&&Rn(a)]})};u.a.render(Object(v.jsx)(l.a.StrictMode,{children:Object(v.jsx)(j.a,{store:He,children:Object(v.jsx)(p.a,{children:Object(v.jsx)(Dn,{})})})}),document.getElementById("root"))},21:function(e,t,n){e.exports={page:"OrderListItem_page__3SQOz",wrapper:"OrderListItem_wrapper__2Ngkv",item:"OrderListItem_item__2_QOZ",top:"OrderListItem_top__2mSR2",bottom:"OrderListItem_bottom__3bHA6",params:"OrderListItem_params__1Kz4h",param:"OrderListItem_param__lzMkD",lastParamImg:"OrderListItem_lastParamImg__1wJGs",paramImg:"OrderListItem_paramImg__1D7Ug",paramAdditionalValue:"OrderListItem_paramAdditionalValue__1hpyA",price:"OrderListItem_price__1gTb3"}},24:function(e,t,n){e.exports={wrapper:"ProfilePage_wrapper__16Ffy",section:"ProfilePage_section__2XEYf",labelWrapper:"ProfilePage_labelWrapper__3fue_",label:"ProfilePage_label__2Dcad",activeLabel:"ProfilePage_activeLabel__3Hx0U",navHint:"ProfilePage_navHint__hNVJF",content:"ProfilePage_content__2SRVC"}},25:function(e,t,n){e.exports={container:"Feed_container__2jna5",wrapper:"Feed_wrapper__1KywM",orderList:"Feed_orderList__1s3Mf",orderTable:"Feed_orderTable__3D3kV",numbers:"Feed_numbers__1TmtE",numbers_block:"Feed_numbers_block__3In3g",numbers_blue:"Feed_numbers_blue__-q92t",result_text:"Feed_result_text__1Mh4j"}},26:function(e,t,n){e.exports={wrapper:"OrderItem_wrapper__2s20C",ingredients:"OrderItem_ingredients__38HhJ",ingredient:"OrderItem_ingredient__3IWIU",title:"OrderItem_title__2j85W",icon:"OrderItem_icon__BRZy7",iconImg:"OrderItem_iconImg__2BXur",bottom:"OrderItem_bottom__2G_R-",price:"OrderItem_price__2ZmCK"}},29:function(e,t,n){e.exports={wrapper:"AppHeader_wrapper__nI6-E",nav:"AppHeader_nav__1QIre",leftBlock:"AppHeader_leftBlock__3GkhU",centralBlock:"AppHeader_centralBlock__yv_5L",rightBlock:"AppHeader_rightBlock__1Vxhl",navLink:"AppHeader_navLink__1n2Kf",isActive:"AppHeader_isActive__1wLBO",text:"AppHeader_text__2lyGT"}},30:function(e,t,n){e.exports={wrapper:"IngredientDetails_wrapper__2uRcy",propertyList:"IngredientDetails_propertyList__2IdN9",propertyItem:"IngredientDetails_propertyItem__1cd9O",loaderContainer:"IngredientDetails_loaderContainer__15oyI",loader:"IngredientDetails_loader__3sYjd",mulShdSpin:"IngredientDetails_mulShdSpin__3Ki-f"}},45:function(e,t,n){e.exports={wrapper:"Modal_wrapper__28bi7",button:"Modal_button__3wE3W",title:"Modal_title__1SDXM",header:"Modal_header__1wG3O"}},46:function(e,t,n){e.exports={wrapper:"BurgerConstructor_wrapper__2TLps",ingredientsBlock:"BurgerConstructor_ingredientsBlock__h5Hcr",selectedBlock:"BurgerConstructor_selectedBlock__1SW6U",priceBlock:"BurgerConstructor_priceBlock__3BkFb"}},68:function(e,t,n){e.exports={wrapper:"BurgerIngredients_wrapper__1oWgY",ingredientsBlock:"BurgerIngredients_ingredientsBlock__CrgPr"}},69:function(e,t,n){e.exports={wrapper:"IngredientItem_wrapper__2IfnP",priceBlock:"IngredientItem_priceBlock__32x_X"}},72:function(e,t,n){e.exports={link:"AdditionalLink_link__G-hlR",linkLabel:"AdditionalLink_linkLabel__360VC"}},73:function(e,t,n){e.exports={wrapper:"OrderDetails_wrapper__12uSS",orderNumber:"OrderDetails_orderNumber__1VxLS"}},90:function(e,t,n){e.exports={wrapper:"ModalOverlay_wrapper__2kUDG"}},91:function(e,t,n){e.exports={content:"ConstructorPage_content__1Ddut"}},92:function(e,t,n){e.exports={ingredientsBlock:"IngredientsBlock_ingredientsBlock__2W_BW"}},94:function(e,t,n){e.exports={wrapper:"IngredientsTabs_wrapper__1ClY4"}},95:function(e,t,n){e.exports={ingredient:"ConstructorIngredient_ingredient__TFQAr"}},97:function(e,t,n){e.exports={wrapper:"SinglePageWrapper_wrapper__1Yv4v"}},98:function(e,t,n){e.exports={orderList:"Ordres_orderList__sc-M3"}},99:function(e,t,n){e.exports={wrapper:"ErrorModal_wrapper__32UQf"}}},[[195,1,2]]]);
//# sourceMappingURL=main.b61380fb.chunk.js.map